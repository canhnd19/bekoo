import{_ as N}from"./BaseButton-BRH5bTUj.js";import{d as B,j as U,l as k,x as n,B as E,o as M,c as j,a,s as u,f as s,L as p,t as A,p as S,O as w,n as z,aj as _,M as D,_ as R}from"./index-BBvNq1E-.js";/* empty css                 */import{E as F}from"./index-CdyDH2Sy.js";import"./BaseIcon.vue_vue_type_script_setup_true_lang-BCcGLxHj.js";import"./index-CBwSaz3_.js";import"./use-form-item-DiDg1NfM.js";const L={class:"layout"},W={class:"content"},X={class:"flex items-center justify-center space-x-2"},q={class:"mb-3 mt-8 text-center text-4xl font-bold text-primary"},G={class:"text-center"},O=60,H=B({__name:"PinCodeView",setup(J){const P=U(),{user:i}=k(),r=n(O),m=n(""),d=n(""),c=n(""),f=n(""),x=n(""),v=n(""),V=n(!1);E(()=>{h()});const h=()=>{r.value=O;const l=setInterval(()=>{r.value>0?r.value--:clearInterval(l)},1e3)},C=(l,t,o,g,e,b)=>{if(/[^0-9]/.test(l+t+o+g+e+b))return"Invalid input: All numbers must be single digits.";const y=parseInt(l+t+o+g+e+b);if(y<1e5||y>999999){D.error("Invalid OTP");return}return y},T=async()=>{try{V.value=!0;const l=C(m.value,d.value,c.value,f.value,x.value,v.value);await _.pinCode({code:l,email:i.patient?i.patient.info.email:i.doctor.info.email}),P.push({name:"SetNewPassword"}),V.value=!1}catch(l){V.value=!1,console.log(l)}},I=async()=>{try{await _.forgotPass({email:i.patient?i.patient.info.email:i.doctor.info.email}),h()}catch(l){console.log(l)}};return(l,t)=>{const o=F,g=N;return M(),j("div",L,[a("div",W,[a("div",null,[t[8]||(t[8]=a("p",{class:"text-label mb-3"},"Nhập OTP",-1)),t[9]||(t[9]=a("p",{class:"mb-8 text-center"}," Mã xác thực OTP vừa được gửi đến email của bạn. Vui lòng nhập mã OTP để đặt lại mật khẩu! ",-1)),a("div",X,[u(o,{modelValue:s(m),"onUpdate:modelValue":t[0]||(t[0]=e=>p(m)?m.value=e:null),class:"input-otp",autocomplete:"off",style:{width:"56px",height:"56px"},type:"text"},null,8,["modelValue"]),u(o,{modelValue:s(d),"onUpdate:modelValue":t[1]||(t[1]=e=>p(d)?d.value=e:null),class:"input-otp",autocomplete:"off",style:{width:"56px",height:"56px"},type:"text"},null,8,["modelValue"]),u(o,{modelValue:s(c),"onUpdate:modelValue":t[2]||(t[2]=e=>p(c)?c.value=e:null),class:"input-otp",autocomplete:"off",style:{width:"56px",height:"56px"},type:"text"},null,8,["modelValue"]),u(o,{modelValue:s(f),"onUpdate:modelValue":t[3]||(t[3]=e=>p(f)?f.value=e:null),class:"input-otp",autocomplete:"off",style:{width:"56px",height:"56px"},type:"text"},null,8,["modelValue"]),u(o,{modelValue:s(x),"onUpdate:modelValue":t[4]||(t[4]=e=>p(x)?x.value=e:null),class:"input-otp",autocomplete:"off",style:{width:"56px",height:"56px"},type:"text"},null,8,["modelValue"]),u(o,{modelValue:s(v),"onUpdate:modelValue":t[5]||(t[5]=e=>p(v)?v.value=e:null),class:"input-otp",autocomplete:"off",style:{width:"56px",height:"56px"},type:"text"},null,8,["modelValue"])]),a("p",q,A(s(r))+"s",1),u(g,{loading:s(V),size:"large",class:"mx-auto mb-8 w-52",onClick:T},{default:S(()=>t[6]||(t[6]=[w("Xác nhận")])),_:1},8,["loading"]),a("p",G,[t[7]||(t[7]=w(" Ban không nhận được OTP, ")),a("span",{class:z(["cursor-pointer text-primary",{disable:s(r)}]),onClick:I}," gửi lại OTP?",2)])])])])}}}),lt=R(H,[["__scopeId","data-v-692dfb46"]]);export{lt as default};

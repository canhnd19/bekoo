import{_ as S,p as Y,E as N}from"./el-table-column-B1oNrHuq.js";import{d as E,o as h,m as H,p as l,J as b,a as o,s as a,D as U,k as $,A as q,y as d,Q as x,c as C,f as s,G as A,F as I,P as M,H as O,q as j,t as c,_ as Q}from"./index-BU1iguH7.js";import{E as G}from"./el-select-BfTKdCYR.js";import{_ as J}from"./BaseSelect-DdTGAiz7.js";import{_ as K}from"./BaseIcon.vue_vue_type_script_setup_true_lang-CCbvUmnL.js";import{D as W}from"./index-B9kqzngz.js";import{u as X}from"./useDateFormat-VeIjlpng.js";import{u as Z}from"./useFormatCurrency-DyMudwlN.js";import{_ as ee}from"./BasePopup-C7jUZDT7.js";import{_ as te}from"./BaseButton-BDwX0vSs.js";import"./BasePagination-CiNEX6m4.js";import"./el-scrollbar-B8g7HqTk.js";import"./el-popper-Cq7smgCX.js";import"./use-form-item-DlxyntzG.js";import"./index-Dc43DerD.js";import"./index-XkGIzdan.js";import"./index-FQutX4KI.js";import"./index-B1kUDyCP.js";import"./BaseLoading-BaESXM16.js";import"./castArray-DdigzrBb.js";import"./index-3b8mNxYg.js";import"./refs-B0TcBiIn.js";const ne={class:"flex items-center justify-end space-x-3"},oe=E({__name:"PopupConfirmDeleteBooking",props:{isLoadingButton:{type:Boolean,default:!1}},emits:["cancel","yes"],setup(y,{emit:g}){const v=y,_=g;return(u,e)=>{const p=te,f=ee;return h(),H(f,{name:"popup-confirm-delete-booking",width:"480"},{title:l(()=>e[1]||(e[1]=[b(" Hủy lịch đặt khám ")])),footer:l(()=>[o("div",ne,[a(p,{type:"plain",size:"small",class:"w-20"},{default:l(()=>e[2]||(e[2]=[b("Hủy")])),_:1}),a(p,{loading:v.isLoadingButton,size:"small",class:"w-20",onClick:e[0]||(e[0]=m=>_("yes"))},{default:l(()=>e[3]||(e[3]=[b("Có")])),_:1},8,["loading"])])]),default:l(()=>[e[4]||(e[4]=o("div",null,[o("p",{class:"text-base"},"Bạn có chắc chắn muốn hủy lịch khám không?")],-1))]),_:1})}}}),ae=[{label:"Tất cả",value:0},{label:"Đã xác nhận",value:1},{label:"Đã hủy",value:2},{label:"Đã tới khám",value:3},{label:"Quá hạn chưa tới khám",value:4}],le={class:"container"},se={class:"flex items-center justify-start space-x-2 py-6"},ie={class:"bg-[#e8f2f7]"},re={class:"container py-6"},pe={class:"mr-3 flex items-center justify-end"},ue=E({__name:"BookingHistoryView",setup(y){const{setOpenPopup:g}=U(),v=$();q(()=>{m()});const _=d([]),u=d(0),e=d({...W}),p=d(!1),f=d({}),m=async()=>{try{e.value.loading=!0;const n=v.params.id,i=await x.getDataBookingHistory(n,u.value,e.value);_.value=i.value.contentResponse,e.value.totalElements=i.value.totalElements,e.value.loading=!1}catch(n){e.value.loading=!1,console.log(n)}},D=n=>{e.value.pageSize=n,e.value.pageIndex=1,m()},w=n=>{e.value.pageIndex=n,m()},L=n=>{u.value=n,m()},T=()=>{M.push({name:"Home"})},z=n=>{f.value=n,g("popup-confirm-delete-booking")},V=async()=>{try{p.value=!0,await x.deleteBooking(f.value.id),O.success("Hủy đặt khám thành công"),g("popup-confirm-delete-booking",!1),p.value=!1,m()}catch(n){console.log(n),p.value=!1}};return(n,i)=>{const k=K,F=G,P=J,r=N,R=S;return h(),C(I,null,[o("div",le,[o("p",se,[o("span",{class:"cursor-pointer text-base font-semibold",onClick:T},"Trang chủ"),a(k,{name:"arrow-right"}),i[3]||(i[3]=o("span",{class:"cursor-pointer font-semibold text-primary"},"Lịch sử khám bệnh",-1))])]),o("div",ie,[o("div",re,[a(P,{modelValue:s(u),"onUpdate:modelValue":i[0]||(i[0]=t=>A(u)?u.value=t:null),placeholder:"Chọn",class:"select",onChange:L},{default:l(()=>[(h(!0),C(I,null,j(s(ae),(t,B)=>(h(),H(F,{key:B,value:t.value,label:t.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"]),a(R,{page:s(e).pageIndex,"onUpdate:page":i[1]||(i[1]=t=>s(e).pageIndex=t),limit:s(e).pageSize,"onUpdate:limit":i[2]||(i[2]=t=>s(e).pageSize=t),data:s(_),query:s(e),class:"mt-6",onPageChange:w,onLimitChange:D},{default:l(()=>[a(r,{type:"index",index:t=>("printIndex"in n?n.printIndex:s(Y))(t,s(e)),label:"#",align:"center"},null,8,["index"]),a(r,{label:"thời gian"},{default:l(({row:t})=>[o("p",null,c(s(X)(t.checkIn,"DD/MM/YYYY HH:mm:ss")),1)]),_:1}),a(r,{label:"bác sĩ"},{default:l(({row:t})=>[o("p",null,c(t.doctor.info.name),1)]),_:1}),a(r,{label:"chuyên khoa"},{default:l(({row:t})=>[o("p",null,c(t.specialize.department.name),1)]),_:1}),a(r,{label:"gói khám"},{default:l(({row:t})=>[o("p",null,c(t.specialize.name),1)]),_:1}),a(r,{label:"giá"},{default:l(({row:t})=>[o("p",null,c(s(Z)(t.specialize.price)),1)]),_:1}),a(r,{label:"trạng thái"},{default:l(({row:t})=>[o("p",null,c(t.status),1)]),_:1}),a(r,{label:"hành động",align:"right"},{default:l(({row:t})=>[o("div",pe,[a(k,{name:"delete",onClick:B=>z(t)},null,8,["onClick"])])]),_:1})]),_:1},8,["page","limit","data","query"])])]),a(oe,{"is-loading-button":s(p),onYes:V},null,8,["is-loading-button"])],64)}}}),Ve=Q(ue,[["__scopeId","data-v-f3131dfb"]]);export{Ve as default};

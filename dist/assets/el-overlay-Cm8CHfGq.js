import{bW as j,bD as Z,ar as q,J,b as _,e as O,bG as Y,aY as L,z as D,aV as P,bP as Q,c1 as F,bR as ee,aw as M,V as I,a3 as p,d as oe,s as ne,r as N,bc as te,b9 as le,aI as se,c2 as ae,y as E,b7 as ue,c3 as ie,X as de,M as re,A as ce,af as fe,c4 as w}from"./index-BNZlxmQ0.js";import{U as R,u as k}from"./use-form-item-BReAePHK.js";import{t as me}from"./BaseIcon.vue_vue_type_script_setup_true_lang-C2di59ZF.js";import{g as ye}from"./scroll-CgPn9xs0.js";import{i as ve}from"./el-popper-xrLYVjRb.js";function Be(e,o,n){var a=e==null?0:e.length;if(!a)return-1;var t=0;return j(e,Z(o),t)}const Le=(...e)=>o=>{e.forEach(n=>{q(n)?n(o):n.value=o})};var b=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(b||{});const Ee=(e,o={})=>{J(e)||me("[useLockscreen]","You need to pass a ref param to this function");const n=o.ns||_("popup"),a=O(()=>n.bm("parent","hidden"));if(!Y||L(document.body,a.value))return;let t=0,u=!1,l="0";const r=()=>{setTimeout(()=>{ee(document==null?void 0:document.body,a.value),u&&document&&(document.body.style.width=l)},200)};D(e,c=>{if(!c){r();return}u=!L(document.body,a.value),u&&(l=document.body.style.width),t=ye(n.namespace.value);const i=document.documentElement.clientHeight<document.body.scrollHeight,f=P(document.body,"overflowY");t>0&&(i||f==="scroll")&&u&&(document.body.style.width=`calc(100% - ${t}px)`),Q(document.body,a.value)}),F(()=>r())},be=e=>{if(!e)return{onClick:M,onMousedown:M,onMouseup:M};let o=!1,n=!1;return{onClick:l=>{o&&n&&e(l),o=n=!1},onMousedown:l=>{o=l.target===l.currentTarget},onMouseup:l=>{n=l.target===l.currentTarget}}},pe=I({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:p([String,Array,Object])},zIndex:{type:p([String,Number])}}),Ce={click:e=>e instanceof MouseEvent},Te="overlay";var Se=oe({name:"ElOverlay",props:pe,emits:Ce,setup(e,{slots:o,emit:n}){const a=_(Te),t=c=>{n("click",c)},{onClick:u,onMousedown:l,onMouseup:r}=be(e.customMaskEvent?void 0:t);return()=>e.mask?ne("div",{class:[a.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:u,onMousedown:l,onMouseup:r},[N(o,"default")],b.STYLE|b.CLASS|b.PROPS,["onClick","onMouseup","onMousedown"]):te("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[N(o,"default")])}});const Ne=Se,Ae=I({center:Boolean,alignCenter:Boolean,closeIcon:{type:le},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),we={close:()=>!0},ke=I({...Ae,appendToBody:Boolean,appendTo:{type:p([String,Object]),default:"body"},beforeClose:{type:p(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"}}),_e={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[R]:e=>se(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Ye=(e,o)=>{var n;const t=fe().emit,{nextZIndex:u}=ae();let l="";const r=k(),c=k(),i=E(!1),f=E(!1),v=E(!1),C=E((n=e.zIndex)!=null?n:u());let m,y;const z=ue("namespace",ie),H=O(()=>{const s={},d=`--${z.value}-dialog`;return e.fullscreen||(e.top&&(s[`${d}-margin-top`]=e.top),e.width&&(s[`${d}-width`]=de(e.width))),s}),V=O(()=>e.alignCenter?{display:"flex"}:{});function G(){t("opened")}function U(){t("closed"),t(R,!1),e.destroyOnClose&&(v.value=!1)}function g(){t("close")}function x(){y==null||y(),m==null||m(),e.openDelay&&e.openDelay>0?{stop:m}=w(()=>B(),e.openDelay):B()}function T(){m==null||m(),y==null||y(),e.closeDelay&&e.closeDelay>0?{stop:y}=w(()=>A(),e.closeDelay):A()}function S(){function s(d){d||(f.value=!0,i.value=!1)}e.beforeClose?e.beforeClose(s):T()}function K(){e.closeOnClickModal&&S()}function B(){Y&&(i.value=!0)}function A(){i.value=!1}function W(){t("openAutoFocus")}function $(){t("closeAutoFocus")}function X(s){var d;((d=s.detail)==null?void 0:d.focusReason)==="pointer"&&s.preventDefault()}e.lockScroll&&Ee(i);function h(){e.closeOnPressEscape&&S()}return D(()=>e.modelValue,s=>{s?(f.value=!1,x(),v.value=!0,C.value=ve(e.zIndex)?u():C.value++,re(()=>{t("open"),o.value&&(o.value.scrollTop=0)})):i.value&&T()}),D(()=>e.fullscreen,s=>{o.value&&(s?(l=o.value.style.transform,o.value.style.transform=""):o.value.style.transform=l)}),ce(()=>{e.modelValue&&(i.value=!0,v.value=!0,x())}),{afterEnter:G,afterLeave:U,beforeLeave:g,handleClose:S,onModalClick:K,close:T,doClose:A,onOpenAutoFocus:W,onCloseAutoFocus:$,onCloseRequested:h,onFocusoutPrevented:X,titleId:r,bodyId:c,closed:f,style:H,overlayDialogStyle:V,rendered:v,visible:i,zIndex:C}};export{Ne as E,_e as a,Ae as b,Le as c,ke as d,we as e,Be as f,be as g,Ye as u};

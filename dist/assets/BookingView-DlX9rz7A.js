import{_ as re}from"./BaseButton-BsCrl1h9.js";import{Z as ie,$ as F,b3 as xe,a9 as Z,e as E,d as A,b as X,o as k,c as b,F as V,q as U,t as B,f as n,P as ee,a as e,n as C,r as H,g as ce,x as P,at as de,b4 as Y,s as M,p as S,O as j,ab as ae,a3 as ne,a4 as se,m as q,w as be,J as Ce,l as $e,k as we,B as Me,T as Ie,U as oe,Q as Be,V as Se,M as Pe,_ as Ee}from"./index-bc8WIROe.js";/* empty css                 */import{E as J,a as Oe}from"./el-button-CMWh5rxz.js";/* empty css                        */import{_ as Ve}from"./BasePagination-Dv19vzL8.js";import{_ as Te,a as Ne}from"./BaseLoading-B71c8O29.js";import{_ as je}from"./BaseIcon.vue_vue_type_script_setup_true_lang-Dvn-DGbX.js";import{_ as ze}from"./bac_si_gia_dinh-DoifZgVA.js";import{D as Le}from"./index-CIlCm72v.js";import{u as ue}from"./useFormatCurrency-DyMudwlN.js";import{_ as Re}from"./BasePopup-BjGHYoRs.js";import{r as L,d as R,l as Ae,W as K}from"./localeData-BfimhVqt.js";import{I as me,U as pe}from"./index-BKYBssxt.js";import{E as Ue}from"./index-BU62kPzQ.js";import"./index-y1EEgaBZ.js";import"./use-form-item-DO5qAMYR.js";import"./el-select-Ca1M7iKS.js";import"./el-popper-BZPNfbwh.js";import"./el-scrollbar-BDbcRj2l.js";import"./castArray--bmkrbOV.js";import"./index-BfW96a2Z.js";import"./refs-wm6RwY_s.js";const Fe=(a,c)=>{const v=a.subtract(1,"month").endOf("month").date();return L(c).map((l,y)=>v-(c-y-1))},He=a=>{const c=a.daysInMonth();return L(c).map((v,l)=>l+1)},Ye=a=>L(a.length/7).map(c=>{const v=c*7;return a.slice(v,v+7)}),qe=ie({selectedDay:{type:F(Object)},range:{type:F(Array)},date:{type:F(Object),required:!0},hideHeader:{type:Boolean}}),Ge={pick:a=>xe(a)},We=(a,c)=>{R.extend(Ae);const v=R.localeData().firstDayOfWeek(),{t:l,lang:y}=Z(),s=R().locale(y.value),f=E(()=>!!a.range&&!!a.range.length),d=E(()=>{let r=[];if(f.value){const[o,p]=a.range,D=L(p.date()-o.date()+1).map(m=>({text:o.date()+m,type:"current"}));let i=D.length%7;i=i===0?0:7-i;const g=L(i).map((m,w)=>({text:w+1,type:"next"}));r=D.concat(g)}else{const o=a.date.startOf("month").day(),p=Fe(a.date,(o-v+7)%7).map(m=>({text:m,type:"prev"})),D=He(a.date).map(m=>({text:m,type:"current"}));r=[...p,...D];const i=7-(r.length%7||7),g=L(i).map((m,w)=>({text:w+1,type:"next"}));r=r.concat(g)}return Ye(r)}),h=E(()=>{const r=v;return r===0?K.map(o=>l(`el.datepicker.weeks.${o}`)):K.slice(r).concat(K.slice(0,r)).map(o=>l(`el.datepicker.weeks.${o}`))}),$=(r,o)=>{switch(o){case"prev":return a.date.startOf("month").subtract(1,"month").date(r);case"next":return a.date.startOf("month").add(1,"month").date(r);case"current":return a.date.date(r)}};return{now:s,isInRange:f,rows:d,weekDays:h,getFormattedDate:$,handlePickDay:({text:r,type:o})=>{const p=$(r,o);c("pick",p)},getSlotData:({text:r,type:o})=>{const p=$(r,o);return{isSelected:p.isSame(a.selectedDay),type:`${o}-month`,day:p.format("YYYY-MM-DD"),date:p.toDate()}}}},Qe=A({name:"DateTable"}),Je=A({...Qe,props:qe,emits:Ge,setup(a,{expose:c,emit:v}){const l=a,{isInRange:y,now:s,rows:f,weekDays:d,getFormattedDate:h,handlePickDay:$,getSlotData:I}=We(l,v),u=X("calendar-table"),r=X("calendar-day"),o=({text:p,type:D})=>{const i=[D];if(D==="current"){const g=h(p,D);g.isSame(l.selectedDay,"day")&&i.push(r.is("selected")),g.isSame(s,"day")&&i.push(r.is("today"))}return i};return c({getFormattedDate:h}),(p,D)=>(k(),b("table",{class:C([n(u).b(),n(u).is("range",n(y))]),cellspacing:"0",cellpadding:"0"},[p.hideHeader?ee("v-if",!0):(k(),b("thead",{key:0},[(k(!0),b(V,null,U(n(d),i=>(k(),b("th",{key:i},B(i),1))),128))])),e("tbody",null,[(k(!0),b(V,null,U(n(f),(i,g)=>(k(),b("tr",{key:g,class:C({[n(u).e("row")]:!0,[n(u).em("row","hide-border")]:g===0&&p.hideHeader})},[(k(!0),b(V,null,U(i,(m,w)=>(k(),b("td",{key:w,class:C(o(m)),onClick:T=>n($)(m)},[e("div",{class:C(n(r).b())},[H(p.$slots,"date-cell",{data:n(I)(m)},()=>[e("span",null,B(m.text),1)])],2)],10,["onClick"]))),128))],2))),128))])],2))}});var le=ce(Je,[["__file","date-table.vue"]]);const Ke=(a,c)=>{const v=a.endOf("month"),l=c.startOf("month"),s=v.isSame(l,"week")?l.add(1,"week"):l;return[[a,v],[s.startOf("week"),c]]},Xe=(a,c)=>{const v=a.endOf("month"),l=a.add(1,"month").startOf("month"),y=v.isSame(l,"week")?l.add(1,"week"):l,s=y.endOf("month"),f=c.startOf("month"),d=s.isSame(f,"week")?f.add(1,"week"):f;return[[a,v],[y.startOf("week"),s],[d.startOf("week"),c]]},Ze=(a,c,v)=>{const{lang:l}=Z(),y=P(),s=R().locale(l.value),f=E({get(){return a.modelValue?h.value:y.value},set(i){if(!i)return;y.value=i;const g=i.toDate();c(me,g),c(pe,g)}}),d=E(()=>{if(!a.range||!de(a.range)||a.range.length!==2||a.range.some(w=>!Y(w)))return[];const i=a.range.map(w=>R(w).locale(l.value)),[g,m]=i;return g.isAfter(m)?[]:g.isSame(m,"month")?o(g,m):g.add(1,"month").month()!==m.month()?[]:o(g,m)}),h=E(()=>a.modelValue?R(a.modelValue).locale(l.value):f.value||(d.value.length?d.value[0][0]:s)),$=E(()=>h.value.subtract(1,"month").date(1)),I=E(()=>h.value.add(1,"month").date(1)),u=E(()=>h.value.subtract(1,"year").date(1)),r=E(()=>h.value.add(1,"year").date(1)),o=(i,g)=>{const m=i.startOf("week"),w=g.endOf("week"),T=m.get("month"),z=w.get("month");return T===z?[[m,w]]:(T+1)%12===z?Ke(m,w):T+2===z||(T+1)%11===z?Xe(m,w):[]},p=i=>{f.value=i};return{calculateValidatedDateRange:o,date:h,realSelectedDay:f,pickDay:p,selectDate:i=>{const m={"prev-month":$.value,"next-month":I.value,"prev-year":u.value,"next-year":r.value,today:s}[i];m.isSame(h.value,"day")||p(m)},validatedRange:d}},et=a=>de(a)&&a.length===2&&a.every(c=>Y(c)),tt=ie({modelValue:{type:Date},range:{type:F(Array),validator:et}}),at={[pe]:a=>Y(a),[me]:a=>Y(a)},nt="ElCalendar",st=A({name:nt}),ot=A({...st,props:tt,emits:at,setup(a,{expose:c,emit:v}){const l=a,y=X("calendar"),{calculateValidatedDateRange:s,date:f,pickDay:d,realSelectedDay:h,selectDate:$,validatedRange:I}=Ze(l,v),{t:u}=Z(),r=E(()=>{const o=`el.datepicker.month${f.value.format("M")}`;return`${f.value.year()} ${u("el.datepicker.year")} ${u(o)}`});return c({selectedDay:h,pickDay:d,selectDate:$,calculateValidatedDateRange:s}),(o,p)=>(k(),b("div",{class:C(n(y).b())},[e("div",{class:C(n(y).e("header"))},[H(o.$slots,"header",{date:n(r)},()=>[e("div",{class:C(n(y).e("title"))},B(n(r)),3),n(I).length===0?(k(),b("div",{key:0,class:C(n(y).e("button-group"))},[M(n(Oe),null,{default:S(()=>[M(n(J),{size:"small",onClick:D=>n($)("prev-month")},{default:S(()=>[j(B(n(u)("el.datepicker.prevMonth")),1)]),_:1},8,["onClick"]),M(n(J),{size:"small",onClick:D=>n($)("today")},{default:S(()=>[j(B(n(u)("el.datepicker.today")),1)]),_:1},8,["onClick"]),M(n(J),{size:"small",onClick:D=>n($)("next-month")},{default:S(()=>[j(B(n(u)("el.datepicker.nextMonth")),1)]),_:1},8,["onClick"])]),_:1})],2)):ee("v-if",!0)])],2),n(I).length===0?(k(),b("div",{key:0,class:C(n(y).e("body"))},[M(le,{date:n(f),"selected-day":n(h),onPick:n(d)},ae({_:2},[o.$slots["date-cell"]?{name:"date-cell",fn:S(D=>[H(o.$slots,"date-cell",ne(se(D)))])}:void 0]),1032,["date","selected-day","onPick"])],2)):(k(),b("div",{key:1,class:C(n(y).e("body"))},[(k(!0),b(V,null,U(n(I),(D,i)=>(k(),q(le,{key:i,date:D[0],"selected-day":n(h),range:D,"hide-header":i!==0,onPick:n(d)},ae({_:2},[o.$slots["date-cell"]?{name:"date-cell",fn:S(g=>[H(o.$slots,"date-cell",ne(se(g)))])}:void 0]),1032,["date","selected-day","range","hide-header","onPick"]))),128))],2))],2))}});var lt=ce(ot,[["__file","calendar.vue"]]);const rt=be(lt),it={class:"space-y-3"},ct={class:"text-xl"},dt={class:"text-xl"},ut={class:"text-xl"},mt={class:"text-xl"},pt={class:"text-xl"},gt={class:"flex items-center justify-end space-x-3"},vt=A({__name:"PopupConfirmBooking",props:{data:{default:()=>({})},bookingInfo:{default:()=>({})},nameDepartment:{default:""},isLoadingBooking:{type:Boolean,default:!1}},emits:["cancel","booking"],setup(a,{emit:c}){const v=c,l=a;return(y,s)=>{const f=re,d=Re;return k(),q(d,{name:"popup-confirm-booking",width:"480"},{title:S(()=>s[2]||(s[2]=[j(" Xác nhận thông tin đặt lịch ")])),footer:S(()=>[e("div",gt,[M(f,{type:"plain",size:"small",class:"w-20",onClick:s[0]||(s[0]=h=>v("cancel"))},{default:S(()=>s[8]||(s[8]=[j("Hủy")])),_:1}),M(f,{loading:l.isLoadingBooking,size:"small",class:"w-24",onClick:s[1]||(s[1]=h=>v("booking"))},{default:S(()=>s[9]||(s[9]=[j("Đặt lịch")])),_:1},8,["loading"])])]),default:S(()=>[e("div",it,[e("p",ct,[s[3]||(s[3]=e("span",null," Chuyên khoa: ",-1)),e("strong",null,B(l.nameDepartment),1)]),e("p",dt,[s[4]||(s[4]=e("span",null," Gói khám: ",-1)),e("strong",null,B(l.bookingInfo.packageName),1)]),e("p",ut,[s[5]||(s[5]=e("span",null," Bác sĩ: ",-1)),e("strong",null,B(l.bookingInfo.doctorName),1)]),e("p",mt,[s[6]||(s[6]=e("span",null," Thời gian: ",-1)),e("strong",null,B(l.bookingInfo.time),1)]),e("p",pt,[s[7]||(s[7]=e("span",null," Tiền khám: ",-1)),e("strong",null,B(n(ue)(l.bookingInfo.price)),1)])])]),_:1})}}}),ft={class:"container mt-4"},kt={class:"mb-10"},yt={class:"my-5 flex items-center justify-start space-x-2"},ht={class:"bg-[#e8f2f7] py-10"},_t={class:"container"},Dt={key:1,class:"box-package"},xt=["onClick"],bt={class:"ml-3 w-full"},Ct={class:"text-2xl font-medium"},$t={class:"flex items-center justify-between"},wt={class:"text-xl font-bold text-[#ffb54a]"},Mt={class:"mx-[26px] mb-[26px]"},It={key:1,class:"box-package"},Bt={class:"m-[26px]"},St={class:"w-full text-center"},Pt={class:"mb-4"},Et={class:"flex justify-around"},Ot={class:"mb-8"},Vt={class:"flex justify-around"},Tt={class:"mt-8"},Nt=A({__name:"BookingView",setup(a){const{setOpenPopup:c}=Ce(),{patient:v}=$e(),l=we();Me(()=>{g()});const y=sessionStorage.getItem("department-name"),s=P(),f=P(new Date),d=P(""),h=P([]),$=P({}),I=P(!1),u=P({...Le}),r=P(!1),o=P(!1),p=P({}),D=P({doctorName:"",packageName:"",price:""}),i=()=>{oe.push({name:"Home"})},g=async()=>{try{u.value.loading=!0;const _=l.params.idDepartment,t=await Ie.getListByDeparmentId(u.value,_);h.value=t.value.contentResponse,u.value.totalElements=t.value.totalElements,u.value.loading=!1}catch(_){u.value.loading=!1,console.log(_)}},m=_=>{u.value.pageSize=_,u.value.pageIndex=1,g()},w=_=>{u.value.pageIndex=_,g()},T=()=>{I.value=!1,f.value=new Date,d.value="",p.value={patientId:"",doctorId:"",specializeId:"",checkIn:"",note:""}},z=_=>{I.value=!0,$.value=_},te=_=>{s.value&&s.value.selectDate(_)},O=_=>{d.value=_},ge=async()=>{try{o.value=!0;const _=l.params.idDoctor,t=`${f.value.toISOString().split("T")[0]} ${d.value}`,N=new Date(t).toISOString(),G=N.substring(0,N.length-1),W=await Be.getDoctorById(_);D.value={doctorName:W.value.info.name,packageName:$.value.name,price:$.value.price,time:t},p.value={...p.value,patientId:v.id,doctorId:l.params.idDoctor,specializeId:$.value.id,checkIn:G},o.value=!1,c("popup-confirm-booking")}catch(_){o.value=!1,console.log(_)}},ve=()=>{c("popup-confirm-booking",!1)},fe=async()=>{try{r.value=!0;const _=await Se.booking(p.value);Pe.success(_.message),c("popup-confirm-booking",!1),oe.push({name:"Home"}),r.value=!1}catch(_){r.value=!1,console.log(_)}},ke=E(()=>!d.value);return(_,t)=>{const N=je,G=Te,W=Ne,ye=Ve,he=rt,_e=Ue,De=re;return k(),b(V,null,[e("div",ft,[e("div",kt,[e("p",yt,[e("span",{class:"cursor-pointer text-base font-semibold",onClick:i},"Trang chủ"),M(N,{name:"arrow-right"}),e("span",{class:C(["cursor-pointer font-semibold",{"text-primary":!I.value}]),onClick:T},"Chọn gói khám",2),I.value?(k(),b(V,{key:0},[M(N,{name:"arrow-right"}),t[14]||(t[14]=e("span",{class:"font-semibold text-primary"},"Chọn ngày khám",-1))],64)):ee("",!0)])])]),e("div",ht,[e("div",_t,[I.value?(k(),b("div",It,[t[22]||(t[22]=e("div",{class:"header"},[e("p",{class:"text-center text-2xl font-semibold"},"Vui lòng chọn thời gian khám")],-1)),e("div",Bt,[M(he,{ref_key:"calendar",ref:s,modelValue:f.value,"onUpdate:modelValue":t[4]||(t[4]=x=>f.value=x),class:"calender"},{header:S(({date:x})=>[M(N,{name:"arrow-left",class:"cursor-pointer",onClick:t[2]||(t[2]=Q=>te("prev-month"))}),e("p",St,B(x),1),M(N,{name:"arrow-right2",class:"cursor-pointer",onClick:t[3]||(t[3]=Q=>te("next-month"))})]),_:1},8,["modelValue"]),e("div",Pt,[t[17]||(t[17]=e("p",{class:"mb-3 text-xl font-semibold"},"Buổi sáng",-1)),e("ul",Et,[e("li",{class:C(["hour",{active:d.value==="07:00:00"}]),onClick:t[5]||(t[5]=x=>O("07:00:00"))}," 07:00 - 08:00 ",2),e("li",{class:C(["hour",{active:d.value==="08:00:00"}]),onClick:t[6]||(t[6]=x=>O("08:00:00"))}," 08:00 - 09:00 ",2),e("li",{class:C(["hour",{active:d.value==="09:00:00"}]),onClick:t[7]||(t[7]=x=>O("09:00:00"))}," 09:00 - 10:00 ",2),e("li",{class:C(["hour",{active:d.value==="10:00:00"}]),onClick:t[8]||(t[8]=x=>O("10:00:00"))}," 10:00 - 11:00 ",2)])]),e("div",Ot,[t[18]||(t[18]=e("p",{class:"mb-3 text-xl font-semibold"},"Buổi chiều",-1)),e("ul",Vt,[e("li",{class:C(["hour",{active:d.value==="13:00:00"}]),onClick:t[9]||(t[9]=x=>O("13:00:00"))}," 13:00 - 14:00 ",2),e("li",{class:C(["hour",{active:d.value==="14:00:00"}]),onClick:t[10]||(t[10]=x=>O("14:00:00"))}," 14:00 - 15:00 ",2),e("li",{class:C(["hour",{active:d.value==="15:00:00"}]),onClick:t[11]||(t[11]=x=>O("15:00:00"))}," 15:00 - 16:00 ",2),e("li",{class:C(["hour",{active:d.value==="16:00:00"}]),onClick:t[12]||(t[12]=x=>O("16:00:00"))}," 16:00 - 17:00 ",2)])]),t[21]||(t[21]=e("p",{class:"text-lg text-[#d98634]"},"Tất cả thời gian theo múi giờ Việt Nam GMT +7",-1)),e("div",Tt,[t[19]||(t[19]=e("p",{class:"mb-3 text-xl"},"Ghi chú",-1)),M(_e,{modelValue:p.value.note,"onUpdate:modelValue":t[13]||(t[13]=x=>p.value.note=x),class:"input",style:{height:"50px",width:"100%"},autosize:{minRows:2},type:"textarea",placeholder:"Vui lòng nhập ghi chú"},null,8,["modelValue"])]),M(De,{loading:o.value,disabled:n(ke),size:"small",class:"mt-8",onClick:ge},{default:S(()=>t[20]||(t[20]=[j("Tiếp tục")])),_:1},8,["loading","disabled"])])])):(k(),b(V,{key:0},[u.value.loading?(k(),q(G,{key:0})):(k(),b("div",Dt,[t[16]||(t[16]=e("div",{class:"header"},[e("p",{class:"text-center text-2xl font-semibold"},"Vui lòng chọn gói khám")],-1)),h.value.length?(k(!0),b(V,{key:1},U(h.value,(x,Q)=>(k(),b("div",{key:Q,class:"flex items-center justify-center"},[e("div",{class:"card-item",onClick:jt=>z(x)},[t[15]||(t[15]=e("img",{src:ze,alt:""},null,-1)),e("div",bt,[e("p",Ct,B(x.name),1),e("div",$t,[e("p",wt,"Giá: "+B(n(ue)(x.price)),1)])])],8,xt)]))),128)):(k(),q(W,{key:0})),e("div",Mt,[M(ye,{"page-index":u.value.pageIndex,"onUpdate:pageIndex":t[0]||(t[0]=x=>u.value.pageIndex=x),"page-size":u.value.pageSize,"onUpdate:pageSize":t[1]||(t[1]=x=>u.value.pageSize=x),query:u.value,label:"package",onLimitChange:m,onPageChange:w},null,8,["page-index","page-size","query"])])]))],64))])]),M(vt,{"is-loading-booking":r.value,data:p.value,"name-department":n(y),"booking-info":D.value,onBooking:fe,onCancel:ve},null,8,["is-loading-booking","data","name-department","booking-info"])],64)}}}),ra=Ee(Nt,[["__scopeId","data-v-6d49a884"]]);export{ra as default};

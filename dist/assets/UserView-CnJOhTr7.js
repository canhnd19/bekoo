import{_ as C,p as B,E as A}from"./el-table-column-BUQl8b9d.js";import{_ as S}from"./BaseIcon.vue_vue_type_script_setup_true_lang-CXCt6HE3.js";import{d as V,D,y as u,A as N,E as _,o as L,c as T,a as s,s as o,f as l,G as k,p as r,F as z,H as P,t as c,_ as R}from"./index-BazZycSi.js";import"./el-select-DRAX-p09.js";import{_ as q}from"./BaseInput-3xj4SFnR.js";import{D as F}from"./index-B9kqzngz.js";import{_ as M}from"./PopupConfirmDelete.vue_vue_type_script_setup_true_lang-Ch6Iy-E2.js";import"./BasePagination-zi4vRzCD.js";import"./el-scrollbar-COXskqOo.js";import"./el-popper-DVqi0Uqc.js";import"./use-form-item-Bmck_7cn.js";import"./index-BGLblxvF.js";import"./index-BUmyAM3F.js";import"./index-BFj4Gnn-.js";import"./index-Crcy9qWF.js";import"./BaseLoading-CBmHXZMg.js";import"./castArray-CnzFyUbq.js";/* empty css                 */import"./BasePopup-l7W5RoIU.js";import"./refs-DWDmDWCi.js";import"./BaseButton-DN4wnmz0.js";const $={class:"rounded-lg p-4"},j={class:"flex items-start justify-between"},G={class:"flex items-center justify-end space-x-3"},O=V({__name:"UserView",setup(H){const{setOpenPopup:f}=D(),e=u({...F}),m=u(""),v=u([]),g=u({}),d=u(!1);N(()=>{p()});const p=async(t="")=>{try{e.value.loading=!0;const n=t==="search"?await _.getAllUserByName(m.value,e.value):await _.getAllUser(e.value);v.value=n.value.contentResponse,e.value.totalElements=n.value.totalElements,e.value.loading=!1}catch(n){e.value.loading=!1,console.log(n)}},h=t=>{g.value=t,f("popup-confirm-delete")},b=async()=>{try{d.value=!0;const t=await _.deteteUser([g.value.id]);P.success(t.message),f("popup-confirm-delete",!1),d.value=!1,p()}catch(t){d.value=!1,console.log(t)}},x=t=>{e.value.pageSize=t,e.value.pageIndex=1,p()},y=t=>{e.value.pageIndex=t,p()},I=()=>{e.value={...e.value,pageIndex:1,pageSize:10,totalElements:0},p("search")};return(t,n)=>{const U=q,i=A,w=S,E=C;return L(),T(z,null,[s("div",$,[s("div",j,[o(U,{modelValue:l(m),"onUpdate:modelValue":n[0]||(n[0]=a=>k(m)?m.value=a:null),class:"input-search","show-icon":!0,onChange:I},null,8,["modelValue"])]),o(E,{page:l(e).pageIndex,"onUpdate:page":n[1]||(n[1]=a=>l(e).pageIndex=a),limit:l(e).pageSize,"onUpdate:limit":n[2]||(n[2]=a=>l(e).pageSize=a),data:l(v),query:l(e),class:"mt-6",label:"người dùng",onPageChange:y,onLimitChange:x},{default:r(()=>[o(i,{type:"index",index:a=>("printIndex"in t?t.printIndex:l(B))(a,l(e)),label:"#",align:"center"},null,8,["index"]),o(i,{label:"tên"},{default:r(({row:a})=>[s("p",null,c(a.name),1)]),_:1}),o(i,{label:"EMAIL"},{default:r(({row:a})=>[s("p",null,c(a.email),1)]),_:1}),o(i,{label:"số điện thoại",width:"200"},{default:r(({row:a})=>[s("p",null,c(a.phoneNumber),1)]),_:1}),o(i,{label:"giới tính",width:"90"},{default:r(({row:a})=>[s("p",null,c(a.gender),1)]),_:1}),o(i,{label:"hành động",width:"120",align:"right"},{default:r(({row:a})=>[s("div",G,[o(w,{name:"delete",onClick:Q=>h(a)},null,8,["onClick"])])]),_:1})]),_:1},8,["page","limit","data","query"])]),o(M,{name:l(g).email,type:"người dùng","is-loading-button":l(d),onDelete:b},null,8,["name","is-loading-button"])],64)}}}),_e=R(O,[["__scopeId","data-v-2e9b8f9b"]]);export{_e as default};

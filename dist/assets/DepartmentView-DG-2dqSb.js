import{a as pe,_ as Y,p as W,E as X}from"./el-table-column-CirTm9ro.js";import{_ as ue}from"./BaseTab-12JwSlVI.js";import{_ as j}from"./BaseIcon.vue_vue_type_script_setup_true_lang-CQCAIW9N.js";import{d as O,C as q,z as m,L as ce,o as E,m as U,p as c,I as B,t as A,a as s,s as a,f as e,N as P,G as N,_ as M,y as F,J as re,c as T,q as me,E as Q,F as S,O as J,e as ge,x as fe,K as _e}from"./index-BUq9SMfA.js";import"./el-select-qQqjo0YN.js";import{_ as R}from"./BaseButton-DSCnT-bE.js";import{_ as te}from"./BaseInput-DnzeJeQW.js";import{D as G}from"./index-B9kqzngz.js";import{_ as Z}from"./BasePopup-DHJEM4JJ.js";/* empty css                 */import{E as ve}from"./el-progress-DO7nLg73.js";import{E as ae}from"./index-GQge4NEK.js";import{_ as ee}from"./PopupConfirmDelete.vue_vue_type_script_setup_true_lang-Cb0f1XDe.js";import{_ as ye}from"./BasePagination-7rECZcWv.js";import{_ as he,a as xe}from"./BaseLoading-DPPSPdV0.js";import{u as be}from"./useFormatCurrency-DyMudwlN.js";import"./el-popper-DhRZ_xT_.js";import"./use-form-item-B6OeAMkc.js";import"./el-scrollbar-Dsc5NBip.js";import"./index-CIP85yaK.js";import"./index-B-jZyCjC.js";import"./index-8aw60HM1.js";import"./castArray-w_Ugw7DG.js";import"./refs-CVNYUSIk.js";const Ie={class:"space-y-3"},Ce={class:"flex justify-center"},ke={class:"relative w-40"},De=["src"],we={class:"border-border-table rounded-full border border-solid bg-white p-2"},Ee={class:"space-y-2"},Ae={class:"space-y-2"},Be={class:"flex items-center justify-end space-x-3"},$e=O({__name:"PopupAddOrEditDepartment",props:{data:{default:()=>({})},typeAction:{default:""}},emits:["add-or-edit"],setup($,{emit:_}){const{setOpenPopup:b}=q(),h=_,d=$,g=m({}),I=m(!1),t=m({name:"",description:"",urlImage:""});ce(()=>d.data,i=>{t.value={name:i.name,description:i.description,urlImage:i.urlImage}});const p=async i=>{g.value=i,t.value.urlImage=URL.createObjectURL(g.value.raw)},C=async()=>{try{I.value=!0;const i=d.data.id,n=new FormData;d.typeAction==="EDIT"&&n.append("id",i),g.value.raw&&n.append("image",g.value.raw),n.append("name",t.value.name),n.append("description",t.value.description);const u=d.typeAction==="ADD"?await P.createdDepartment(n):await P.editDepartment(n);N.success(u.message),b("popup-add-or-edit-department",!1),h("add-or-edit"),t.value={name:"",description:"",urlImage:""},I.value=!1}catch(i){I.value=!1,console.log(i)}},v=()=>{t.value={name:"",description:"",urlImage:""},b("popup-add-or-edit-department",!1)};return(i,n)=>{const u=j,V=ve,o=ae,l=R,w=Z;return E(),U(w,{name:"popup-add-or-edit-department",width:"700"},{title:c(()=>[B(A(d.typeAction==="ADD"?"Thêm chuyên khoa":"Sửa chuyên khoa"),1)]),footer:c(()=>[s("div",Be,[a(l,{type:"plain",size:"small",class:"w-20",onClick:v},{default:c(()=>n[4]||(n[4]=[B("Hủy")])),_:1}),a(l,{loading:e(I),size:"small",class:"w-20",onClick:C},{default:c(()=>[B(A(d.typeAction==="ADD"?"Tạo":"Sửa"),1)]),_:1},8,["loading"])])]),default:c(()=>[s("div",Ie,[s("div",Ce,[s("div",ke,[s("img",{src:e(t).urlImage,alt:"",class:"h-40 w-full rounded-full object-cover"},null,8,De),a(V,{"show-file-list":!1,"auto-upload":!1,accept:".png, .jpg, .webp, .jpeg","on-change":p,class:"absolute bottom-4 right-1"},{default:c(()=>[s("div",we,[a(u,{name:"edit-avatar"})])]),_:1})])]),s("div",Ee,[n[2]||(n[2]=s("p",{class:"text-label"},"Tên chuyên khoa",-1)),a(o,{modelValue:e(t).name,"onUpdate:modelValue":n[0]||(n[0]=x=>e(t).name=x),class:"input",style:{height:"50px",width:"100%"},placeholder:"Khoa Răng-Hàm-Mặt"},null,8,["modelValue"])]),s("div",Ae,[n[3]||(n[3]=s("p",{class:"text-label"},"Mô tả",-1)),a(o,{modelValue:e(t).description,"onUpdate:modelValue":n[1]||(n[1]=x=>e(t).description=x),class:"input",style:{height:"50px",width:"100%"},autosize:{minRows:2},type:"textarea",placeholder:"Vui lòng nhập mô tả"},null,8,["modelValue"])])])]),_:1})}}}),Ve=M($e,[["__scopeId","data-v-31167eb6"]]),ze={class:"text-xl"},Pe={class:"flex items-center justify-end space-x-3"},Le=O({__name:"PopupAddDoctortoPackage",props:{isLoadingAdd:{type:Boolean,default:!1}},emits:["cancel","add"],setup($,{emit:_}){const b=_,h=m([]),d=m(!1),g=m(""),I=$,t=m({...G,name:""});F(()=>{p()});const p=async()=>{try{d.value=!0;const n=await re.getAllDoctor(t.value);h.value=n.value.contentResponse,t.value.totalElements=n.value.totalElements,d.value=!1}catch(n){d.value=!1,console.log(n)}},C=n=>{g.value=n.id},v=n=>{t.value.pageSize=n,t.value.pageIndex=1,p()},i=n=>{t.value.pageIndex=n,p()};return(n,u)=>{const V=te,o=he,l=xe,w=pe,x=ye,z=R,L=Z;return E(),U(L,{name:"popup-add-doctor-to-package",width:"600"},{title:c(()=>u[6]||(u[6]=[B(" Thêm bác sĩ ")])),footer:c(()=>[s("div",Pe,[a(z,{type:"plain",size:"small",class:"w-20",onClick:u[4]||(u[4]=r=>b("cancel"))},{default:c(()=>u[7]||(u[7]=[B("Hủy")])),_:1}),a(z,{loading:I.isLoadingAdd,size:"small",class:"w-20",onClick:u[5]||(u[5]=r=>b("add",e(g)))},{default:c(()=>u[8]||(u[8]=[B("Thêm")])),_:1},8,["loading"])])]),default:c(()=>[s("div",null,[a(V,{modelValue:e(t).name,"onUpdate:modelValue":u[0]||(u[0]=r=>e(t).name=r),class:"input-search mb-3","show-icon":!0,onChange:p},null,8,["modelValue"]),e(d)?(E(),U(o,{key:0})):e(h).length===0?(E(),U(l,{key:1})):(E(!0),T(S,{key:2},me(e(h),(r,y)=>(E(),T("div",{key:y},[a(w,{modelValue:e(g),"onUpdate:modelValue":u[1]||(u[1]=f=>Q(g)?g.value=f:null),class:"check-box","true-value":r.id,size:"large",onChange:f=>C(r)},{default:c(()=>[s("p",ze,A(r.info.name)+" - "+A(r.info.email),1)]),_:2},1032,["modelValue","true-value","onChange"])]))),128)),a(x,{"page-index":e(t).pageIndex,"onUpdate:pageIndex":u[2]||(u[2]=r=>e(t).pageIndex=r),"page-size":e(t).pageSize,"onUpdate:pageSize":u[3]||(u[3]=r=>e(t).pageSize=r),query:e(t),class:"fix-pagination mt-4",onLimitChange:v,onPageChange:i},null,8,["page-index","page-size","query"])])]),_:1})}}}),Te=M(Le,[["__scopeId","data-v-d6e05cf6"]]),Ue={class:"mt-3 flex justify-end"},Se={class:"flex items-center justify-end space-x-3"},Ne=O({__name:"TabDoctors",props:{departmentId:{default:""}},setup($){const{setOpenPopup:_}=q(),b=$;F(()=>{v()});const h=m({}),d=m(!1),g=m(!1),I=m([]),t=m({...G}),p=()=>{_("popup-add-doctor-to-package",!1)},C=async o=>{try{g.value=!0;const l={departmentId:b.departmentId,doctorId:o},w=await P.addDoctorDepartment(l);N.success(w.message),_("popup-add-doctor-to-package",!1),v(),g.value=!1}catch(l){g.value=!1,console.log(l)}},v=async()=>{try{t.value.loading=!0;const o=b.departmentId,l=await P.getListDoctorOfDepartment(o,t.value);I.value=l.value.contentResponse,t.value.totalElements=l.value.totalElements,t.value.loading=!1}catch(o){t.value.loading=!1,console.log(o)}},i=o=>{t.value.pageSize=o,t.value.pageIndex=1,v()},n=o=>{t.value.pageIndex=o,v()},u=o=>{h.value=o,_("popup-confirm-delete")},V=async()=>{try{d.value=!0;const o={departmentId:b.departmentId,doctorId:h.value.id},l=await P.deleteDoctorDepartment({values:[o]});N.success(l.message),_("popup-confirm-delete",!1),d.value=!1,v()}catch(o){d.value=!1,console.log(o)}};return(o,l)=>{var r;const w=R,x=X,z=j,L=Y;return E(),T(S,null,[s("div",Ue,[a(w,{size:"small",class:"w-40",onClick:l[0]||(l[0]=y=>e(_)("popup-add-doctor-to-package"))},{default:c(()=>l[3]||(l[3]=[B("Thêm bác sĩ")])),_:1})]),a(L,{page:e(t).pageIndex,"onUpdate:page":l[1]||(l[1]=y=>e(t).pageIndex=y),limit:e(t).pageSize,"onUpdate:limit":l[2]||(l[2]=y=>e(t).pageSize=y),data:e(I),query:e(t),class:"mt-6",label:"bác sĩ",onPageChange:n,onLimitChange:i},{default:c(()=>[a(x,{type:"index",index:y=>("printIndex"in o?o.printIndex:e(W))(y,e(t)),label:"#",align:"center"},null,8,["index"]),a(x,{label:"NAME"},{default:c(({row:y})=>[s("p",null,A(y.info.name),1)]),_:1}),a(x,{label:"EMAIL"},{default:c(({row:y})=>[s("p",null,A(y.info.email),1)]),_:1}),a(x,{label:"PHONE NUMBER",width:"200"},{default:c(({row:y})=>[s("p",null,A(y.info.phoneNumber),1)]),_:1}),a(x,{label:"GENDER",width:"90"},{default:c(({row:y})=>[s("p",null,A(y.info.gender),1)]),_:1}),a(x,{label:"ACTION",width:"120",align:"right"},{default:c(({row:y})=>[s("div",Se,[a(z,{name:"delete",onClick:f=>u(y)},null,8,["onClick"])])]),_:1})]),_:1},8,["page","limit","data","query"]),a(Te,{"is-loading-add":e(g),onAdd:C,onCancel:p},null,8,["is-loading-add"]),a(ee,{name:(r=e(h).info)==null?void 0:r.email,type:"bác sĩ","is-loading-button":e(d),onDelete:V},null,8,["name","is-loading-button"])],64)}}}),Oe={class:"space-y-3"},Re={class:"space-y-2"},je={class:"space-y-2"},qe={class:"space-y-2"},Me={class:"flex items-center justify-end space-x-3"},Fe=O({__name:"PopupAddExminationPackage",props:{isLoading:{type:Boolean,default:!1}},emits:["cancel","add"],setup($,{emit:_}){const b=$,h=_,d=m({name:"",description:"",price:""}),g=()=>{h("add",{...d.value}),d.value={name:"",description:"",price:""}},I=()=>{d.value={name:"",description:"",price:""},h("cancel")};return(t,p)=>{const C=ae,v=R,i=Z;return E(),U(i,{name:"popup-add-exmination-package",width:"480"},{title:c(()=>p[3]||(p[3]=[B(" Thêm gói khám ")])),footer:c(()=>[s("div",Me,[a(v,{type:"plain",size:"small",class:"w-20",onClick:I},{default:c(()=>p[7]||(p[7]=[B("Hủy")])),_:1}),a(v,{loading:b.isLoading,size:"small",class:"w-20",onClick:g},{default:c(()=>p[8]||(p[8]=[B("Thêm")])),_:1},8,["loading"])])]),default:c(()=>[s("div",Oe,[s("div",Re,[p[4]||(p[4]=s("p",{class:"text-label"},"Tên gói khám",-1)),a(C,{modelValue:e(d).name,"onUpdate:modelValue":p[0]||(p[0]=n=>e(d).name=n),class:"input",style:{height:"50px",width:"100%"},placeholder:"Gói tầm soát ung thư tai - mũi - họng"},null,8,["modelValue"])]),s("div",je,[p[5]||(p[5]=s("p",{class:"text-label"},"Mô tả",-1)),a(C,{modelValue:e(d).description,"onUpdate:modelValue":p[1]||(p[1]=n=>e(d).description=n),class:"input",style:{height:"50px",width:"100%"},autosize:{minRows:2},type:"textarea",placeholder:"Vui lòng nhập mô tả"},null,8,["modelValue"])]),s("div",qe,[p[6]||(p[6]=s("p",{class:"text-label"},"Giá khám",-1)),a(C,{modelValue:e(d).price,"onUpdate:modelValue":p[2]||(p[2]=n=>e(d).price=n),style:{height:"50px",width:"100%"},class:"input",formatter:n=>`${n}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:n=>n.replace(/\$\s?|(,*)/g,"")},null,8,["modelValue","formatter","parser"])])])]),_:1})}}}),Ge=M(Fe,[["__scopeId","data-v-fa99b888"]]),He={class:"mt-3 flex justify-end"},Ke={class:"flex items-center space-x-3"},Je=O({__name:"TabSpecializes",props:{departmentId:{default:""}},setup($){const{setOpenPopup:_}=q();F(()=>{v()});const b=m({}),h=m([]),d=m(!1),g=m(!1),I=$,t=m({...G}),p=()=>{_("popup-add-exmination-package",!1)},C=async o=>{try{d.value=!0;const l=I.departmentId,w=await J.createPackage({...o,departmentId:l});N.success(w.message),_("popup-add-exmination-package",!1),d.value=!1}catch(l){d.value=!1,console.log(l)}},v=async()=>{try{t.value.loading=!0;const o=I.departmentId,l=await J.getListByDeparmentId(t.value,o);h.value=l.value.contentResponse,t.value.totalElements=l.value.totalElements,t.value.loading=!1}catch(o){t.value.loading=!1,console.log(o)}},i=o=>{t.value.pageSize=o,t.value.pageIndex=1,v()},n=o=>{t.value.pageIndex=o,v()},u=o=>{b.value=o,_("popup-confirm-delete")},V=async()=>{try{g.value=!0;const o=await J.detetePackage(b.value.id);N.success(o.message),_("popup-confirm-delete",!1),g.value=!1,v()}catch(o){g.value=!1,console.log(o)}};return(o,l)=>{const w=R,x=X,z=j,L=Y;return E(),T(S,null,[s("div",He,[a(w,{size:"small",class:"w-40",onClick:l[0]||(l[0]=r=>e(_)("popup-add-exmination-package"))},{default:c(()=>l[3]||(l[3]=[B("Thêm gói khám")])),_:1})]),a(L,{page:e(t).pageIndex,"onUpdate:page":l[1]||(l[1]=r=>e(t).pageIndex=r),limit:e(t).pageSize,"onUpdate:limit":l[2]||(l[2]=r=>e(t).pageSize=r),data:e(h),query:e(t),class:"mt-6",label:"gói khám",onPageChange:n,onLimitChange:i},{default:c(()=>[a(x,{type:"index",index:r=>("printIndex"in o?o.printIndex:e(W))(r,e(t)),label:"#",align:"center"},null,8,["index"]),a(x,{label:"NAME"},{default:c(({row:r})=>[s("p",null,A(r.name),1)]),_:1}),a(x,{label:"price"},{default:c(({row:r})=>[s("p",null,A(e(be)(r.price)),1)]),_:1}),a(x,{label:"ACTION"},{default:c(({row:r})=>[s("div",Ke,[a(z,{name:"delete",onClick:y=>u(r)},null,8,["onClick"])])]),_:1})]),_:1},8,["page","limit","data","query"]),a(Ge,{"is-loading":e(d),onAdd:C,onCancel:p},null,8,["is-loading"]),a(ee,{name:e(b).name,type:"gói khám","is-loading-button":e(g),onDelete:V},null,8,["name","is-loading-button"])],64)}}}),Qe={class:"flex items-start justify-between"},Ye={class:"flex items-center justify-end space-x-3"},We={class:"flex items-center justify-start"},Xe={class:"text-lg"},Ze={class:"pb-6 pt-4"},et=O({__name:"DepartmentView",setup($){const{setOpenPopup:_}=q(),b=m([{id:1,title:"Doctors",tabValue:"doctors"},{id:2,title:"Specialize",tabValue:"specialize"}]),h=m(""),d=m(""),g=m("doctors"),I=m([]),t=m({}),p=m(""),C=m(!1),v=m(!1),i=m({...G}),n=ge(()=>g.value==="doctors"?Ne:Je);F(()=>{u()});const u=async(f="")=>{try{i.value.loading=!0;const k=f==="search"?await P.getAllDepartmentByName(h.value,i.value):await P.getListDepartment(i.value);I.value=k.value.contentResponse,i.value.totalElements=k.value.totalElements,i.value.loading=!1}catch(k){i.value.loading=!1,console.log(k)}},V=()=>{d.value="ADD",_("popup-add-or-edit-department")},o=f=>{d.value="EDIT",v.value=!0,t.value=f,_("popup-add-or-edit-department")},l=f=>{v.value=!0,t.value=f,_("popup-confirm-delete")},w=async()=>{try{C.value=!0;const f=await P.deteteDepartment(t.value.id);N.success(f.message),_("popup-confirm-delete",!1),C.value=!1,u()}catch(f){C.value=!1,console.log(f)}},x=f=>{if(v.value){v.value=!1;return}t.value=f,p.value=f.id},z=f=>{i.value.pageSize=f,i.value.pageIndex=1,u()},L=f=>{i.value.pageIndex=f,u()},r=()=>{i.value={...i.value,pageIndex:1,pageSize:10,totalElements:0},u("search")},y=()=>{u()};return(f,k)=>{const ne=te,oe=R,H=X,K=j,le=Y,se=ue,ie=fe("PopupEditDepartment");return E(),T(S,null,[e(p)?(E(),T(S,{key:1},[s("div",We,[a(K,{name:"back",class:"mr-3 cursor-pointer",onClick:k[3]||(k[3]=D=>p.value="")}),s("p",Xe,A(e(t).name),1)]),s("div",Ze,[a(se,{modelValue:e(g),"onUpdate:modelValue":k[4]||(k[4]=D=>Q(g)?g.value=D:null),tabs:e(b)},null,8,["modelValue","tabs"]),(E(),U(_e(e(n)),{"department-id":e(p)},null,8,["department-id"]))])],64)):(E(),T(S,{key:0},[s("div",Qe,[a(ne,{modelValue:e(h),"onUpdate:modelValue":k[0]||(k[0]=D=>Q(h)?h.value=D:null),class:"input-search","show-icon":!0,onChange:r},null,8,["modelValue"]),a(oe,{size:"small",class:"w-20",onClick:V},{default:c(()=>k[5]||(k[5]=[B("Add")])),_:1})]),a(le,{page:e(i).pageIndex,"onUpdate:page":k[1]||(k[1]=D=>e(i).pageIndex=D),limit:e(i).pageSize,"onUpdate:limit":k[2]||(k[2]=D=>e(i).pageSize=D),data:e(I),query:e(i),class:"mt-6",label:"chuyên khoa",onPageChange:L,onLimitChange:z,onRowClick:x},{default:c(()=>[a(H,{type:"index",index:D=>("printIndex"in f?f.printIndex:e(W))(D,e(i)),label:"#",align:"center"},null,8,["index"]),a(H,{label:"NAME"},{default:c(({row:D})=>[s("p",null,A(D.name),1)]),_:1}),a(H,{label:"ACTION",align:"right"},{default:c(({row:D})=>[s("div",Ye,[a(K,{name:"edit",onClick:de=>o(D)},null,8,["onClick"]),a(K,{name:"delete",onClick:de=>l(D)},null,8,["onClick"])])]),_:1})]),_:1},8,["page","limit","data","query"])],64)),a(Ve,{data:e(t),"type-action":e(d),onAddOrEdit:y},null,8,["data","type-action"]),a(ee,{name:e(t).name,type:"chuyên khoa","is-loading-button":e(C),onDelete:w},null,8,["name","is-loading-button"]),a(ie,{data:e(t),"is-loading-button":e(C)},null,8,["data","is-loading-button"])],64)}}}),Dt=M(et,[["__scopeId","data-v-752b79d2"]]);export{Dt as default};

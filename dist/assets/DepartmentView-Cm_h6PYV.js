import{a as ie,_ as J,p as Q,E as Y}from"./el-table-column-Bvnzr309.js";import{_ as de}from"./BaseTab-BRxt91t6.js";import{_ as q}from"./BaseIcon.vue_vue_type_script_setup_true_lang-DpLAcS92.js";import{d as R,D as O,y as g,z as pe,o as D,m as T,p as c,I as E,t as B,a as i,s as n,f as e,N as L,G as S,_ as N,A as F,K as ue,c as P,q as ce,J as Z,F as U,O as K,e as re,L as me}from"./index-CNo_zFjp.js";import"./el-select-Ch-rvfKE.js";import{_ as j}from"./BaseButton-DJq_fSbO.js";import{_ as ee}from"./BaseInput-218HlAGK.js";import{D as M}from"./index-BIOmELBf.js";import{_ as W}from"./BasePopup-DJ8CSGWH.js";/* empty css                 */import{E as ge}from"./el-progress-OG-vS-u0.js";import{E as te}from"./index-RHba02_o.js";import{_ as X}from"./PopupConfirmDelete.vue_vue_type_script_setup_true_lang-C2yojevr.js";import{_ as fe}from"./BasePagination-BSk_DWv1.js";import{_ as _e,a as ve}from"./BaseLoading-h8Cb6KhQ.js";import{u as ye}from"./useFormatCurrency-DyMudwlN.js";import"./el-popper-CJRkH73w.js";import"./use-form-item-toOYdLTX.js";import"./el-scrollbar-BnzgfTEi.js";import"./isEqual-BxuHZUVP.js";import"./index-C3Orzl_Q.js";import"./index-Db9ch2lE.js";import"./castArray-r8YgZYcn.js";import"./index-UAJMjOZI.js";import"./scroll-rVOzPi0Y.js";import"./el-overlay-DuRYW6wr.js";import"./useFormatNumber-C6QqUNKY.js";const he={class:"space-y-3"},xe={class:"flex justify-center"},be={class:"relative w-40"},Ie=["src"],ke={class:"border-border-table rounded-full border border-solid bg-white p-2"},Ce={class:"space-y-2"},we={class:"space-y-2"},De={class:"flex items-center justify-end space-x-3"},Be=R({__name:"PopupAddOrEditDepartment",props:{data:{default:()=>({})},typeAction:{default:""}},emits:["add-or-edit"],setup($,{emit:_}){const{setOpenPopup:b}=O(),h=_,d=$,f=g({}),v=g(!1),t=g({name:"",description:"",urlImage:""});pe(()=>d.data,y=>{t.value={name:y.name,description:y.description,urlImage:y.urlImage}});const u=async y=>{f.value=y,t.value.urlImage=URL.createObjectURL(f.value.raw)},I=async()=>{try{v.value=!0;const y=d.data.id,a=new FormData;d.typeAction==="EDIT"&&a.append("id",y),f.value.raw&&a.append("image",f.value.raw),a.append("name",t.value.name),a.append("description",t.value.description);const m=d.typeAction==="ADD"?await L.createdDepartment(a):await L.editDepartment(a);S.success(m.message),b("popup-add-or-edit-department",!1),h("add-or-edit"),t.value={name:"",description:"",urlImage:""},v.value=!1}catch(y){v.value=!1,console.log(y)}},p=()=>{t.value={name:"",description:"",urlImage:""},b("popup-add-or-edit-department",!1)};return(y,a)=>{const m=q,A=ge,o=te,s=j,w=W;return D(),T(w,{name:"popup-add-or-edit-department",width:"700"},{title:c(()=>[E(B(d.typeAction==="ADD"?"Thêm chuyên khoa":"Sửa chuyên khoa"),1)]),footer:c(()=>[i("div",De,[n(s,{type:"plain",size:"small",class:"w-20",onClick:p},{default:c(()=>a[4]||(a[4]=[E("Hủy")])),_:1}),n(s,{loading:e(v),size:"small",class:"w-20",onClick:I},{default:c(()=>[E(B(d.typeAction==="ADD"?"Tạo":"Sửa"),1)]),_:1},8,["loading"])])]),default:c(()=>[i("div",he,[i("div",xe,[i("div",be,[i("img",{src:e(t).urlImage,alt:"",class:"h-40 w-full rounded-full object-cover"},null,8,Ie),n(A,{"show-file-list":!1,"auto-upload":!1,accept:".png, .jpg, .webp, .jpeg","on-change":u,class:"absolute bottom-4 right-1"},{default:c(()=>[i("div",ke,[n(m,{name:"edit-avatar"})])]),_:1})])]),i("div",Ce,[a[2]||(a[2]=i("p",{class:"text-label"},"Tên chuyên khoa",-1)),n(o,{modelValue:e(t).name,"onUpdate:modelValue":a[0]||(a[0]=x=>e(t).name=x),class:"input",style:{height:"50px",width:"100%"},placeholder:"Khoa Răng-Hàm-Mặt"},null,8,["modelValue"])]),i("div",we,[a[3]||(a[3]=i("p",{class:"text-label"},"Mô tả",-1)),n(o,{modelValue:e(t).description,"onUpdate:modelValue":a[1]||(a[1]=x=>e(t).description=x),class:"input",style:{height:"50px",width:"100%"},autosize:{minRows:2},type:"textarea",placeholder:"Vui lòng nhập mô tả"},null,8,["modelValue"])])])]),_:1})}}}),Ee=N(Be,[["__scopeId","data-v-31167eb6"]]),$e={class:"text-xl"},Ae={class:"flex items-center justify-end space-x-3"},Ve=R({__name:"PopupAddDoctortoPackage",props:{isLoadingAdd:{type:Boolean,default:!1}},emits:["cancel","add"],setup($,{emit:_}){const b=_,h=g([]),d=g(!1),f=g(""),v=$,t=g({...M,name:""});F(()=>{u()});const u=async()=>{try{d.value=!0;const a=await ue.getAllDoctor(t.value);h.value=a.value.contentResponse,t.value.totalElements=a.value.totalElements,d.value=!1}catch(a){d.value=!1,console.log(a)}},I=a=>{f.value=a.id},p=a=>{t.value.pageSize=a,t.value.pageIndex=1,u()},y=a=>{t.value.pageIndex=a,u()};return(a,m)=>{const A=ee,o=_e,s=ve,w=ie,x=fe,V=j,z=W;return D(),T(z,{name:"popup-add-doctor-to-package",width:"600"},{title:c(()=>m[6]||(m[6]=[E(" Thêm bác sĩ ")])),footer:c(()=>[i("div",Ae,[n(V,{type:"plain",size:"small",class:"w-20",onClick:m[4]||(m[4]=r=>b("cancel"))},{default:c(()=>m[7]||(m[7]=[E("Hủy")])),_:1}),n(V,{loading:v.isLoadingAdd,size:"small",class:"w-20",onClick:m[5]||(m[5]=r=>b("add",e(f)))},{default:c(()=>m[8]||(m[8]=[E("Thêm")])),_:1},8,["loading"])])]),default:c(()=>[i("div",null,[n(A,{modelValue:e(t).name,"onUpdate:modelValue":m[0]||(m[0]=r=>e(t).name=r),class:"input-search mb-3","show-icon":!0,onChange:u},null,8,["modelValue"]),e(d)?(D(),T(o,{key:0})):e(h).length===0?(D(),T(s,{key:1})):(D(!0),P(U,{key:2},ce(e(h),(r,l)=>(D(),P("div",{key:l},[n(w,{modelValue:e(f),"onUpdate:modelValue":m[1]||(m[1]=k=>Z(f)?f.value=k:null),class:"check-box","true-value":r.id,size:"large",onChange:k=>I(r)},{default:c(()=>[i("p",$e,B(r.info.name)+" - "+B(r.info.email),1)]),_:2},1032,["modelValue","true-value","onChange"])]))),128)),n(x,{"page-index":e(t).pageIndex,"onUpdate:pageIndex":m[2]||(m[2]=r=>e(t).pageIndex=r),"page-size":e(t).pageSize,"onUpdate:pageSize":m[3]||(m[3]=r=>e(t).pageSize=r),query:e(t),class:"fix-pagination mt-4",onLimitChange:p,onPageChange:y},null,8,["page-index","page-size","query"])])]),_:1})}}}),ze=N(Ve,[["__scopeId","data-v-d6e05cf6"]]),Le={class:"mt-3 flex justify-end"},Pe={class:"flex items-center justify-end space-x-3"},Te=R({__name:"TabDoctors",props:{departmentId:{default:""}},setup($){const{setOpenPopup:_}=O(),b=$;F(()=>{p()});const h=g({}),d=g(!1),f=g(!1),v=g([]),t=g({...M}),u=()=>{_("popup-add-doctor-to-package",!1)},I=async o=>{try{f.value=!0;const s={departmentId:b.departmentId,doctorId:o},w=await L.addDoctorDepartment(s);S.success(w.message),_("popup-add-doctor-to-package",!1),p(),f.value=!1}catch(s){f.value=!1,console.log(s)}},p=async()=>{try{t.value.loading=!0;const o=b.departmentId,s=await L.getListDoctorOfDepartment(o,t.value);v.value=s.value.contentResponse,t.value.totalElements=s.value.totalElements,t.value.loading=!1}catch(o){t.value.loading=!1,console.log(o)}},y=o=>{t.value.pageSize=o,t.value.pageIndex=1,p()},a=o=>{t.value.pageIndex=o,p()},m=o=>{h.value=o,_("popup-confirm-delete")},A=async()=>{try{d.value=!0;const o={departmentId:b.departmentId,doctorId:h.value.id},s=await L.deleteDoctorDepartment({values:[o]});S.success(s.message),_("popup-confirm-delete",!1),d.value=!1,p()}catch(o){d.value=!1,console.log(o)}};return(o,s)=>{var r;const w=j,x=Y,V=q,z=J;return D(),P(U,null,[i("div",Le,[n(w,{size:"small",class:"w-40",onClick:s[0]||(s[0]=l=>e(_)("popup-add-doctor-to-package"))},{default:c(()=>s[3]||(s[3]=[E("Thêm bác sĩ")])),_:1})]),n(z,{page:e(t).pageIndex,"onUpdate:page":s[1]||(s[1]=l=>e(t).pageIndex=l),limit:e(t).pageSize,"onUpdate:limit":s[2]||(s[2]=l=>e(t).pageSize=l),data:e(v),query:e(t),class:"mt-6",label:"bác sĩ",onPageChange:a,onLimitChange:y},{default:c(()=>[n(x,{type:"index",index:l=>("printIndex"in o?o.printIndex:e(Q))(l,e(t)),width:"75",label:"#",align:"center"},null,8,["index"]),n(x,{label:"tên"},{default:c(({row:l})=>[i("p",null,B(l.info.name),1)]),_:1}),n(x,{label:"EMAIL"},{default:c(({row:l})=>[i("p",null,B(l.info.email),1)]),_:1}),n(x,{label:"số điện thoại",width:"200"},{default:c(({row:l})=>[i("p",null,B(l.info.phoneNumber),1)]),_:1}),n(x,{label:"giới tính",width:"90"},{default:c(({row:l})=>[i("p",null,B(l.info.gender),1)]),_:1}),n(x,{label:"hành động",width:"120",align:"right"},{default:c(({row:l})=>[i("div",Pe,[n(V,{name:"delete",onClick:k=>m(l)},null,8,["onClick"])])]),_:1})]),_:1},8,["page","limit","data","query"]),n(ze,{"is-loading-add":e(f),onAdd:I,onCancel:u},null,8,["is-loading-add"]),n(X,{name:(r=e(h).info)==null?void 0:r.email,type:"bác sĩ","is-loading-button":e(d),onDelete:A},null,8,["name","is-loading-button"])],64)}}}),Ue={class:"space-y-3"},Se={class:"space-y-2"},Re={class:"space-y-2"},je={class:"space-y-2"},qe={class:"flex items-center justify-end space-x-3"},Oe=R({__name:"PopupAddExminationPackage",props:{isLoading:{type:Boolean,default:!1}},emits:["cancel","add"],setup($,{emit:_}){const b=$,h=_,d=g({name:"",description:"",price:""}),f=()=>{h("add",{...d.value}),d.value={name:"",description:"",price:""}},v=()=>{d.value={name:"",description:"",price:""},h("cancel")};return(t,u)=>{const I=te,p=j,y=W;return D(),T(y,{name:"popup-add-exmination-package",width:"480"},{title:c(()=>u[3]||(u[3]=[E(" Thêm gói khám ")])),footer:c(()=>[i("div",qe,[n(p,{type:"plain",size:"small",class:"w-20",onClick:v},{default:c(()=>u[7]||(u[7]=[E("Hủy")])),_:1}),n(p,{loading:b.isLoading,size:"small",class:"w-20",onClick:f},{default:c(()=>u[8]||(u[8]=[E("Thêm")])),_:1},8,["loading"])])]),default:c(()=>[i("div",Ue,[i("div",Se,[u[4]||(u[4]=i("p",{class:"text-label"},"Tên gói khám",-1)),n(I,{modelValue:e(d).name,"onUpdate:modelValue":u[0]||(u[0]=a=>e(d).name=a),class:"input",style:{height:"50px",width:"100%"},placeholder:"Gói tầm soát ung thư tai - mũi - họng"},null,8,["modelValue"])]),i("div",Re,[u[5]||(u[5]=i("p",{class:"text-label"},"Mô tả",-1)),n(I,{modelValue:e(d).description,"onUpdate:modelValue":u[1]||(u[1]=a=>e(d).description=a),class:"input",style:{height:"50px",width:"100%"},autosize:{minRows:2},type:"textarea",placeholder:"Vui lòng nhập mô tả"},null,8,["modelValue"])]),i("div",je,[u[6]||(u[6]=i("p",{class:"text-label"},"Giá khám",-1)),n(I,{modelValue:e(d).price,"onUpdate:modelValue":u[2]||(u[2]=a=>e(d).price=a),style:{height:"50px",width:"100%"},class:"input",formatter:a=>`${a}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:a=>a.replace(/\$\s?|(,*)/g,"")},null,8,["modelValue","formatter","parser"])])])]),_:1})}}}),Ne=N(Oe,[["__scopeId","data-v-fa99b888"]]),Fe={class:"mt-3 flex justify-end"},Me={class:"flex items-center space-x-3"},Ge=R({__name:"TabSpecializes",props:{departmentId:{default:""}},setup($){const{setOpenPopup:_}=O();F(()=>{p()});const b=g({}),h=g([]),d=g(!1),f=g(!1),v=$,t=g({...M}),u=()=>{_("popup-add-exmination-package",!1)},I=async o=>{try{d.value=!0;const s=v.departmentId,w=await K.createPackage({...o,departmentId:s});S.success(w.message),_("popup-add-exmination-package",!1),d.value=!1}catch(s){d.value=!1,console.log(s)}},p=async()=>{try{t.value.loading=!0;const o=v.departmentId,s=await K.getListByDeparmentId(t.value,o);h.value=s.value.contentResponse,t.value.totalElements=s.value.totalElements,t.value.loading=!1}catch(o){t.value.loading=!1,console.log(o)}},y=o=>{t.value.pageSize=o,t.value.pageIndex=1,p()},a=o=>{t.value.pageIndex=o,p()},m=o=>{b.value=o,_("popup-confirm-delete")},A=async()=>{try{f.value=!0;const o=await K.detetePackage(b.value.id);S.success(o.message),_("popup-confirm-delete",!1),f.value=!1,p()}catch(o){f.value=!1,console.log(o)}};return(o,s)=>{const w=j,x=Y,V=q,z=J;return D(),P(U,null,[i("div",Fe,[n(w,{size:"small",class:"w-40",onClick:s[0]||(s[0]=r=>e(_)("popup-add-exmination-package"))},{default:c(()=>s[3]||(s[3]=[E("Thêm gói khám")])),_:1})]),n(z,{page:e(t).pageIndex,"onUpdate:page":s[1]||(s[1]=r=>e(t).pageIndex=r),limit:e(t).pageSize,"onUpdate:limit":s[2]||(s[2]=r=>e(t).pageSize=r),data:e(h),query:e(t),class:"mt-6",label:"gói khám",onPageChange:a,onLimitChange:y},{default:c(()=>[n(x,{type:"index",index:r=>("printIndex"in o?o.printIndex:e(Q))(r,e(t)),width:"75",label:"#",align:"center"},null,8,["index"]),n(x,{label:"tên"},{default:c(({row:r})=>[i("p",null,B(r.name),1)]),_:1}),n(x,{label:"giá"},{default:c(({row:r})=>[i("p",null,B(e(ye)(r.price)),1)]),_:1}),n(x,{label:"hành động"},{default:c(({row:r})=>[i("div",Me,[n(V,{name:"delete",onClick:l=>m(r)},null,8,["onClick"])])]),_:1})]),_:1},8,["page","limit","data","query"]),n(Ne,{"is-loading":e(d),onAdd:I,onCancel:u},null,8,["is-loading"]),n(X,{name:e(b).name,type:"gói khám","is-loading-button":e(f),onDelete:A},null,8,["name","is-loading-button"])],64)}}}),He={class:"flex items-start justify-between"},Ke={class:"flex items-center justify-end space-x-3"},Je={class:"flex items-center justify-start"},Qe={class:"text-lg"},Ye={class:"pb-6 pt-4"},We=R({__name:"DepartmentView",setup($){const{setOpenPopup:_}=O(),b=g([{id:1,title:"Bác sĩ",tabValue:"doctors"},{id:2,title:"Gói khám",tabValue:"specialize"}]),h=g(""),d=g("doctors"),f=g([]),v=g({}),t=g(""),u=g(!1),I=g(!1),p=g({...M,name:""}),y=re(()=>d.value==="doctors"?Te:Ge);F(()=>{a()});const a=async()=>{try{p.value.loading=!0;const l=await L.getAllDepartmentByName(p.value);f.value=l.value.contentResponse,p.value.totalElements=l.value.totalElements,p.value.loading=!1}catch(l){p.value.loading=!1,console.log(l)}},m=()=>{h.value="ADD",_("popup-add-or-edit-department")},A=l=>{h.value="EDIT",I.value=!0,v.value=l,_("popup-add-or-edit-department")},o=l=>{I.value=!0,v.value=l,_("popup-confirm-delete")},s=async()=>{try{u.value=!0;const l=await L.deteteDepartment(v.value.id);S.success(l.message),_("popup-confirm-delete",!1),u.value=!1,a()}catch(l){u.value=!1,console.log(l)}},w=l=>{if(I.value){I.value=!1;return}v.value=l,t.value=l.id},x=l=>{p.value.pageSize=l,p.value.pageIndex=1,a()},V=l=>{p.value.pageIndex=l,a()},z=()=>{p.value={...p.value,pageIndex:1,pageSize:10,totalElements:0},a()},r=()=>{a()};return(l,k)=>{const ae=ee,ne=j,G=Y,H=q,oe=J,le=de;return D(),P(U,null,[e(t)?(D(),P(U,{key:1},[i("div",Je,[n(H,{name:"back",class:"mr-3 cursor-pointer",onClick:k[3]||(k[3]=C=>t.value="")}),i("p",Qe,B(e(v).name),1)]),i("div",Ye,[n(le,{modelValue:e(d),"onUpdate:modelValue":k[4]||(k[4]=C=>Z(d)?d.value=C:null),tabs:e(b)},null,8,["modelValue","tabs"]),(D(),T(me(e(y)),{"department-id":e(t)},null,8,["department-id"]))])],64)):(D(),P(U,{key:0},[i("div",He,[n(ae,{modelValue:e(p).name,"onUpdate:modelValue":k[0]||(k[0]=C=>e(p).name=C),class:"input-search","show-icon":!0,onChange:z},null,8,["modelValue"]),n(ne,{size:"small",class:"w-48",onClick:m},{default:c(()=>k[5]||(k[5]=[E("Thêm chuyên khoa")])),_:1})]),n(oe,{page:e(p).pageIndex,"onUpdate:page":k[1]||(k[1]=C=>e(p).pageIndex=C),limit:e(p).pageSize,"onUpdate:limit":k[2]||(k[2]=C=>e(p).pageSize=C),data:e(f),query:e(p),class:"mt-6",label:"chuyên khoa",onPageChange:V,onLimitChange:x,onRowClick:w},{default:c(()=>[n(G,{type:"index",index:C=>("printIndex"in l?l.printIndex:e(Q))(C,e(p)),width:"75",label:"#",align:"center"},null,8,["index"]),n(G,{label:"tên"},{default:c(({row:C})=>[i("p",null,B(C.name),1)]),_:1}),n(G,{label:"hành động",align:"right"},{default:c(({row:C})=>[i("div",Ke,[n(H,{name:"edit",onClick:se=>A(C)},null,8,["onClick"]),n(H,{name:"delete",onClick:se=>o(C)},null,8,["onClick"])])]),_:1})]),_:1},8,["page","limit","data","query"])],64)),n(Ee,{data:e(v),"type-action":e(h),onAddOrEdit:r},null,8,["data","type-action"]),n(X,{name:e(v).name,type:"chuyên khoa","is-loading-button":e(u),onDelete:s},null,8,["name","is-loading-button"])],64)}}}),wt=N(We,[["__scopeId","data-v-f5431c63"]]);export{wt as default};

import{_ as U}from"./BaseButton-Bh5FnFsE.js";import{d as k,j as B,l as E,y as s,A,o as M,c as S,a,s as u,f as n,G as i,t as j,p as z,J as _,n as D,an as P,H as R,_ as F}from"./index-Bq7zDe5Q.js";/* empty css                 */import{E as G}from"./index-CFz3_8vX.js";import"./BaseIcon.vue_vue_type_script_setup_true_lang-BWjTXJDl.js";import"./use-form-item-NWb1DZ3V.js";import"./index-Fhv5ETY5.js";const H={class:"layout"},J={class:"content"},W={class:"flex items-center justify-center space-x-2"},X={class:"mb-3 mt-8 text-center text-4xl font-bold text-primary"},q={class:"text-center"},C=60,K=k({__name:"PinCodeView",setup(L){const I=B(),{user:V}=E(),p=s(C),r=s(""),m=s(""),d=s(""),c=s(""),f=s(""),x=s(""),v=s(!1),h=s("");A(()=>{b(),h.value=sessionStorage.getItem("email")});const b=()=>{p.value=C;const l=setInterval(()=>{p.value>0?p.value--:clearInterval(l)},1e3)},O=(l,e,o,g,t,w)=>{if(/[^0-9]/.test(l+e+o+g+t+w))return"Invalid input: All numbers must be single digits.";const y=parseInt(l+e+o+g+t+w);if(y<1e5||y>999999){R.error("Invalid OTP");return}return y},T=async()=>{try{console.log("object"),v.value=!0;const l=O(r.value,m.value,d.value,c.value,f.value,x.value);await P.pinCode({code:l,email:h.value}),I.push({name:"SetNewPassword"}),v.value=!1}catch(l){v.value=!1,console.log(l)}},N=async()=>{try{await P.forgotPass({email:V.patient?V.patient.info.email:V.doctor.info.email}),b()}catch(l){console.log(l)}};return(l,e)=>{const o=G,g=U;return M(),S("div",H,[a("div",J,[a("div",null,[e[8]||(e[8]=a("p",{class:"text-label mb-3"},"Nhập OTP",-1)),e[9]||(e[9]=a("p",{class:"mb-8 text-center"}," Mã xác thực OTP vừa được gửi đến email của bạn. Vui lòng nhập mã OTP để đặt lại mật khẩu! ",-1)),a("div",W,[u(o,{modelValue:n(r),"onUpdate:modelValue":e[0]||(e[0]=t=>i(r)?r.value=t:null),class:"input-otp",autocomplete:"off",style:{width:"56px",height:"56px"},type:"text"},null,8,["modelValue"]),u(o,{modelValue:n(m),"onUpdate:modelValue":e[1]||(e[1]=t=>i(m)?m.value=t:null),class:"input-otp",autocomplete:"off",style:{width:"56px",height:"56px"},type:"text"},null,8,["modelValue"]),u(o,{modelValue:n(d),"onUpdate:modelValue":e[2]||(e[2]=t=>i(d)?d.value=t:null),class:"input-otp",autocomplete:"off",style:{width:"56px",height:"56px"},type:"text"},null,8,["modelValue"]),u(o,{modelValue:n(c),"onUpdate:modelValue":e[3]||(e[3]=t=>i(c)?c.value=t:null),class:"input-otp",autocomplete:"off",style:{width:"56px",height:"56px"},type:"text"},null,8,["modelValue"]),u(o,{modelValue:n(f),"onUpdate:modelValue":e[4]||(e[4]=t=>i(f)?f.value=t:null),class:"input-otp",autocomplete:"off",style:{width:"56px",height:"56px"},type:"text"},null,8,["modelValue"]),u(o,{modelValue:n(x),"onUpdate:modelValue":e[5]||(e[5]=t=>i(x)?x.value=t:null),class:"input-otp",autocomplete:"off",style:{width:"56px",height:"56px"},type:"text"},null,8,["modelValue"])]),a("p",X,j(n(p))+"s",1),u(g,{loading:n(v),size:"large",class:"mx-auto mb-8 w-52",onClick:T},{default:z(()=>e[6]||(e[6]=[_("Xác nhận")])),_:1},8,["loading"]),a("p",q,[e[7]||(e[7]=_(" Ban không nhận được OTP, ")),a("span",{class:D(["cursor-pointer text-primary",{disable:n(p)}]),onClick:N}," gửi lại OTP?",2)])])])])}}}),oe=F(K,[["__scopeId","data-v-1efd20b9"]]);export{oe as default};

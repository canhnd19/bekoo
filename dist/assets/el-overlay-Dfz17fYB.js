import{bV as j,bC as Z,au as q,J,b as _,e as M,bF as Y,a_ as L,z as x,aX as Q,bO as P,c1 as F,bQ as ee,az as O,T as D,a5 as b,d as oe,s as ne,r as N,bc as te,ac as le,ag as se,c2 as ae,y as E,b9 as ue,c3 as ie,V as de,M as re,A as ce,af as fe,c4 as w}from"./index-NYq5Ntnu.js";import{U as R,u as k}from"./use-form-item-CIwSK4jn.js";import{t as ye}from"./BaseIcon.vue_vue_type_script_setup_true_lang-BP6YW6Xw.js";import{g as me,i as ve}from"./el-popper-D2uLC8Y4.js";function Ie(e,o,n){var a=e==null?0:e.length;if(!a)return-1;var t=0;return j(e,Z(o),t)}const Be=(...e)=>o=>{e.forEach(n=>{q(n)?n(o):n.value=o})};var C=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(C||{});const Ee=(e,o={})=>{J(e)||ye("[useLockscreen]","You need to pass a ref param to this function");const n=o.ns||_("popup"),a=M(()=>n.bm("parent","hidden"));if(!Y||L(document.body,a.value))return;let t=0,u=!1,l="0";const r=()=>{setTimeout(()=>{ee(document==null?void 0:document.body,a.value),u&&document&&(document.body.style.width=l)},200)};x(e,c=>{if(!c){r();return}u=!L(document.body,a.value),u&&(l=document.body.style.width),t=me(n.namespace.value);const i=document.documentElement.clientHeight<document.body.scrollHeight,f=Q(document.body,"overflowY");t>0&&(i||f==="scroll")&&u&&(document.body.style.width=`calc(100% - ${t}px)`),P(document.body,a.value)}),F(()=>r())},Ce=e=>{if(!e)return{onClick:O,onMousedown:O,onMouseup:O};let o=!1,n=!1;return{onClick:l=>{o&&n&&e(l),o=n=!1},onMousedown:l=>{o=l.target===l.currentTarget},onMouseup:l=>{n=l.target===l.currentTarget}}},be=D({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:b([String,Array,Object])},zIndex:{type:b([String,Number])}}),Te={click:e=>e instanceof MouseEvent},pe="overlay";var Se=oe({name:"ElOverlay",props:be,emits:Te,setup(e,{slots:o,emit:n}){const a=_(pe),t=c=>{n("click",c)},{onClick:u,onMousedown:l,onMouseup:r}=Ce(e.customMaskEvent?void 0:t);return()=>e.mask?ne("div",{class:[a.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:u,onMousedown:l,onMouseup:r},[N(o,"default")],C.STYLE|C.CLASS|C.PROPS,["onClick","onMouseup","onMousedown"]):te("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[N(o,"default")])}});const Le=Se,Ae=D({center:Boolean,alignCenter:Boolean,closeIcon:{type:le},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),Ne={close:()=>!0},we=D({...Ae,appendToBody:Boolean,appendTo:{type:b([String,Object]),default:"body"},beforeClose:{type:b(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"}}),ke={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[R]:e=>se(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},_e=(e,o)=>{var n;const t=fe().emit,{nextZIndex:u}=ae();let l="";const r=k(),c=k(),i=E(!1),f=E(!1),v=E(!1),T=E((n=e.zIndex)!=null?n:u());let y,m;const z=ue("namespace",ie),H=M(()=>{const s={},d=`--${z.value}-dialog`;return e.fullscreen||(e.top&&(s[`${d}-margin-top`]=e.top),e.width&&(s[`${d}-width`]=de(e.width))),s}),V=M(()=>e.alignCenter?{display:"flex"}:{});function g(){t("opened")}function U(){t("closed"),t(R,!1),e.destroyOnClose&&(v.value=!1)}function G(){t("close")}function I(){m==null||m(),y==null||y(),e.openDelay&&e.openDelay>0?{stop:y}=w(()=>B(),e.openDelay):B()}function p(){y==null||y(),m==null||m(),e.closeDelay&&e.closeDelay>0?{stop:m}=w(()=>A(),e.closeDelay):A()}function S(){function s(d){d||(f.value=!0,i.value=!1)}e.beforeClose?e.beforeClose(s):p()}function K(){e.closeOnClickModal&&S()}function B(){Y&&(i.value=!0)}function A(){i.value=!1}function $(){t("openAutoFocus")}function W(){t("closeAutoFocus")}function X(s){var d;((d=s.detail)==null?void 0:d.focusReason)==="pointer"&&s.preventDefault()}e.lockScroll&&Ee(i);function h(){e.closeOnPressEscape&&S()}return x(()=>e.modelValue,s=>{s?(f.value=!1,I(),v.value=!0,T.value=ve(e.zIndex)?u():T.value++,re(()=>{t("open"),o.value&&(o.value.scrollTop=0)})):i.value&&p()}),x(()=>e.fullscreen,s=>{o.value&&(s?(l=o.value.style.transform,o.value.style.transform=""):o.value.style.transform=l)}),ce(()=>{e.modelValue&&(i.value=!0,v.value=!0,I())}),{afterEnter:g,afterLeave:U,beforeLeave:G,handleClose:S,onModalClick:K,close:p,doClose:A,onOpenAutoFocus:$,onCloseAutoFocus:W,onCloseRequested:h,onFocusoutPrevented:X,titleId:r,bodyId:c,closed:f,style:H,overlayDialogStyle:V,rendered:v,visible:i,zIndex:T}};export{Le as E,ke as a,Ae as b,Be as c,we as d,Ne as e,Ie as f,Ce as g,_e as u};

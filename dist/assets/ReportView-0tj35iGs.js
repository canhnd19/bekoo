import{d as C,o as d,m as h,p as y,f as o,c as B,q as A,a as r,t as D,s as v,h as L,F,y as z,z as a,e as E,A as b,B as N}from"./index-BUq9SMfA.js";import{u as S}from"./useConvertUTCTime-I4Z56cTM.js";import{B as P}from"./BaseChart-BWqiRvF6.js";import{_ as Y}from"./BaseIcon.vue_vue_type_script_setup_true_lang-CQCAIW9N.js";import{_ as V}from"./BaseLoading-DPPSPdV0.js";import{S as q,P as O,N as $,a as j}from"./swiper-vue-CRodyKTw.js";import{u as U}from"./index-Cu4LIm7d.js";import"./BaseSelect-1-4JO_UU.js";import"./el-select-qQqjo0YN.js";import"./el-popper-DhRZ_xT_.js";import"./use-form-item-B6OeAMkc.js";import"./el-scrollbar-Dsc5NBip.js";import"./castArray-w_Ugw7DG.js";import"./index-B-jZyCjC.js";import"./index-CIP85yaK.js";const G={class:"rounded-lg border border-solid border-[#DBDBDB] px-4 py-6"},H={class:"mb-2 flex items-center justify-between"},I={class:"text-[#5B616E]"},J={class:"text-2xl font-semibold text-[var(--dr-text-input-label-mobile)]"},K=C({__name:"BaseSummary",props:{dataSummary:{default:()=>[]},isLoading:{type:Boolean,default:!1}},setup(_){const i=[O,$],s=_;return(u,n)=>{const c=V,m=Y;return d(),h(o(q),{ref:"{swiperRef}","slides-per-view":4,"space-between":30,pagination:{type:"fraction"},navigation:!0,modules:i,class:"my-swiper"},{default:y(()=>[s.isLoading?(d(),h(c,{key:0})):(d(!0),B(F,{key:1},A(s.dataSummary,(l,p)=>(d(),h(o(j),{key:p},{default:y(()=>[r("div",G,[r("div",H,[r("span",I,D(l.title),1),v(m,{name:l.icon,size:"24",style:L({color:l.color})},null,8,["name","style"])]),r("span",J,[r("span",null,D(l.value),1)])])]),_:2},1024))),128))]),_:1},512)}}}),me=C({__name:"ReportView",setup(_){z(()=>{f(),x()});const i=a("7_DAYS"),s=a(!1),u=a(!1),n=a({totalDepartment:0,totalDoctor:0,totalPatient:0,totalSchedule:0,totalSpecialize:0}),c=a([]),m=a([]),l=a([{name:"Số bệnh nhân",color:"#0A94FF"}]),p=a({groupType:1,fromDate:"",toDate:""}),w=E(()=>[{title:"Tổng số bác sĩ",icon:"menu-user",color:"#0151FC",value:n.value.totalDoctor},{title:"Tổng số bệnh nhân",icon:"menu-user",color:"#0151FC",value:n.value.totalPatient},{title:"Tổng số chuyên khoa",icon:"menu-user",color:"#0151FC",value:n.value.totalDepartment},{title:"Tổng số gói khám",icon:"menu-user",color:"#0151FC",value:n.value.totalSpecialize},{title:"Tổng số lượt đặt khám",icon:"menu-user",color:"#0151FC",value:n.value.totalSchedule}]),x=async()=>{try{s.value=!0;const e=await b.getDataReport();n.value={...e.value},s.value=!1}catch(e){s.value=!1,console.log(e)}},k=e=>{i.value=e,f()},T=()=>{const e=new Date,t=S(new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0),"TO"),g=i.value.split("_")[0],M=S(new Date(e.getFullYear(),e.getMonth(),e.getDate()-Number(g),0,0,0,0),"FROM");p.value.fromDate=M,p.value.toDate=t},f=async()=>{try{u.value=!0,T();const e={...p.value,groupType:i.value==="360_DAYS"?3:1},t=await b.getDataChartReport(e);R(t),u.value=!1}catch(e){u.value=!1,console.log(e)}},R=e=>{c.value=[],m.value=[];const t=[];N(e.value,g=>{c.value.push(U(g.time,"MMM DD").value),t.push(g.value)}),m.value.push({label:"Số lượng bệnh nhân",data:t,tension:0,borderColor:"#027BFE"})};return(e,t)=>(d(),B(F,null,[v(K,{"data-summary":o(w),"is-loading":o(s)},null,8,["data-summary","is-loading"]),t[0]||(t[0]=r("p",{class:"mt-4 text-2xl font-semibold"},"Biểu đồ thống kê bệnh nhân đặt lịch khám",-1)),v(P,{label:o(c),"legend-chart":o(l),datasets:o(m),"is-loading":o(u),onFilter:k},null,8,["label","legend-chart","datasets","is-loading"])],64))}});export{me as default};

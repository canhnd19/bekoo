import{_ as R,p as U,E as Y}from"./el-table-column-BMSeSgH-.js";import{d as E,o as h,m as w,p as l,I as y,a as n,s as a,D as N,k as $,A as q,y as d,V as x,c as C,f as s,J as A,F as I,U as M,G as O,q as j,t as u,_ as G}from"./index-DXwo3dST.js";import{E as Q}from"./el-select-aHCqhlV_.js";import{_ as J}from"./BaseSelect-CZxK0NZM.js";import{_ as K}from"./BaseIcon.vue_vue_type_script_setup_true_lang-Dk_E2eQT.js";import{D as W}from"./index-BIOmELBf.js";import{u as X}from"./useDateFormat-DksDR272.js";import{u as Z}from"./useFormatCurrency-DyMudwlN.js";import{_ as ee}from"./BasePopup-Dq0b8I17.js";import{_ as te}from"./BaseButton-Cw6rixwv.js";import"./BasePagination-4Rl-XyIw.js";import"./el-scrollbar-D6YThVvf.js";import"./el-popper-BpZrbxzR.js";import"./use-form-item-NlqCf7-L.js";import"./useFormatNumber-C6QqUNKY.js";import"./isEqual-DfVZGxMO.js";import"./index-CNFpyTCL.js";import"./index-DAPEPXKC.js";import"./index-Bhemz4dc.js";import"./BaseLoading-BiyvMrNS.js";import"./index-B22TPO_9.js";import"./castArray-BU67Fdgb.js";import"./scroll-DC2EjwmH.js";import"./index-DQU64Shp.js";import"./el-overlay-Cjec4osu.js";const ne={class:"flex items-center justify-end space-x-3"},oe=E({__name:"PopupConfirmDeleteBooking",props:{isLoadingButton:{type:Boolean,default:!1}},emits:["cancel","yes"],setup(b,{emit:_}){const v=b,g=_;return(m,t)=>{const r=te,f=ee;return h(),w(f,{name:"popup-confirm-delete-booking",width:"480"},{title:l(()=>t[1]||(t[1]=[y(" Hủy lịch đặt khám ")])),footer:l(()=>[n("div",ne,[a(r,{type:"plain",size:"small",class:"w-20"},{default:l(()=>t[2]||(t[2]=[y("Hủy")])),_:1}),a(r,{loading:v.isLoadingButton,size:"small",class:"w-20",onClick:t[0]||(t[0]=c=>g("yes"))},{default:l(()=>t[3]||(t[3]=[y("Có")])),_:1},8,["loading"])])]),default:l(()=>[t[4]||(t[4]=n("div",null,[n("p",{class:"text-base"},"Bạn có chắc chắn muốn hủy lịch khám không?")],-1))]),_:1})}}}),ae=[{label:"Tất cả",value:0},{label:"Đã xác nhận",value:1},{label:"Đã hủy",value:2},{label:"Đã tới khám",value:3},{label:"Quá hạn chưa tới khám",value:4}],le={class:"container"},se={class:"flex items-center justify-start space-x-2 py-6"},ie={class:"bg-[#e8f2f7]"},pe={class:"container py-6"},re={class:"mr-3 flex items-center justify-end"},ue=E({__name:"BookingHistoryView",setup(b){const{setOpenPopup:_}=N(),v=$();q(()=>{c()});const g=d([]),m=d(0),t=d({...W}),r=d(!1),f=d({}),c=async()=>{try{t.value.loading=!0;const o=v.params.id,i=await x.getDataBookingHistory(o,m.value,t.value);g.value=i.value.contentResponse,t.value.totalElements=i.value.totalElements,t.value.loading=!1}catch(o){t.value.loading=!1,console.log(o)}},D=o=>{t.value.pageSize=o,t.value.pageIndex=1,c()},H=o=>{t.value.pageIndex=o,c()},L=o=>{m.value=o,c()},T=()=>{M.push({name:"Home"})},V=o=>{f.value=o,_("popup-confirm-delete-booking")},z=async()=>{try{r.value=!0,await x.deleteBooking(f.value.id),O.success("Hủy đặt khám thành công"),_("popup-confirm-delete-booking",!1),r.value=!1,c()}catch(o){console.log(o),r.value=!1}};return(o,i)=>{const k=K,F=Q,S=J,p=Y,P=R;return h(),C(I,null,[n("div",le,[n("p",se,[n("span",{class:"cursor-pointer text-base font-semibold",onClick:T},"Trang chủ"),a(k,{name:"arrow-right"}),i[3]||(i[3]=n("span",{class:"cursor-pointer font-semibold text-primary"},"Lịch sử khám bệnh",-1))])]),n("div",ie,[n("div",pe,[a(S,{modelValue:s(m),"onUpdate:modelValue":i[0]||(i[0]=e=>A(m)?m.value=e:null),placeholder:"Chọn",class:"select",onChange:L},{default:l(()=>[(h(!0),C(I,null,j(s(ae),(e,B)=>(h(),w(F,{key:B,value:e.value,label:e.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"]),a(P,{page:s(t).pageIndex,"onUpdate:page":i[1]||(i[1]=e=>s(t).pageIndex=e),limit:s(t).pageSize,"onUpdate:limit":i[2]||(i[2]=e=>s(t).pageSize=e),data:s(g),query:s(t),class:"mt-6",onPageChange:H,onLimitChange:D},{default:l(()=>[a(p,{type:"index",index:e=>("printIndex"in o?o.printIndex:s(U))(e,s(t)),width:"75",label:"#",align:"center"},null,8,["index"]),a(p,{label:"thời gian",width:"180"},{default:l(({row:e})=>[n("p",null,u(s(X)(e.checkIn,"DD/MM/YYYY HH:mm:ss")),1)]),_:1}),a(p,{label:"bác sĩ"},{default:l(({row:e})=>[n("p",null,u(e.doctor.info.name),1)]),_:1}),a(p,{label:"chuyên khoa"},{default:l(({row:e})=>[n("p",null,u(e.specialize.department.name),1)]),_:1}),a(p,{label:"gói khám"},{default:l(({row:e})=>[n("p",null,u(e.specialize.name),1)]),_:1}),a(p,{label:"giá"},{default:l(({row:e})=>[n("p",null,u(s(Z)(e.specialize.price)),1)]),_:1}),a(p,{label:"trạng thái"},{default:l(({row:e})=>[n("p",null,u(e.status),1)]),_:1}),a(p,{label:"thanh toán"},{default:l(({row:e})=>[n("p",null,u(e.paymentStatus),1)]),_:1}),a(p,{label:"hành động",align:"right"},{default:l(({row:e})=>[n("div",re,[a(k,{name:"delete",onClick:B=>V(e)},null,8,["onClick"])])]),_:1})]),_:1},8,["page","limit","data","query"])])]),a(oe,{"is-loading-button":s(r),onYes:z},null,8,["is-loading-button"])],64)}}}),Pe=G(ue,[["__scopeId","data-v-1dd8cf41"]]);export{Pe as default};

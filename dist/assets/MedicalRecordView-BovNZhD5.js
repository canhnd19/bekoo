import{_ as U,a as Y}from"./BaseLoading-DLJGjrVc.js";import{_ as H}from"./BaseIcon.vue_vue_type_script_setup_true_lang-LCufWN4S.js";import{d as $,k as N,x as m,o as r,m as w,p as _,O as k,a as e,s as a,f as o,_ as O,J as L,B as T,al as M,c as x,F as C,q as A,U as z,M as R,t as y,P as F}from"./index-D_BuvB-D.js";import{u as j}from"./useConvertUTCTime-I4Z56cTM.js";import{_ as G}from"./BasePopup-DyrSdFMk.js";import{_ as S}from"./BaseButton-Di-A2jUA.js";import{E as q}from"./el-date-picker-CGCQRjoi.js";/* empty css                 */import"./el-scrollbar-B1CA6wtK.js";import"./el-popper-BujlmXIY.js";import"./el-button-CuleVn6v.js";import{E as J}from"./index-8MVXDdlr.js";import"./refs-DrDK6LVz.js";import"./index-CF7afJg5.js";import"./use-form-item-B2wKpYSg.js";import"./index-CaEhwcam.js";import"./index-Bi6AMCOf.js";import"./localeData-DfkcK22U.js";const X={class:"space-y-3"},K={class:"style-flex"},Q={class:"space-y-2"},W={class:"space-y-2"},Z={class:"style-flex"},ee={class:"space-y-2"},se={class:"space-y-2"},te={class:"style-flex"},oe={class:"space-y-2"},ne={class:"space-y-2"},ae={class:"flex items-center justify-end space-x-3"},le=$({__name:"PopupAddMedicalRecord",props:{isLoadingButton:{type:Boolean,default:!1}},emits:["cancel","add"],setup(B,{emit:b}){const p=N(),u=B,c=b,n=m({patientId:p.params.id,name:"",dateOfVisit:"",diagnosis:"",treatment:"",doctorNotes:"",prescribedMedication:""}),f=()=>{c("add",{...n.value}),n.value={patientId:p.params.id,name:"",dateOfVisit:"",diagnosis:"",treatment:"",doctorNotes:"",prescribedMedication:""}};return(V,t)=>{const d=J,h=q,v=S,l=G;return r(),w(l,{name:"popup-add-medical-record",width:"980"},{title:_(()=>t[6]||(t[6]=[k(" Thêm hồ sơ bệnh án ")])),footer:_(()=>[e("div",ae,[a(v,{type:"plain",size:"small",class:"w-20"},{default:_(()=>t[13]||(t[13]=[k("Hủy")])),_:1}),a(v,{loading:u.isLoadingButton,size:"small",class:"w-20",onClick:f},{default:_(()=>t[14]||(t[14]=[k("Thêm")])),_:1},8,["loading"])])]),default:_(()=>[e("div",X,[e("div",K,[e("div",Q,[t[7]||(t[7]=e("p",{class:"text-label"},"Họ và tên",-1)),a(d,{modelValue:o(n).name,"onUpdate:modelValue":t[0]||(t[0]=s=>o(n).name=s),class:"input",style:{height:"50px",width:"400px"}},null,8,["modelValue"])]),e("div",W,[t[8]||(t[8]=e("span",{class:"text-label"}," Ngày khám ",-1)),a(h,{modelValue:o(n).dateOfVisit,"onUpdate:modelValue":t[1]||(t[1]=s=>o(n).dateOfVisit=s),type:"date",placeholder:"DD/MM/YYYY",class:"date-picker",format:"DD/MM/YYYY"},null,8,["modelValue"])])]),e("div",Z,[e("div",ee,[t[9]||(t[9]=e("p",{class:"text-label"},"Chuẩn đoán",-1)),a(d,{modelValue:o(n).diagnosis,"onUpdate:modelValue":t[2]||(t[2]=s=>o(n).diagnosis=s),class:"input",style:{height:"50px",width:"400px"}},null,8,["modelValue"])]),e("div",se,[t[10]||(t[10]=e("p",{class:"text-label"},"Điều trị",-1)),a(d,{modelValue:o(n).treatment,"onUpdate:modelValue":t[3]||(t[3]=s=>o(n).treatment=s),class:"input",style:{height:"50px",width:"400px"}},null,8,["modelValue"])])]),e("div",te,[e("div",oe,[t[11]||(t[11]=e("p",{class:"text-label"},"Ghi chú của bác sĩ",-1)),a(d,{modelValue:o(n).doctorNotes,"onUpdate:modelValue":t[4]||(t[4]=s=>o(n).doctorNotes=s),class:"input",style:{height:"50px",width:"400px"},autosize:{minRows:2},type:"textarea"},null,8,["modelValue"])]),e("div",ne,[t[12]||(t[12]=e("p",{class:"text-label"},"Đơn thuốc",-1)),a(d,{modelValue:o(n).prescribedMedication,"onUpdate:modelValue":t[5]||(t[5]=s=>o(n).prescribedMedication=s),class:"input",style:{height:"50px",width:"400px"},autosize:{minRows:2},type:"textarea"},null,8,["modelValue"])])])])]),_:1})}}}),ie=O(le,[["__scopeId","data-v-a8678297"]]),de={class:"bg-[#e8f2f7]"},re={class:"container pb-10 pt-2"},pe={class:"mb-10"},ue={class:"my-5 flex items-center justify-start space-x-2"},ce=["onClick"],me=["onClick"],fe={class:"add"},ge={class:"rounded-full bg-white p-1"},_e=$({__name:"MedicalRecordView",setup(B){const b=N(),{setOpenPopup:p}=L();T(()=>{t()});const u=m(!1),c=m(!1),n=m(!1),f=m([]),V=m(""),t=async()=>{try{u.value=!0;const l=b.params.id,s=await M.getMedicalRecord(l);f.value=s.value.contentResponse,u.value=!1}catch(l){u.value=!1,console.log(l)}},d=()=>{z.push({name:"Home"})},h=async l=>{try{c.value=!0;const s={...l,dateOfVisit:j(l.dateOfVisit,"FROM")},g=await M.addMedicalRecord(s);R.success(g.message),p("popup-add-medical-record",!1),c.value=!1,t()}catch(s){c.value=!1,console.log(s)}},v=async l=>{try{n.value=!0;const s=await M.deleteMedicalRecord(l.id);R.success(s.message),n.value=!1,t()}catch(s){console.log(s),n.value=!1}};return(l,s)=>{const g=H,D=U,E=Y;return r(),x(C,null,[e("div",de,[e("div",re,[e("div",pe,[e("p",ue,[e("span",{class:"cursor-pointer text-base font-semibold",onClick:d},"Trang chủ"),a(g,{name:"arrow-right"}),s[2]||(s[2]=e("span",{class:"cursor-pointer font-semibold text-primary"},"Hồ sơ bệnh án",-1))])]),s[9]||(s[9]=e("p",{class:"text-center text-4xl font-semibold text-primary"},"Hồ sơ bệnh nhân",-1)),o(u)?(r(),w(D,{key:0})):o(f).length?(r(!0),x(C,{key:2},A(o(f),(i,I)=>(r(),x("div",{key:I,class:"mx-auto my-4 w-[600px]"},[e("div",{class:"cursor-pointer space-y-2 rounded-lg border border-solid bg-white p-6 hover:border-[#00b5f1]",onClick:P=>V.value=i.id},[e("p",null,[s[3]||(s[3]=e("span",null,"Họ và tên: ",-1)),e("strong",null,y(i.name),1)]),e("p",null,[s[4]||(s[4]=e("span",null,"Ngày khám: ",-1)),e("strong",null,y(i.dateOfVisit),1)]),e("p",null,[s[5]||(s[5]=e("span",null,"Chuẩn đoán: ",-1)),e("strong",null,y(i.diagnosis),1)]),e("p",null,[s[6]||(s[6]=e("span",null,"Ghi chú của bác sĩ: ",-1)),e("strong",null,y(i.doctorNotes),1)]),e("p",null,[s[7]||(s[7]=e("span",null,"Đơn thuốc: ",-1)),e("strong",null,y(i.prescribedMedication),1)]),o(V)===i.id?(r(),x("p",{key:0,class:"btn-delete",onClick:P=>v(i)},[a(g,{name:"delete"}),s[8]||(s[8]=e("span",null,"Xóa",-1))],8,me)):F("",!0)],8,ce)]))),128)):(r(),w(E,{key:1})),e("div",fe,[e("div",ge,[a(g,{name:"add-user",size:"14",class:"text-primary"})]),e("span",{class:"text-sm text-white",onClick:s[0]||(s[0]=i=>o(p)("popup-add-medical-record"))},"Thêm hồ sơ")])])]),a(ie,{"is-loading-button":o(c),onCancel:s[1]||(s[1]=i=>o(p)("popup-add-medical-record",!1)),onAdd:h},null,8,["is-loading-button"])],64)}}}),Pe=O(_e,[["__scopeId","data-v-50a950c1"]]);export{Pe as default};

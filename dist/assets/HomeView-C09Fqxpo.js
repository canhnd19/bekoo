import{_ as F}from"./BaseIcon.vue_vue_type_script_setup_true_lang-2reowm3D.js";import{_ as J}from"./BaseInput-CySznTaA.js";import{d as L,ap as R,l as Q,D as q,y as m,A as W,a3 as G,e as Z,M as I,a4 as ee,o,c as l,a9 as $,f as n,s as _,p as D,a as e,F as y,q as S,n as P,v as A,t as k,be as te,J as E,X as ne,_ as U,aq as se,m as ae,N as ie,a5 as oe}from"./index-BF8YZsyN.js";import{S as le,P as ce,N as re,a as de}from"./swiper-vue-BOV6_l2f.js";import{f as he,c as ue}from"./timestampConverter-C2RkqK1z.js";import"./el-popper-CLZRTZ2t.js";import{h as me}from"./el-popover-Du7isfLj.js";import{_ as K}from"./favicon-BHUZcTbH.js";import{C as ge}from"./index-RVLqj0Kd.js";/* empty css                 */import"./use-form-item-UeCd67b5.js";import"./index-DGKHIVkP.js";import"./index-Co17OX-1.js";const pe="/images/homepage_banner.png",ve={class:"fixed bottom-8 right-8 h-[46px] cursor-pointer sm:bottom-16 sm:right-2"},fe={class:"chat-container"},ke={key:0,class:"mr-2 h-8 w-8 rounded-full"},_e={class:"max-w-[70%]"},be={class:"message"},ye={key:1,class:"ml-2 h-8 w-8 rounded-full"},xe=["src"],Te={key:0,class:"action-button-container"},we={class:"chat-input space-x-4"},Ce=L({__name:"MedicalChatBot",setup(O){const{user:r,isLoggedIn:H}=R(Q()),{userMessage:b}=R(q()),T=m(),v=m(),w=m(1),C=()=>{var t,s;(s=(t=n(v).popperRef)==null?void 0:t.delayHide)==null||s.call(t)},x=m([]),g=m(""),c=m(null),d=m(!1);let a;W(()=>{var s;const t=G();H.value&&t.send({requestType:"Get-Chat-History",data:{userId:(s=r.value.patient)!=null&&s.info?r.value.patient.info.id:r.value.doctor.info.id,pageIndex:w.value,pageSize:20}}),setTimeout(()=>{d.value=!0},1e3)});const B=(t,s)=>{x.value.push({content:t,createdBy:s,time:new Date().getTime()}),I(()=>{c.value&&(c.value.scrollTop=c.value.scrollHeight)})},M=async()=>{var s;const t=c.value;(t==null?void 0:t.scrollTop)===0&&(V.send({requestType:"Get-Chat-History",data:{userId:(s=r.value.patient)!=null&&s.info?r.value.patient.info.id:r.value.doctor.info.id,pageIndex:w.value+1,pageSize:20}}),w.value++)},i=()=>{g.value.trim()!==""&&(N(g.value),B(g.value,"Người dùng"),b.value=g.value,g.value="")},h=()=>{d.value=!1,B("Tôi muốn đặt lịch khám","Người dùng"),N("Tôi muốn đặt lịch khám")},N=t=>{var f;const s=G(),u={requestType:"Chat",data:{senderId:H.value?(f=r.value.patient)!=null&&f.info?r.value.patient.info.id:r.value.doctor.info.id:"",content:t}};console.log("🚀 ~ handleSendMessage ~ chatMessage:",u),s.send(u)},z=Z(()=>{var t,s,u,f;return H.value&&(((s=(t=r.value.patient)==null?void 0:t.info)==null?void 0:s.linkAvatar)||((f=(u=r.value.doctor)==null?void 0:u.info)==null?void 0:f.linkAvatar))||"/images/avatar-user-default.png"}),V=G();a=V.addListener("message",t=>{var s;if(t.message&&t.message==="Get-Chat-History"){const u=t.value;if(w.value===1)x.value=u,I(()=>{c.value&&(c.value.scrollTop=c.value.scrollHeight)});else{const f=((s=c.value)==null?void 0:s.scrollHeight)||0;x.value=[...u,...x.value],I(()=>{c.value&&(c.value.scrollTop=c.value.scrollHeight-f)})}return}else if(t.message==="Chat"&&t.code===200){t.value&&B(t.value,"Hệ thống");return}else if(t.message==="Admin-Chat"){B(t.value,"Hệ thống"),V.send({requestType:"Get-All-Chat",data:{name:""}});return}}),ee(()=>{a&&a()});const Y=()=>{I(()=>{c.value&&(c.value.scrollTop=c.value.scrollHeight)})};return(t,s)=>{const u=F,f=me;return o(),l("div",ve,[$(_(u,{ref_key:"buttonRef",ref:T,name:"chat-bot",size:"40",class:"text-primary"},null,512),[[n(ge),C]]),_(f,{ref_key:"popoverRef",ref:v,"popper-style":{padding:0,borderRadius:"8px"},placement:"left","virtual-ref":n(T),trigger:"click","virtual-triggering":"",width:"400px",onShow:Y},{default:D(()=>[e("div",fe,[s[2]||(s[2]=e("div",{class:"chat-header"},[e("div",{class:"user-info"},[e("div",{class:"avatar rounded-full bg-white p-1"},[e("img",{src:K,alt:"User avatar"})]),e("div",{class:"user-details"},[e("div",{class:"user-name"},"Chăm sóc khách hàng Bekoo"),e("div",{class:"user-status"},"Tư Vấn Trực Tuyến")])])],-1)),e("div",{ref_key:"messagesContainer",ref:c,class:"chat-messages",onScroll:M},[(o(!0),l(y,null,S(n(x),(p,X)=>(o(),l("div",{key:X,class:P(["message-wrapper",p.createdBy==="Người dùng"?"user-message":"bot-message"])},[p.createdBy==="Hệ thống"?(o(),l("div",ke,s[1]||(s[1]=[e("img",{src:K,alt:"User avatar",class:"rounded-full bg-white p-1"},null,-1)]))):A("",!0),e("div",_e,[e("div",be,k(p.content),1),e("div",{class:P(["message-time",[p.createdBy==="Người dùng"?"text-right":"text-left"]])},k(p.createdAt?p.createdAt:("formatRelativeTime"in t?t.formatRelativeTime:n(he))(("convertTimestampToISO"in t?t.convertTimestampToISO:n(ue))(p.time))),3)]),p.createdBy==="Người dùng"?(o(),l("div",ye,[e("img",{src:n(z),alt:"User avatar",class:"rounded-full bg-white p-1"},null,8,xe)])):A("",!0)],2))),128)),n(d)?(o(),l("div",Te,[e("button",{class:"action-button",onClick:h},"Tôi muốn đặt lịch khám")])):A("",!0)],544),e("div",we,[$(e("input",{"onUpdate:modelValue":s[0]||(s[0]=p=>E(g)?g.value=p:null),type:"text",placeholder:"Nhập nội dung...",onKeyup:ne(i,["enter"])},null,544),[[te,n(g)]]),e("button",{class:"btn-primary",onClick:i},[_(u,{name:"send",size:"20"})])])])]),_:1},8,["virtual-ref"])])}}}),Be=U(Ce,[["__scopeId","data-v-5fa74e94"]]),j=[{icon:"/images/doctor.png",label:"Đặt khám theo bác sĩ"},{icon:"/images/tele.png",label:"Tư vấn khám bệnh qua video"},{icon:"/images/dat-lich-xet-nghiem.png",label:"Đặt lịch xét nghiệm"},{icon:"/images/goi_kham.png",label:"Gói khám sức khỏe"},{icon:"/images/tiem-chung.png",label:"Đặt lịch tiêm chủng"},{icon:"/images/y-te-tai-nha.png",label:"Y tế tại nhà"},{icon:"/images/thanhtoanvp.png",label:"Thanh toán viện phí"}],Se=[{icon:"/images/luotdatkham.png",value:"3.0M+",label:"Lượt khám"},{icon:"/images/bacsi.png",value:"100+",label:"Bác sĩ"},{icon:"/images/luottruycapthang.png",value:"850K+",label:"Lượt truy cập tháng"},{icon:"/images/luottruycapngay.png",value:"28.3K++",label:"Lượt truy cập trong ngày"}],He=[{detailFeelPeople:"Đặt lịch xét nghiệm bên này rất gọn, có ngày giờ cụ thể luôn lên là được xét nghiệm liền không rườm rà gì mấy. An tâm đặt cho gia đình, có cả xét nghiệm tận nhà, không mất thời gian.",name:"Yến Chi ",avatar:"/images/feedback2.jpg"},{detailFeelPeople:"Cảm ơn Bekoo giúp mình và gia đình tiết kiệm thời gian và công sức khi đi khám. Ba mình lớn tuổi nên mắt yếu, đi khám BV Mắt ở xa lên tới Hà nội khám cực với đông nhưng từ bây giờ chỉ cần đặt khám qua Bekoo, không cần xếp hàng chờ đợi.",name:"Mộc Trà",avatar:"/images/feedback1.jpg"},{detailFeelPeople:"Đặt lịch khám qua Bekoo rất dễ dàng và tiện lợi. Tôi đánh giá cao tính năng thanh toán trực tuyến và cập nhật lịch sử khám bệnh. Giao diện trực quan, giúp tôi dễ dàng tìm kiếm và lựa chọn dịch vụ.",name:"An Nhung",avatar:"/images/feedback6.jpg"},{detailFeelPeople:"Tôi rất hài lòng với dịch vụ đặt lịch của Bekoo. Ứng dụng dễ sử dụng, giúp tôi đặt lịch khám nhanh chóng mà không cần chờ đợi. Điều tuyệt vời là có thể chọn bác sĩ theo nhu cầu và lịch trình cá nhân. ",name:"Mai Vy",avatar:"/images/feedback3.jpg"},{detailFeelPeople:"Dịch vụ Bekoo giúp tôi tiết kiệm nhiều thời gian nhờ vào tính năng đặt lịch trực tuyến. Từ khi sử dụng Bekoo, tôi không còn phải xếp hàng dài ở bệnh viện nữa. Giao diện đơn giản, dễ hiểu, thông tin rõ ràng về các bác sĩ và dịch vụ.",name:"Mạnh Hùng",avatar:"/images/feedback4.jpg"},{detailFeelPeople:"Bekoo thực sự là một ứng dụng hữu ích trong việc chăm sóc sức khỏe! Tôi ấn tượng với tính năng nhắc nhở tự động, giúp tôi không bao giờ quên lịch hẹn. Hệ thống đặt lịch rất mượt, giao diện thân thiện. ",name:"Roãn Quyền",avatar:"/images/feedback5.jpg"}],Me={class:"relative"},Ie={class:"absolute top-20 w-full"},Ae={class:"carousel"},Ne=["src"],Ve={class:"mt-2 text-center"},Ge={key:1,class:"grid grid-cols-2 gap-8"},Re=["src"],qe={class:"mt-2 text-center"},De={class:"container mt-28"},$e={class:"my-8 grid grid-cols-8 gap-x-12 gap-y-8 sm:grid-cols-2"},Pe=["onClick"],Ke=["src"],je={class:"mt-2 text-center text-[20px]"},Fe={class:"show-more"},Le={key:0,class:"is-loading"},Ee={key:1},Ue={key:2},Oe={class:"container mt-28"},ze={class:"feedback-card"},Ye={class:"mx-auto"},Xe={class:"border-border-table flex items-center justify-center space-x-2 border-t border-solid pt-4"},Je=["src"],Qe={class:"text-base font-semibold"},We={class:"statistics"},Ze={class:"container"},et={class:"statistics-item"},tt=["src"],nt={class:"text-center text-2xl font-bold text-[#24313d]"},st={class:"mt-2 text-center text-[20px] text-[#757575]"},at=L({__name:"HomeView",setup(O){const{isDesktop:r}=R(q()),H=[ce,re],b=m([]),T=m(""),v=m(!1),{department:w}=q(),C=m({pageIndex:1,pageSize:10,totalElements:0,loading:!1}),x=async()=>{if(!(b.value.length>0))try{C.value.loading=!0;const d=await ie.getAllDepartment();b.value=d.value.contentResponse,C.value.loading=!1}catch(d){C.value.loading=!1,console.log(d)}},g=()=>{v.value=!v.value,v.value&&x()},c=d=>{sessionStorage.setItem("department-name",d.name),oe.push({name:"DepartmentDetail",params:{id:d.id}})};return(d,a)=>{const B=J,M=F;return o(),l(y,null,[e("div",Me,[a[4]||(a[4]=se('<div class="marquee bg-[#ffb340] py-4" data-v-5f3230b0><div class="marquee-content font-semibold text-white" data-v-5f3230b0><p data-v-5f3230b0>🎇 Tết đã về! Giảm Giá Đến 200.000đ - Vui lòng đặt lịch khám để được ưu đãi này!</p><p data-v-5f3230b0>🎉 Khám sức khỏe định kỳ với giá ưu đãi!</p><p data-v-5f3230b0>🎁 Ưu đãi đặc biệt cho khách hàng mới!</p><p data-v-5f3230b0>🏥 Đặt lịch khám trực tuyến nhanh chóng và tiện lợi!</p><p data-v-5f3230b0>🎇 Tết đã về! Giảm Giá Đến 200.000đ - Vui lòng đặt lịch khám để được ưu đãi này!</p><p data-v-5f3230b0>🎉 Khám sức khỏe định kỳ với giá ưu đãi!</p><p data-v-5f3230b0>🎁 Ưu đãi đặc biệt cho khách hàng mới!</p><p data-v-5f3230b0>🏥 Đặt lịch khám trực tuyến nhanh chóng và tiện lợi!</p><p data-v-5f3230b0>🎇 Tết đã về! Giảm Giá Đến 200.000đ - Vui lòng đặt lịch khám để được ưu đãi này!</p><p data-v-5f3230b0>🎉 Khám sức khỏe định kỳ với giá ưu đãi!</p><p data-v-5f3230b0>🎁 Ưu đãi đặc biệt cho khách hàng mới!</p><p data-v-5f3230b0>🏥 Đặt lịch khám trực tuyến nhanh chóng và tiện lợi!</p></div></div><img src="'+pe+'" alt="" data-v-5f3230b0>',2)),n(r)?(o(),l(y,{key:0},[e("div",Ie,[a[1]||(a[1]=e("p",{class:"mb-2 text-center text-2xl text-[#11a2f3]"},"Nền tảng công nghệ",-1)),a[2]||(a[2]=e("p",{class:"text-center text-4xl font-bold"},"Kết nối người dân với Cơ sở - Dịch vụ Y tế",-1)),_(B,{modelValue:n(T),"onUpdate:modelValue":a[0]||(a[0]=i=>E(T)?T.value=i:null),placeholder:"Tìm kiếm gói khám",class:"input-search","show-icon":!0},null,8,["modelValue"]),a[3]||(a[3]=e("p",{class:"mt-5 text-center text-xl"},"Đặt khám nhanh - Lấy số thứ tự trực tuyến - Tư vấn sức khỏe từ xa",-1))]),e("div",Ae,[(o(!0),l(y,null,S(n(j),(i,h)=>(o(),l("div",{key:h,class:"carousel-item"},[e("img",{src:i.icon,alt:"",class:"mx-auto w-14"},null,8,Ne),e("p",Ve,k(i.label),1)]))),128))])],64)):(o(),l("div",Ge,[(o(!0),l(y,null,S(n(j),(i,h)=>(o(),l("div",{key:h,class:"carousel-item"},[e("img",{src:i.icon,alt:"",class:"mx-auto w-14"},null,8,Re),e("p",qe,k(i.label),1)]))),128))]))]),e("div",De,[a[5]||(a[5]=e("p",{class:"label"},"CHUYÊN KHOA",-1)),e("div",$e,[(o(!0),l(y,null,S(n(v)&&n(b).length>0?n(b):n(w),(i,h)=>(o(),l("div",{key:h,class:"cursor-pointer",onClick:N=>c(i)},[e("img",{src:i.urlImage,alt:"",class:"mx-auto h-20 w-20"},null,8,Ke),e("p",je,k(i.name),1)],8,Pe))),128))]),e("div",{class:"flex items-center justify-center",onClick:g},[e("div",Fe,[n(C).loading?(o(),l("div",Le,[_(M,{name:"loading",class:"text-black"})])):A("",!0),n(v)&&n(b).length>0?(o(),l("p",Ee,"Thu gọn")):(o(),l("p",Ue,"Xem tất cả")),_(M,{name:n(v)&&n(b).length>0?"direction-up":"direction-down",class:"ml-2"},null,8,["name"])])])]),e("div",Oe,[a[6]||(a[6]=e("p",{class:"label"},"Cảm nhận từ khách hàng",-1)),_(n(le),{ref:"{swiperRef}","slides-per-view":n(r)?3:1,"space-between":40,pagination:{type:"fraction"},navigation:!0,modules:H,class:"my-swiper my-8"},{default:D(()=>[(o(!0),l(y,null,S(n(He),(i,h)=>(o(),ae(n(de),{key:h},{default:D(()=>[e("div",ze,[e("div",Ye,[_(M,{name:"icon-feedback",class:"ml-2 flex justify-center text-[#ced3d9]"})]),e("p",null,k(i.detailFeelPeople),1),e("div",Xe,[e("img",{src:i.avatar,alt:"",class:"h-10 w-10 rounded-full object-cover"},null,8,Je),e("p",Qe,k(i.name),1)])])]),_:2},1024))),128))]),_:1},8,["slides-per-view"])]),a[8]||(a[8]=e("div",{class:"bg"},null,-1)),e("div",We,[e("div",Ze,[a[7]||(a[7]=e("p",{class:"label"},"THỐNG KÊ",-1)),e("div",et,[(o(!0),l(y,null,S(n(Se),(i,h)=>(o(),l("div",{key:h,class:"cursor-pointer"},[e("img",{src:i.icon,alt:"",class:"mx-auto w-24"},null,8,tt),e("p",nt,k(i.value),1),e("p",st,k(i.label),1)]))),128))])])]),_(Be)],64)}}}),kt=U(at,[["__scopeId","data-v-5f3230b0"]]);export{kt as default};

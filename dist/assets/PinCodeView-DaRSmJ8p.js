import{_ as N}from"./BaseButton-BT60jiqN.js";import{d as E,j as U,bg as k,x as n,y as B,o as A,c as M,a,q as u,f as s,D as i,t as D,m as S,A as w,n as j,bi as _,E as z,_ as R}from"./index-BOWFC6BE.js";import{E as q}from"./el-input-DcGKsDVZ.js";import"./BaseIcon.vue_vue_type_script_setup_true_lang-CAiP8aEG.js";import"./use-form-item-Cv6wCcN-.js";const F={class:"layout"},W={class:"content"},X={class:"flex items-center justify-center space-x-2"},G={class:"mb-3 mt-8 text-center text-4xl font-bold text-primary"},H={class:"text-center"},P=60,J=E({__name:"PinCodeView",setup(K){const C=U(),{user:y}=k(),p=n(P),r=n(""),d=n(""),m=n(""),c=n(""),x=n(""),f=n(""),v=n(!1);B(()=>{h()});const h=()=>{p.value=P;const l=setInterval(()=>{p.value>0?p.value--:clearInterval(l)},1e3)},O=(l,e,o,V,t,b)=>{if(/[^0-9]/.test(l+e+o+V+t+b))return"Invalid input: All numbers must be single digits.";const g=parseInt(l+e+o+V+t+b);if(g<1e5||g>999999){z.error("Invalid OTP");return}return g},T=async()=>{try{v.value=!0;const l=O(r.value,d.value,m.value,c.value,x.value,f.value);await _.pinCode({code:l,email:y.email}),C.push({name:"SetNewPassword"}),v.value=!1}catch(l){v.value=!1,console.log(l)}},I=async()=>{try{await _.forgotPass({email:y.email}),h()}catch(l){console.log(l)}};return(l,e)=>{const o=q,V=N;return A(),M("div",F,[a("div",W,[a("div",null,[e[8]||(e[8]=a("p",{class:"text-label mb-3"},"Nhập OTP",-1)),e[9]||(e[9]=a("p",{class:"mb-8 text-center"}," Mã xác thực OTP vừa được gửi đến email của bạn. Vui lòng nhập mã OTP để đặt lại mật khẩu! ",-1)),a("div",X,[u(o,{modelValue:s(r),"onUpdate:modelValue":e[0]||(e[0]=t=>i(r)?r.value=t:null),class:"input-otp",autocomplete:"off",style:{width:"56px",height:"56px"},type:"text"},null,8,["modelValue"]),u(o,{modelValue:s(d),"onUpdate:modelValue":e[1]||(e[1]=t=>i(d)?d.value=t:null),class:"input-otp",autocomplete:"off",style:{width:"56px",height:"56px"},type:"text"},null,8,["modelValue"]),u(o,{modelValue:s(m),"onUpdate:modelValue":e[2]||(e[2]=t=>i(m)?m.value=t:null),class:"input-otp",autocomplete:"off",style:{width:"56px",height:"56px"},type:"text"},null,8,["modelValue"]),u(o,{modelValue:s(c),"onUpdate:modelValue":e[3]||(e[3]=t=>i(c)?c.value=t:null),class:"input-otp",autocomplete:"off",style:{width:"56px",height:"56px"},type:"text"},null,8,["modelValue"]),u(o,{modelValue:s(x),"onUpdate:modelValue":e[4]||(e[4]=t=>i(x)?x.value=t:null),class:"input-otp",autocomplete:"off",style:{width:"56px",height:"56px"},type:"text"},null,8,["modelValue"]),u(o,{modelValue:s(f),"onUpdate:modelValue":e[5]||(e[5]=t=>i(f)?f.value=t:null),class:"input-otp",autocomplete:"off",style:{width:"56px",height:"56px"},type:"text"},null,8,["modelValue"])]),a("p",G,D(s(p))+"s",1),u(V,{loading:s(v),size:"large",class:"mx-auto mb-8 w-52",onClick:T},{default:S(()=>e[6]||(e[6]=[w("Xác nhận")])),_:1},8,["loading"]),a("p",H,[e[7]||(e[7]=w(" Ban không nhận được OTP, ")),a("span",{class:j(["cursor-pointer text-primary",{disable:s(p)}]),onClick:I}," gửi lại OTP?",2)])])])])}}}),ee=R(J,[["__scopeId","data-v-d5ad68a5"]]);export{ee as default};

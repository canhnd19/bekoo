import{b as H,c as le,d as oe,e as se,p as G,_ as K,E as W,a as J}from"./PopupConfirmDelete.vue_vue_type_script_setup_true_lang-D0ZlZDiV.js";import{d as L,H as X,I as de,o as k,c as E,q as a,m as c,a as d,F as z,p as Z,n as ie,t as A,_ as R,v as j,x as m,l as U,A as D,f as t,J as T,E as S,D as F,G as pe,y as Q,K as q,e as ue,L as ce}from"./index-BOWFC6BE.js";import{E as re}from"./el-scrollbar-D3NCpjcB.js";import{_ as M}from"./BaseIcon.vue_vue_type_script_setup_true_lang-CAiP8aEG.js";import"./el-select-CsMXB__N.js";import{_ as N}from"./BaseButton-BT60jiqN.js";import{_ as ee}from"./BaseInput-DtOy4AQi.js";import{D as Y}from"./index-D12LjGri.js";import{E as te}from"./el-input-DcGKsDVZ.js";import{E as me}from"./el-progress-LiRzn33E.js";import"./el-popper-qUzvNd1R.js";import"./use-form-item-Cv6wCcN-.js";import"./refs-ChBJ43UD.js";import"./castArray-BajDoRb2.js";const ge={class:"base-tab"},fe={class:"flex"},_e=["onClick"],ve=L({__name:"BaseTab",props:X({tabs:{default:()=>[]},isFullWidth:{type:Boolean,default:!1}},{modelValue:{required:!0,default:""},modelModifiers:{}}),emits:X(["update:modelValue","change"],["update:modelValue"]),setup(w,{emit:v}){const b=w,g=de(w,"modelValue"),o=v,r=y=>{o("update:modelValue",y.tabValue),o("change",y)};return(y,e)=>{const p=re;return k(),E("div",ge,[a(p,null,{default:c(()=>[d("div",fe,[(k(!0),E(z,null,Z(y.tabs,(u,f)=>(k(),E("div",{key:f,class:ie(["tab cursor-pointer font-medium sm:relative sm:!mr-1 sm:px-4 sm:!text-sm",[u.tabValue===g.value?"active":null,b.isFullWidth&&"!w-full"]]),onClick:l=>r(u)},A(u.title),11,_e))),128))])]),_:1})])}}}),ye=R(ve,[["__scopeId","data-v-0486859f"]]),xe={class:"space-y-3"},be={class:"flex justify-center"},he={class:"relative w-40"},ke=["src"],Ce={class:"border-border-table rounded-full border border-solid bg-white p-2"},we={class:"space-y-2"},Ie={class:"space-y-2"},De={class:"flex items-center justify-end space-x-3"},Ve=L({__name:"PopupAddDepartment",setup(w){const{setOpenPopup:v}=j(),b=m({}),g=m(!1),o=m({name:"",description:"",image:""}),r=async e=>{b.value=e,o.value.image=URL.createObjectURL(b.value.raw)},y=async()=>{try{g.value=!0;const e=new FormData;e.append("image",b.value.raw),e.append("name",o.value.name),e.append("description",o.value.description);const p=await T.createdDepartment(e);S.success(p.message),v("popup-add-department",!1),g.value=!1}catch(e){g.value=!1,console.log(e)}};return(e,p)=>{const u=M,f=me,l=te,$=N,B=H;return k(),U(B,{name:"popup-add-department",width:"700"},{title:c(()=>p[3]||(p[3]=[D(" Add department ")])),footer:c(()=>[d("div",De,[a($,{type:"plain",size:"small",class:"w-20",onClick:p[2]||(p[2]=I=>t(v)("popup-add-department",!1))},{default:c(()=>p[6]||(p[6]=[D("Hủy")])),_:1}),a($,{loading:t(g),size:"small",class:"w-20",onClick:y},{default:c(()=>p[7]||(p[7]=[D("Tạo")])),_:1},8,["loading"])])]),default:c(()=>[d("div",xe,[d("div",be,[d("div",he,[d("img",{src:t(o).image,alt:"",class:"h-40 w-full rounded-full object-cover"},null,8,ke),a(f,{"show-file-list":!1,"auto-upload":!1,accept:".png, .jpg, .webp, .jpeg","on-change":r,class:"absolute bottom-4 right-1"},{default:c(()=>[d("div",Ce,[a(u,{name:"edit-avatar"})])]),_:1})])]),d("div",we,[p[4]||(p[4]=d("p",{class:"text-label"},"Tên chuyên khoa",-1)),a(l,{modelValue:t(o).name,"onUpdate:modelValue":p[0]||(p[0]=I=>t(o).name=I),class:"input",style:{height:"50px",width:"100%"},placeholder:"Khoa Răng-Hàm-Mặt"},null,8,["modelValue"])]),d("div",Ie,[p[5]||(p[5]=d("p",{class:"text-label"},"Mô tả",-1)),a(l,{modelValue:t(o).description,"onUpdate:modelValue":p[1]||(p[1]=I=>t(o).description=I),class:"input",style:{height:"50px",width:"100%"},autosize:{minRows:2},type:"textarea",placeholder:"Vui lòng nhập mô tả"},null,8,["modelValue"])])])]),_:1})}}}),$e=R(Ve,[["__scopeId","data-v-ce8467dd"]]),Ee={class:"flex items-center justify-end space-x-3"},Be=L({__name:"PopupAddDoctortoPackage",props:{isLoadingAdd:{type:Boolean,default:!1}},emits:["cancel","add"],setup(w,{emit:v}){const b=v,g=m([]),o=m(""),r=m(!1),y=m(""),e=w,p=async()=>{try{r.value=!0;const f=await pe.getDoctorByName(o.value.trim());g.value=f.value.contentResponse,r.value=!1}catch(f){r.value=!1,console.log(f)}},u=f=>{y.value=f.id};return(f,l)=>{const $=ee,B=le,I=oe,n=se,i=N,V=H;return k(),U(V,{name:"popup-add-doctor-to-package",width:"480"},{title:c(()=>l[4]||(l[4]=[D(" Thêm bác sĩ ")])),footer:c(()=>[d("div",Ee,[a(i,{type:"plain",size:"small",class:"w-20",onClick:l[2]||(l[2]=s=>b("cancel"))},{default:c(()=>l[5]||(l[5]=[D("Hủy")])),_:1}),a(i,{loading:e.isLoadingAdd,size:"small",class:"w-20",onClick:l[3]||(l[3]=s=>b("add",t(y)))},{default:c(()=>l[6]||(l[6]=[D("Thêm")])),_:1},8,["loading"])])]),default:c(()=>[d("div",null,[a($,{modelValue:t(o),"onUpdate:modelValue":l[0]||(l[0]=s=>F(o)?o.value=s:null),class:"input-search mb-3","show-icon":!0,onChange:p},null,8,["modelValue"]),t(r)?(k(),U(B,{key:0})):t(g).length===0?(k(),U(I,{key:1})):(k(!0),E(z,{key:2},Z(t(g),(s,_)=>(k(),E("div",{key:_},[a(n,{modelValue:t(y),"onUpdate:modelValue":l[1]||(l[1]=P=>F(y)?y.value=P:null),class:"check-box",label:s.info.name,"true-value":s.id,size:"large",onChange:P=>u(s)},null,8,["modelValue","label","true-value","onChange"])]))),128))])]),_:1})}}}),Ae=R(Be,[["__scopeId","data-v-8a6b5795"]]),Pe={class:"mt-3 flex justify-end"},ze={class:"flex items-center justify-end space-x-3"},Te=L({__name:"TabDoctors",props:{departmentId:{default:""}},setup(w){const{setOpenPopup:v}=j(),b=w;Q(()=>{f()});const g=m({}),o=m(!1),r=m(!1),y=m([]),e=m({...Y}),p=()=>{v("popup-add-doctor-to-package",!1)},u=async n=>{try{r.value=!0;const i={departmentId:b.departmentId,doctorId:n},V=await T.addDoctorDepartment(i);S.success(V.message),v("popup-add-doctor-to-package",!1),f(),r.value=!1}catch(i){r.value=!1,console.log(i)}},f=async()=>{try{e.value.loading=!0;const n=b.departmentId,i=await T.getAllDoctorOfDepartment(n);y.value=i.value.contentResponse,e.value.totalElements=i.value.totalElements,e.value.loading=!1}catch(n){e.value.loading=!1,console.log(n)}},l=n=>{e.value.pageSize=n,e.value.pageIndex=1,f()},$=n=>{e.value.pageIndex=n,f()},B=n=>{g.value=n,v("popup-confirm-delete")},I=async()=>{try{o.value=!0;const n={departmentId:b.departmentId,doctorId:g.value.id},i=await T.deleteDoctorDepartment({values:[n]});S.success(i.message),v("popup-confirm-delete",!1),o.value=!1,f()}catch(n){o.value=!1,console.log(n)}};return(n,i)=>{var h;const V=N,s=W,_=M,P=J;return k(),E(z,null,[d("div",Pe,[a(V,{size:"small",class:"w-40",onClick:i[0]||(i[0]=x=>t(v)("popup-add-doctor-to-package"))},{default:c(()=>i[3]||(i[3]=[D("Thêm bác sĩ")])),_:1})]),a(P,{page:t(e).pageIndex,"onUpdate:page":i[1]||(i[1]=x=>t(e).pageIndex=x),limit:t(e).pageSize,"onUpdate:limit":i[2]||(i[2]=x=>t(e).pageSize=x),data:t(y),query:t(e),class:"mt-6",label:"doctor",onPageChange:$,onLimitChange:l},{default:c(()=>[a(s,{type:"index",index:x=>("printIndex"in n?n.printIndex:t(G))(x,t(e)),label:"#",align:"center"},null,8,["index"]),a(s,{label:"NAME"},{default:c(({row:x})=>[d("p",null,A(x.info.name),1)]),_:1}),a(s,{label:"EMAIL"},{default:c(({row:x})=>[d("p",null,A(x.info.email),1)]),_:1}),a(s,{label:"PHONE NUMBER",width:"200"},{default:c(({row:x})=>[d("p",null,A(x.info.phoneNumber),1)]),_:1}),a(s,{label:"GENDER",width:"90"},{default:c(({row:x})=>[d("p",null,A(x.info.gender),1)]),_:1}),a(s,{label:"ACTION",width:"120",align:"right"},{default:c(({row:x})=>[d("div",ze,[a(_,{name:"delete",onClick:O=>B(x)},null,8,["onClick"])])]),_:1})]),_:1},8,["page","limit","data","query"]),a(Ae,{"is-loading-add":t(r),onAdd:u,onCancel:p},null,8,["is-loading-add"]),a(K,{name:(h=t(g).info)==null?void 0:h.email,type:"bác sĩ","is-loading-delete":t(o),onDelete:I},null,8,["name","is-loading-delete"])],64)}}}),Le={class:"space-y-3"},Ue={class:"space-y-2"},Se={class:"space-y-2"},Ne={class:"space-y-2"},Re={class:"flex items-center justify-end space-x-3"},je=L({__name:"PopupAddExminationPackage",props:{isLoading:{type:Boolean,default:!1}},emits:["cancel","add"],setup(w,{emit:v}){const b=w,g=v,o=m({name:"",description:"",price:""}),r=()=>{g("add",{...o.value})};return(y,e)=>{const p=te,u=N,f=H;return k(),U(f,{name:"popup-add-exmination-package",width:"480"},{title:c(()=>e[4]||(e[4]=[D(" Add exmination package ")])),footer:c(()=>[d("div",Re,[a(u,{type:"plain",size:"small",class:"w-20",onClick:e[3]||(e[3]=l=>g("cancel"))},{default:c(()=>e[8]||(e[8]=[D("Hủy")])),_:1}),a(u,{loading:b.isLoading,size:"small",class:"w-20",onClick:r},{default:c(()=>e[9]||(e[9]=[D("Thêm")])),_:1},8,["loading"])])]),default:c(()=>[d("div",Le,[d("div",Ue,[e[5]||(e[5]=d("p",{class:"text-label"},"Tên gói khám",-1)),a(p,{modelValue:t(o).name,"onUpdate:modelValue":e[0]||(e[0]=l=>t(o).name=l),class:"input",style:{height:"50px",width:"100%"},placeholder:"Gói tầm soát ung thư tai - mũi - họng"},null,8,["modelValue"])]),d("div",Se,[e[6]||(e[6]=d("p",{class:"text-label"},"Mô tả",-1)),a(p,{modelValue:t(o).description,"onUpdate:modelValue":e[1]||(e[1]=l=>t(o).description=l),class:"input",style:{height:"50px",width:"100%"},autosize:{minRows:2},type:"textarea",placeholder:"Vui lòng nhập mô tả"},null,8,["modelValue"])]),d("div",Ne,[e[7]||(e[7]=d("p",{class:"text-label"},"Giá khám",-1)),a(p,{modelValue:t(o).price,"onUpdate:modelValue":e[2]||(e[2]=l=>t(o).price=l),style:{height:"50px",width:"100%"},class:"input",formatter:l=>`${l}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:l=>l.replace(/\$\s?|(,*)/g,"")},null,8,["modelValue","formatter","parser"])])])]),_:1})}}}),Me=R(je,[["__scopeId","data-v-96f5fcde"]]),Oe={class:"mt-3 flex justify-end"},qe={class:"flex items-center space-x-3"},Fe=L({__name:"TabSpecializes",props:{departmentId:{default:""}},setup(w){const{setOpenPopup:v}=j();Q(()=>{f()});const b=m({}),g=m([]),o=m(!1),r=m(!1),y=w,e=m({...Y}),p=()=>{v("popup-add-exmination-package",!1)},u=async n=>{try{o.value=!0;const i=y.departmentId,V=await q.createPackage({...n,departmentId:i});S.success(V.message),v("popup-add-exmination-package",!1),o.value=!1}catch(i){o.value=!1,console.log(i)}},f=async()=>{try{e.value.loading=!0;const n=await q.getAllPackage(e.value);g.value=n.value.contentResponse,e.value.totalElements=n.value.totalElements,e.value.loading=!1}catch(n){e.value.loading=!1,console.log(n)}},l=n=>{e.value.pageSize=n,e.value.pageIndex=1,f()},$=n=>{e.value.pageIndex=n,f()},B=n=>{b.value=n,v("popup-confirm-delete")},I=async()=>{try{r.value=!0;const n=await q.detetePackage(b.value.id);S.success(n.message),v("popup-confirm-delete",!1),r.value=!1,f()}catch(n){r.value=!1,console.log(n)}};return(n,i)=>{const V=N,s=W,_=M,P=J;return k(),E(z,null,[d("div",Oe,[a(V,{size:"small",class:"w-40",onClick:i[0]||(i[0]=h=>t(v)("popup-add-exmination-package"))},{default:c(()=>i[3]||(i[3]=[D("Thêm gói khám")])),_:1})]),a(P,{page:t(e).pageIndex,"onUpdate:page":i[1]||(i[1]=h=>t(e).pageIndex=h),limit:t(e).pageSize,"onUpdate:limit":i[2]||(i[2]=h=>t(e).pageSize=h),data:t(g),query:t(e),class:"mt-6",label:"user",onPageChange:$,onLimitChange:l},{default:c(()=>[a(s,{type:"index",index:h=>("printIndex"in n?n.printIndex:t(G))(h,t(e)),label:"#",align:"center"},null,8,["index"]),a(s,{label:"NAME"},{default:c(({row:h})=>[d("p",null,A(h.name),1)]),_:1}),a(s,{label:"price"},{default:c(({row:h})=>[d("p",null,A(h.price),1)]),_:1}),a(s,{label:"ACTION"},{default:c(({row:h})=>[d("div",qe,[a(_,{name:"delete",onClick:x=>B(h)},null,8,["onClick"])])]),_:1})]),_:1},8,["page","limit","data","query"]),a(Me,{"is-loading":t(o),onAdd:u,onCancel:p},null,8,["is-loading"]),a(K,{name:t(b).name,type:"gói khám","is-loading-delete":t(r),onDelete:I},null,8,["name","is-loading-delete"])],64)}}}),He={class:"flex items-start justify-between"},Ge={class:"flex items-center justify-end space-x-3"},Ke={class:"flex items-center justify-start"},We={class:"text-lg"},Je={class:"pb-6 pt-4"},Qe=L({__name:"DepartmentView",setup(w){const{setOpenPopup:v}=j(),b=m([{id:1,title:"Doctors",tabValue:"doctors"},{id:2,title:"Specialize",tabValue:"specialize"}]),g=m("doctors"),o=m([]),r=m({}),y=m(""),e=m(!1),p=m(!1),u=m({...Y,name:""}),f=ue(()=>g.value==="doctors"?Te:Fe);Q(()=>{l()});const l=async(s="")=>{try{u.value.loading=!0;const _=s==="search"?await T.getAllDepartmentByName(u.value):await T.getAllDepartment(u.value);o.value=_.value.contentResponse,u.value.totalElements=_.value.totalElements,u.value.loading=!1}catch(_){u.value.loading=!1,console.log(_)}},$=s=>{p.value=!0,r.value=s,v("popup-confirm-delete")},B=async()=>{try{e.value=!0;const s=await T.deteteDepartment(r.value.id);S.success(s.message),v("popup-confirm-delete",!1),e.value=!1,l()}catch(s){e.value=!1,console.log(s)}},I=s=>{if(p.value){p.value=!1;return}r.value=s,y.value=s.id},n=s=>{u.value.pageSize=s,u.value.pageIndex=1,l()},i=s=>{u.value.pageIndex=s,l()},V=()=>{u.value={...u.value,pageIndex:1,pageSize:10,totalElements:0},l("search")};return(s,_)=>{const P=ee,h=N,x=W,O=M,ae=J,ne=ye;return k(),E(z,null,[t(y)?(k(),E(z,{key:1},[d("div",Ke,[a(O,{name:"back",class:"mr-3 cursor-pointer",onClick:_[4]||(_[4]=C=>y.value="")}),d("p",We,A(t(r).name),1)]),d("div",Je,[a(ne,{modelValue:t(g),"onUpdate:modelValue":_[5]||(_[5]=C=>F(g)?g.value=C:null),tabs:t(b)},null,8,["modelValue","tabs"]),(k(),U(ce(t(f)),{"department-id":t(y)},null,8,["department-id"]))])],64)):(k(),E(z,{key:0},[d("div",He,[a(P,{modelValue:t(u).name,"onUpdate:modelValue":_[0]||(_[0]=C=>t(u).name=C),class:"input-search","show-icon":!0,onChange:V},null,8,["modelValue"]),a(h,{size:"small",class:"w-20",onClick:_[1]||(_[1]=C=>t(v)("popup-add-department"))},{default:c(()=>_[6]||(_[6]=[D("Add")])),_:1})]),a(ae,{page:t(u).pageIndex,"onUpdate:page":_[2]||(_[2]=C=>t(u).pageIndex=C),limit:t(u).pageSize,"onUpdate:limit":_[3]||(_[3]=C=>t(u).pageSize=C),data:t(o),query:t(u),class:"mt-6",label:"department",onPageChange:i,onLimitChange:n,onRowClick:I},{default:c(()=>[a(x,{type:"index",index:C=>("printIndex"in s?s.printIndex:t(G))(C,t(u)),label:"#",align:"center"},null,8,["index"]),a(x,{label:"NAME"},{default:c(({row:C})=>[d("p",null,A(C.name),1)]),_:1}),a(x,{label:"ACTION"},{default:c(({row:C})=>[d("div",Ge,[a(O,{name:"delete",onClick:Ye=>$(C)},null,8,["onClick"])])]),_:1})]),_:1},8,["page","limit","data","query"])],64)),a($e),a(K,{name:t(r).name,type:"chuyên khoa","is-loading-delete":t(e),onDelete:B},null,8,["name","is-loading-delete"])],64)}}}),rt=R(Qe,[["__scopeId","data-v-7cc59ae9"]]);export{rt as default};

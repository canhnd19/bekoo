import{d as F,o as d,m as h,p as y,f as o,c as B,q as E,a as r,t as D,s as v,h as M,F as w,y as L,z as a,e as z,A as b,B as N}from"./index-B6glNSy6.js";import{u as S}from"./useConvertUTCTime-I4Z56cTM.js";import{B as P}from"./BaseChart-DmUaF_Ya.js";import{_ as Y}from"./BaseIcon.vue_vue_type_script_setup_true_lang-DMEGMGnj.js";import{_ as V}from"./BaseLoading-DaLXIDwn.js";import{S as q,P as O,N as $,a as j}from"./swiper-vue-wijO1rl0.js";import{u as U}from"./index-fLyb-8-q.js";import"./BaseSelect-B3v1IxBN.js";import"./el-select-BTJxe6eS.js";import"./el-popper-44vyIzmU.js";import"./use-form-item-DR8sH5Jw.js";import"./el-scrollbar-DHGpGa-c.js";import"./castArray-DsD03P7k.js";import"./index-WNhYQkJN.js";import"./index-DLkvRVck.js";const G={class:"rounded-lg border border-solid border-[#DBDBDB] px-4 py-6"},H={class:"mb-2 flex items-center justify-between"},I={class:"text-[#5B616E]"},J={class:"text-2xl font-semibold text-[var(--dr-text-input-label-mobile)]"},K=F({__name:"BaseSummary",props:{dataSummary:{default:()=>[]},isLoading:{type:Boolean,default:!1}},setup(_){const i=[O,$],s=_;return(c,n)=>{const u=V,m=Y;return d(),h(o(q),{ref:"{swiperRef}","slides-per-view":4,"space-between":30,pagination:{type:"fraction"},navigation:!0,modules:i,class:"my-swiper"},{default:y(()=>[s.isLoading?(d(),h(u,{key:0})):(d(!0),B(w,{key:1},E(s.dataSummary,(l,p)=>(d(),h(o(j),{key:p},{default:y(()=>[r("div",G,[r("div",H,[r("span",I,D(l.title),1),v(m,{name:l.icon,size:"24",style:M({color:l.color})},null,8,["name","style"])]),r("span",J,[r("span",null,D(l.value),1)])])]),_:2},1024))),128))]),_:1},512)}}}),mt=F({__name:"ReportView",setup(_){L(()=>{f(),k()});const i=a("7_DAYS"),s=a(!1),c=a(!1),n=a({totalDepartment:0,totalDoctor:0,totalPatient:0,totalSchedule:0,totalSpecialize:0}),u=a([]),m=a([]),l=a([{name:"Số bệnh nhân",color:"#0A94FF"}]),p=a({groupType:1,fromDate:"",toDate:""}),C=z(()=>[{title:"Tổng số bác sĩ",icon:"total-doctor",color:"#0151FC",value:n.value.totalDoctor},{title:"Tổng số bệnh nhân",icon:"menu-user",color:"#FD2E58",value:n.value.totalPatient},{title:"Tổng số chuyên khoa",icon:"total-department",color:"#00A811",value:n.value.totalDepartment},{title:"Tổng số gói khám",icon:"total-package",color:"#FF9E0C",value:n.value.totalSpecialize},{title:"Tổng số lượt đặt khám",icon:"total-booking",color:"#FF4A4A",value:n.value.totalSchedule}]),k=async()=>{try{s.value=!0;const t=await b.getDataReport();n.value={...t.value},s.value=!1}catch(t){s.value=!1,console.log(t)}},x=t=>{i.value=t,f()},T=()=>{const t=new Date,e=S(new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0),"TO"),g=i.value.split("_")[0],R=S(new Date(t.getFullYear(),t.getMonth(),t.getDate()-Number(g),0,0,0,0),"FROM");p.value.fromDate=R,p.value.toDate=e},f=async()=>{try{c.value=!0,T();const t={...p.value,groupType:i.value==="360_DAYS"?3:1},e=await b.getDataChartReport(t);A(e),c.value=!1}catch(t){c.value=!1,console.log(t)}},A=t=>{u.value=[],m.value=[];const e=[];N(t.value,g=>{u.value.push(U(g.time,"MMM DD").value),e.push(g.value)}),m.value.push({label:"Số lượng bệnh nhân",data:e,tension:0,borderColor:"#027BFE"})};return(t,e)=>(d(),B(w,null,[v(K,{"data-summary":o(C),"is-loading":o(s)},null,8,["data-summary","is-loading"]),e[0]||(e[0]=r("p",{class:"mt-4 text-2xl font-semibold"},"Biểu đồ thống kê bệnh nhân đặt lịch khám",-1)),v(P,{label:o(u),"legend-chart":o(l),datasets:o(m),"is-loading":o(c),onFilter:x},null,8,["label","legend-chart","datasets","is-loading"])],64))}});export{mt as default};

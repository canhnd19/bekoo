import{b as ce,p as K,_ as W,E as J,a as Q}from"./PopupConfirmDelete.vue_vue_type_script_setup_true_lang-DCdPmNGa.js";import{d as S,H as ee,I as ue,o as C,c as A,q as a,m as r,a as p,F as z,p as te,n as re,t as V,_ as O,v as j,x as g,J as me,l as U,A as E,f as e,K as L,E as N,D as G,G as ge,y as Y,L as H,e as fe,s as _e,M as ve}from"./index-B7eiBTV4.js";import{E as ye}from"./el-scrollbar-CNGnv45V.js";import{_ as M}from"./BaseIcon.vue_vue_type_script_setup_true_lang-BM6B5sPu.js";import"./el-select-CjJ4xPVN.js";import{_ as R}from"./BaseButton-DITACc66.js";import{_ as ae}from"./BaseInput-DKtkERm8.js";import{D as X}from"./index-DUG8NYZg.js";import{_ as Z,a as he,b as be}from"./BasePopup-C8q4OrPa.js";import{E as ne}from"./el-input-BFNIFuDq.js";import{E as xe}from"./el-progress-pp0oF_Ux.js";import"./el-popper-DVIyM_vX.js";import"./use-form-item-B4Ai76jW.js";import"./castArray-CX7hjhLQ.js";import"./refs-6KAv3gnj.js";const ke={class:"base-tab"},Ce={class:"flex"},Ie=["onClick"],De=S({__name:"BaseTab",props:ee({tabs:{default:()=>[]},isFullWidth:{type:Boolean,default:!1}},{modelValue:{required:!0,default:""},modelModifiers:{}}),emits:ee(["update:modelValue","change"],["update:modelValue"]),setup(D,{emit:v}){const b=D,y=ue(D,"modelValue"),s=v,f=m=>{s("update:modelValue",m.tabValue),s("change",m)};return(m,t)=>{const c=ye;return C(),A("div",ke,[a(c,null,{default:r(()=>[p("div",Ce,[(C(!0),A(z,null,te(m.tabs,(h,o)=>(C(),A("div",{key:o,class:re(["tab cursor-pointer font-medium sm:relative sm:!mr-1 sm:px-4 sm:!text-sm",[h.tabValue===y.value?"active":null,b.isFullWidth&&"!w-full"]]),onClick:u=>f(h)},V(h.title),11,Ie))),128))])]),_:1})])}}}),we=O(De,[["__scopeId","data-v-0486859f"]]),Ee={class:"space-y-3"},Be={class:"flex justify-center"},Ve={class:"relative w-40"},Ae=["src"],$e={class:"border-border-table rounded-full border border-solid bg-white p-2"},Pe={class:"space-y-2"},Le={class:"space-y-2"},Te={class:"flex items-center justify-end space-x-3"},ze=S({__name:"PopupAddOrEditDepartment",props:{data:{default:()=>({})},typeAction:{default:""}},emits:["add-or-edit"],setup(D,{emit:v}){const{setOpenPopup:b}=j(),y=v,s=D,f=g({}),m=g(!1),t=g({name:"",description:"",urlImage:""});me(()=>s.data,u=>{t.value={name:u.name,description:u.description,urlImage:u.urlImage}});const c=async u=>{f.value=u,t.value.urlImage=URL.createObjectURL(f.value.raw)},h=async()=>{try{m.value=!0;const u=s.data.id,l=new FormData;s.typeAction==="EDIT"&&l.append("id",u),f.value.raw&&l.append("image",f.value.raw),l.append("name",t.value.name),l.append("description",t.value.description);const B=s.typeAction==="ADD"?await L.createdDepartment(l):await L.editDepartment(l);N.success(B.message),b("popup-add-or-edit-department",!1),y("add-or-edit"),t.value={name:"",description:"",urlImage:""},m.value=!1}catch(u){m.value=!1,console.log(u)}},o=()=>{t.value={name:"",description:"",urlImage:""},b("popup-add-or-edit-department",!1)};return(u,l)=>{const B=M,$=xe,n=ne,d=R,w=Z;return C(),U(w,{name:"popup-add-or-edit-department",width:"700"},{title:r(()=>[E(V(s.typeAction==="ADD"?"Thêm chuyên khoa":"Sửa chuyên khoa"),1)]),footer:r(()=>[p("div",Te,[a(d,{type:"plain",size:"small",class:"w-20",onClick:o},{default:r(()=>l[4]||(l[4]=[E("Hủy")])),_:1}),a(d,{loading:e(m),size:"small",class:"w-20",onClick:h},{default:r(()=>[E(V(s.typeAction==="ADD"?"Tạo":"Sửa"),1)]),_:1},8,["loading"])])]),default:r(()=>[p("div",Ee,[p("div",Be,[p("div",Ve,[p("img",{src:e(t).urlImage,alt:"",class:"h-40 w-full rounded-full object-cover"},null,8,Ae),a($,{"show-file-list":!1,"auto-upload":!1,accept:".png, .jpg, .webp, .jpeg","on-change":c,class:"absolute bottom-4 right-1"},{default:r(()=>[p("div",$e,[a(B,{name:"edit-avatar"})])]),_:1})])]),p("div",Pe,[l[2]||(l[2]=p("p",{class:"text-label"},"Tên chuyên khoa",-1)),a(n,{modelValue:e(t).name,"onUpdate:modelValue":l[0]||(l[0]=_=>e(t).name=_),class:"input",style:{height:"50px",width:"100%"},placeholder:"Khoa Răng-Hàm-Mặt"},null,8,["modelValue"])]),p("div",Le,[l[3]||(l[3]=p("p",{class:"text-label"},"Mô tả",-1)),a(n,{modelValue:e(t).description,"onUpdate:modelValue":l[1]||(l[1]=_=>e(t).description=_),class:"input",style:{height:"50px",width:"100%"},autosize:{minRows:2},type:"textarea",placeholder:"Vui lòng nhập mô tả"},null,8,["modelValue"])])])]),_:1})}}}),Se=O(ze,[["__scopeId","data-v-31167eb6"]]),Ue={class:"flex items-center justify-end space-x-3"},Ne=S({__name:"PopupAddDoctortoPackage",props:{isLoadingAdd:{type:Boolean,default:!1}},emits:["cancel","add"],setup(D,{emit:v}){const b=v,y=g([]),s=g(""),f=g(!1),m=g(""),t=D,c=async()=>{try{f.value=!0;const o=await ge.getDoctorByName(s.value.trim());y.value=o.value.contentResponse,f.value=!1}catch(o){f.value=!1,console.log(o)}},h=o=>{m.value=o.id};return(o,u)=>{const l=ae,B=he,$=be,n=ce,d=R,w=Z;return C(),U(w,{name:"popup-add-doctor-to-package",width:"480"},{title:r(()=>u[4]||(u[4]=[E(" Thêm bác sĩ ")])),footer:r(()=>[p("div",Ue,[a(d,{type:"plain",size:"small",class:"w-20",onClick:u[2]||(u[2]=_=>b("cancel"))},{default:r(()=>u[5]||(u[5]=[E("Hủy")])),_:1}),a(d,{loading:t.isLoadingAdd,size:"small",class:"w-20",onClick:u[3]||(u[3]=_=>b("add",e(m)))},{default:r(()=>u[6]||(u[6]=[E("Thêm")])),_:1},8,["loading"])])]),default:r(()=>[p("div",null,[a(l,{modelValue:e(s),"onUpdate:modelValue":u[0]||(u[0]=_=>G(s)?s.value=_:null),class:"input-search mb-3","show-icon":!0,onChange:c},null,8,["modelValue"]),e(f)?(C(),U(B,{key:0})):e(y).length===0?(C(),U($,{key:1})):(C(!0),A(z,{key:2},te(e(y),(_,T)=>(C(),A("div",{key:T},[a(n,{modelValue:e(m),"onUpdate:modelValue":u[1]||(u[1]=P=>G(m)?m.value=P:null),class:"check-box",label:_.info.name,"true-value":_.id,size:"large",onChange:P=>h(_)},null,8,["modelValue","label","true-value","onChange"])]))),128))])]),_:1})}}}),Re=O(Ne,[["__scopeId","data-v-8a6b5795"]]),Oe={class:"mt-3 flex justify-end"},je={class:"flex items-center justify-end space-x-3"},Me=S({__name:"TabDoctors",props:{departmentId:{default:""}},setup(D){const{setOpenPopup:v}=j(),b=D;Y(()=>{o()});const y=g({}),s=g(!1),f=g(!1),m=g([]),t=g({...X}),c=()=>{v("popup-add-doctor-to-package",!1)},h=async n=>{try{f.value=!0;const d={departmentId:b.departmentId,doctorId:n},w=await L.addDoctorDepartment(d);N.success(w.message),v("popup-add-doctor-to-package",!1),o(),f.value=!1}catch(d){f.value=!1,console.log(d)}},o=async()=>{try{t.value.loading=!0;const n=b.departmentId,d=await L.getListDoctorOfDepartment(n);m.value=d.value.contentResponse,t.value.totalElements=d.value.totalElements,t.value.loading=!1}catch(n){t.value.loading=!1,console.log(n)}},u=n=>{t.value.pageSize=n,t.value.pageIndex=1,o()},l=n=>{t.value.pageIndex=n,o()},B=n=>{y.value=n,v("popup-confirm-delete")},$=async()=>{try{s.value=!0;const n={departmentId:b.departmentId,doctorId:y.value.id},d=await L.deleteDoctorDepartment({values:[n]});N.success(d.message),v("popup-confirm-delete",!1),s.value=!1,o()}catch(n){s.value=!1,console.log(n)}};return(n,d)=>{var k;const w=R,_=J,T=M,P=Q;return C(),A(z,null,[p("div",Oe,[a(w,{size:"small",class:"w-40",onClick:d[0]||(d[0]=i=>e(v)("popup-add-doctor-to-package"))},{default:r(()=>d[3]||(d[3]=[E("Thêm bác sĩ")])),_:1})]),a(P,{page:e(t).pageIndex,"onUpdate:page":d[1]||(d[1]=i=>e(t).pageIndex=i),limit:e(t).pageSize,"onUpdate:limit":d[2]||(d[2]=i=>e(t).pageSize=i),data:e(m),query:e(t),class:"mt-6",label:"doctor",onPageChange:l,onLimitChange:u},{default:r(()=>[a(_,{type:"index",index:i=>("printIndex"in n?n.printIndex:e(K))(i,e(t)),label:"#",align:"center"},null,8,["index"]),a(_,{label:"NAME"},{default:r(({row:i})=>[p("p",null,V(i.info.name),1)]),_:1}),a(_,{label:"EMAIL"},{default:r(({row:i})=>[p("p",null,V(i.info.email),1)]),_:1}),a(_,{label:"PHONE NUMBER",width:"200"},{default:r(({row:i})=>[p("p",null,V(i.info.phoneNumber),1)]),_:1}),a(_,{label:"GENDER",width:"90"},{default:r(({row:i})=>[p("p",null,V(i.info.gender),1)]),_:1}),a(_,{label:"ACTION",width:"120",align:"right"},{default:r(({row:i})=>[p("div",je,[a(T,{name:"delete",onClick:x=>B(i)},null,8,["onClick"])])]),_:1})]),_:1},8,["page","limit","data","query"]),a(Re,{"is-loading-add":e(f),onAdd:h,onCancel:c},null,8,["is-loading-add"]),a(W,{name:(k=e(y).info)==null?void 0:k.email,type:"bác sĩ","is-loading-button":e(s),onDelete:$},null,8,["name","is-loading-button"])],64)}}}),qe={class:"space-y-3"},Fe={class:"space-y-2"},He={class:"space-y-2"},Ge={class:"space-y-2"},Ke={class:"flex items-center justify-end space-x-3"},We=S({__name:"PopupAddExminationPackage",props:{isLoading:{type:Boolean,default:!1}},emits:["cancel","add"],setup(D,{emit:v}){const b=D,y=v,s=g({name:"",description:"",price:""}),f=()=>{y("add",{...s.value}),s.value={name:"",description:"",price:""}},m=()=>{s.value={name:"",description:"",price:""},y("cancel")};return(t,c)=>{const h=ne,o=R,u=Z;return C(),U(u,{name:"popup-add-exmination-package",width:"480"},{title:r(()=>c[3]||(c[3]=[E(" Add exmination package ")])),footer:r(()=>[p("div",Ke,[a(o,{type:"plain",size:"small",class:"w-20",onClick:m},{default:r(()=>c[7]||(c[7]=[E("Hủy")])),_:1}),a(o,{loading:b.isLoading,size:"small",class:"w-20",onClick:f},{default:r(()=>c[8]||(c[8]=[E("Thêm")])),_:1},8,["loading"])])]),default:r(()=>[p("div",qe,[p("div",Fe,[c[4]||(c[4]=p("p",{class:"text-label"},"Tên gói khám",-1)),a(h,{modelValue:e(s).name,"onUpdate:modelValue":c[0]||(c[0]=l=>e(s).name=l),class:"input",style:{height:"50px",width:"100%"},placeholder:"Gói tầm soát ung thư tai - mũi - họng"},null,8,["modelValue"])]),p("div",He,[c[5]||(c[5]=p("p",{class:"text-label"},"Mô tả",-1)),a(h,{modelValue:e(s).description,"onUpdate:modelValue":c[1]||(c[1]=l=>e(s).description=l),class:"input",style:{height:"50px",width:"100%"},autosize:{minRows:2},type:"textarea",placeholder:"Vui lòng nhập mô tả"},null,8,["modelValue"])]),p("div",Ge,[c[6]||(c[6]=p("p",{class:"text-label"},"Giá khám",-1)),a(h,{modelValue:e(s).price,"onUpdate:modelValue":c[2]||(c[2]=l=>e(s).price=l),style:{height:"50px",width:"100%"},class:"input",formatter:l=>`${l}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:l=>l.replace(/\$\s?|(,*)/g,"")},null,8,["modelValue","formatter","parser"])])])]),_:1})}}}),Je=O(We,[["__scopeId","data-v-6cf8a4f8"]]),Qe={class:"mt-3 flex justify-end"},Ye={class:"flex items-center space-x-3"},Xe=S({__name:"TabSpecializes",props:{departmentId:{default:""}},setup(D){const{setOpenPopup:v}=j();Y(()=>{o()});const b=g({}),y=g([]),s=g(!1),f=g(!1),m=D,t=g({...X}),c=()=>{v("popup-add-exmination-package",!1)},h=async n=>{try{s.value=!0;const d=m.departmentId,w=await H.createPackage({...n,departmentId:d});N.success(w.message),s.value=!1}catch(d){s.value=!1,console.log(d)}},o=async()=>{try{t.value.loading=!0;const n=await H.getListPackage(t.value);y.value=n.value.contentResponse,t.value.totalElements=n.value.totalElements,t.value.loading=!1}catch(n){t.value.loading=!1,console.log(n)}},u=n=>{t.value.pageSize=n,t.value.pageIndex=1,o()},l=n=>{t.value.pageIndex=n,o()},B=n=>{b.value=n,v("popup-confirm-delete")},$=async()=>{try{f.value=!0;const n=await H.detetePackage(b.value.id);N.success(n.message),v("popup-confirm-delete",!1),f.value=!1,o()}catch(n){f.value=!1,console.log(n)}};return(n,d)=>{const w=R,_=J,T=M,P=Q;return C(),A(z,null,[p("div",Qe,[a(w,{size:"small",class:"w-40",onClick:d[0]||(d[0]=k=>e(v)("popup-add-exmination-package"))},{default:r(()=>d[3]||(d[3]=[E("Thêm gói khám")])),_:1})]),a(P,{page:e(t).pageIndex,"onUpdate:page":d[1]||(d[1]=k=>e(t).pageIndex=k),limit:e(t).pageSize,"onUpdate:limit":d[2]||(d[2]=k=>e(t).pageSize=k),data:e(y),query:e(t),class:"mt-6",label:"user",onPageChange:l,onLimitChange:u},{default:r(()=>[a(_,{type:"index",index:k=>("printIndex"in n?n.printIndex:e(K))(k,e(t)),label:"#",align:"center"},null,8,["index"]),a(_,{label:"NAME"},{default:r(({row:k})=>[p("p",null,V(k.name),1)]),_:1}),a(_,{label:"price"},{default:r(({row:k})=>[p("p",null,V(k.price),1)]),_:1}),a(_,{label:"ACTION"},{default:r(({row:k})=>[p("div",Ye,[a(T,{name:"delete",onClick:i=>B(k)},null,8,["onClick"])])]),_:1})]),_:1},8,["page","limit","data","query"]),a(Je,{"is-loading":e(s),onAdd:h,onCancel:c},null,8,["is-loading"]),a(W,{name:e(b).name,type:"gói khám","is-loading-button":e(f),onDelete:$},null,8,["name","is-loading-button"])],64)}}}),Ze={class:"flex items-start justify-between"},et={class:"flex items-center justify-end space-x-3"},tt={class:"flex items-center justify-start"},at={class:"text-lg"},nt={class:"pb-6 pt-4"},ot=S({__name:"DepartmentView",setup(D){const{setOpenPopup:v}=j(),b=g([{id:1,title:"Doctors",tabValue:"doctors"},{id:2,title:"Specialize",tabValue:"specialize"}]),y=g(""),s=g("doctors"),f=g([]),m=g({}),t=g(""),c=g(!1),h=g(!1),o=g({...X,name:""}),u=fe(()=>s.value==="doctors"?Me:Xe);Y(()=>{l()});const l=async(i="")=>{try{o.value.loading=!0;const x=i==="search"?await L.getAllDepartmentByName(o.value):await L.getListDepartment(o.value);f.value=x.value.contentResponse,o.value.totalElements=x.value.totalElements,o.value.loading=!1}catch(x){o.value.loading=!1,console.log(x)}},B=()=>{y.value="ADD",v("popup-add-or-edit-department")},$=i=>{y.value="EDIT",h.value=!0,m.value=i,v("popup-add-or-edit-department")},n=i=>{h.value=!0,m.value=i,v("popup-confirm-delete")},d=async()=>{try{c.value=!0;const i=await L.deteteDepartment(m.value.id);N.success(i.message),v("popup-confirm-delete",!1),c.value=!1,l()}catch(i){c.value=!1,console.log(i)}},w=i=>{if(h.value){h.value=!1;return}m.value=i,t.value=i.id},_=i=>{o.value.pageSize=i,o.value.pageIndex=1,l()},T=i=>{o.value.pageIndex=i,l()},P=()=>{o.value={...o.value,pageIndex:1,pageSize:10,totalElements:0},l("search")},k=()=>{l()};return(i,x)=>{const oe=ae,le=R,q=J,F=M,se=Q,de=we,ie=_e("PopupEditDepartment");return C(),A(z,null,[e(t)?(C(),A(z,{key:1},[p("div",tt,[a(F,{name:"back",class:"mr-3 cursor-pointer",onClick:x[3]||(x[3]=I=>t.value="")}),p("p",at,V(e(m).name),1)]),p("div",nt,[a(de,{modelValue:e(s),"onUpdate:modelValue":x[4]||(x[4]=I=>G(s)?s.value=I:null),tabs:e(b)},null,8,["modelValue","tabs"]),(C(),U(ve(e(u)),{"department-id":e(t)},null,8,["department-id"]))])],64)):(C(),A(z,{key:0},[p("div",Ze,[a(oe,{modelValue:e(o).name,"onUpdate:modelValue":x[0]||(x[0]=I=>e(o).name=I),class:"input-search","show-icon":!0,onChange:P},null,8,["modelValue"]),a(le,{size:"small",class:"w-20",onClick:B},{default:r(()=>x[5]||(x[5]=[E("Add")])),_:1})]),a(se,{page:e(o).pageIndex,"onUpdate:page":x[1]||(x[1]=I=>e(o).pageIndex=I),limit:e(o).pageSize,"onUpdate:limit":x[2]||(x[2]=I=>e(o).pageSize=I),data:e(f),query:e(o),class:"mt-6",label:"department",onPageChange:T,onLimitChange:_,onRowClick:w},{default:r(()=>[a(q,{type:"index",index:I=>("printIndex"in i?i.printIndex:e(K))(I,e(o)),label:"#",align:"center"},null,8,["index"]),a(q,{label:"NAME"},{default:r(({row:I})=>[p("p",null,V(I.name),1)]),_:1}),a(q,{label:"ACTION"},{default:r(({row:I})=>[p("div",et,[a(F,{name:"edit",onClick:pe=>$(I)},null,8,["onClick"]),a(F,{name:"delete",onClick:pe=>n(I)},null,8,["onClick"])])]),_:1})]),_:1},8,["page","limit","data","query"])],64)),a(Se,{data:e(m),"type-action":e(y),onAddOrEdit:k},null,8,["data","type-action"]),a(W,{name:e(m).name,type:"chuyên khoa","is-loading-button":e(c),onDelete:d},null,8,["name","is-loading-button"]),a(ie,{data:e(m),"is-loading-button":e(c)},null,8,["data","is-loading-button"])],64)}}}),bt=O(ot,[["__scopeId","data-v-3b831eb4"]]);export{bt as default};

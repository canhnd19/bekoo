import{a as de,_ as Y,p as W,E as X}from"./el-table-column-Cb4WEDKb.js";import{_ as pe}from"./BaseTab-ZEs_USIq.js";import{_ as O}from"./BaseIcon.vue_vue_type_script_setup_true_lang-D8qDhinF.js";import{d as j,D as N,y as m,z as ue,o as B,m as U,p as c,J as $,t as E,a as s,s as a,f as e,N as L,H as R,_ as F,A as M,K as ce,c as T,q as re,G as Q,F as S,O as J,e as me,L as ge}from"./index-B_H5EUyn.js";import"./el-select-6G8kZgBl.js";import{_ as q}from"./BaseButton-CfqEnmrp.js";import{_ as te}from"./BaseInput-BKCppy6D.js";import{D as G}from"./index-B9kqzngz.js";import{_ as Z}from"./BasePopup-7xnbawNl.js";/* empty css                 */import{E as fe}from"./el-progress-Fid9L9lI.js";import{E as ae}from"./index-CtyT5qzp.js";import{_ as ee}from"./PopupConfirmDelete.vue_vue_type_script_setup_true_lang-DEQfmtjv.js";import{_ as _e}from"./BasePagination-UNMqy-bR.js";import{_ as ve,a as ye}from"./BaseLoading-D7UUAf0C.js";import{u as he}from"./useFormatCurrency-DyMudwlN.js";import"./el-popper-BUB45cb6.js";import"./use-form-item-DT3LqxQu.js";import"./el-scrollbar-_mjAYK2Q.js";import"./index-DHZIMwFg.js";import"./index-BkSQ2fAc.js";import"./index-B1tkaO6n.js";import"./castArray-DSo-aFrf.js";import"./refs-BX6glOei.js";const xe={class:"space-y-3"},be={class:"flex justify-center"},Ie={class:"relative w-40"},ke=["src"],Ce={class:"border-border-table rounded-full border border-solid bg-white p-2"},De={class:"space-y-2"},we={class:"space-y-2"},Be={class:"flex items-center justify-end space-x-3"},Ee=j({__name:"PopupAddOrEditDepartment",props:{data:{default:()=>({})},typeAction:{default:""}},emits:["add-or-edit"],setup(A,{emit:_}){const{setOpenPopup:b}=N(),h=_,d=A,g=m({}),I=m(!1),t=m({name:"",description:"",urlImage:""});ue(()=>d.data,i=>{t.value={name:i.name,description:i.description,urlImage:i.urlImage}});const p=async i=>{g.value=i,t.value.urlImage=URL.createObjectURL(g.value.raw)},C=async()=>{try{I.value=!0;const i=d.data.id,n=new FormData;d.typeAction==="EDIT"&&n.append("id",i),g.value.raw&&n.append("image",g.value.raw),n.append("name",t.value.name),n.append("description",t.value.description);const u=d.typeAction==="ADD"?await L.createdDepartment(n):await L.editDepartment(n);R.success(u.message),b("popup-add-or-edit-department",!1),h("add-or-edit"),t.value={name:"",description:"",urlImage:""},I.value=!1}catch(i){I.value=!1,console.log(i)}},v=()=>{t.value={name:"",description:"",urlImage:""},b("popup-add-or-edit-department",!1)};return(i,n)=>{const u=O,V=fe,o=ae,l=q,w=Z;return B(),U(w,{name:"popup-add-or-edit-department",width:"700"},{title:c(()=>[$(E(d.typeAction==="ADD"?"Thêm chuyên khoa":"Sửa chuyên khoa"),1)]),footer:c(()=>[s("div",Be,[a(l,{type:"plain",size:"small",class:"w-20",onClick:v},{default:c(()=>n[4]||(n[4]=[$("Hủy")])),_:1}),a(l,{loading:e(I),size:"small",class:"w-20",onClick:C},{default:c(()=>[$(E(d.typeAction==="ADD"?"Tạo":"Sửa"),1)]),_:1},8,["loading"])])]),default:c(()=>[s("div",xe,[s("div",be,[s("div",Ie,[s("img",{src:e(t).urlImage,alt:"",class:"h-40 w-full rounded-full object-cover"},null,8,ke),a(V,{"show-file-list":!1,"auto-upload":!1,accept:".png, .jpg, .webp, .jpeg","on-change":p,class:"absolute bottom-4 right-1"},{default:c(()=>[s("div",Ce,[a(u,{name:"edit-avatar"})])]),_:1})])]),s("div",De,[n[2]||(n[2]=s("p",{class:"text-label"},"Tên chuyên khoa",-1)),a(o,{modelValue:e(t).name,"onUpdate:modelValue":n[0]||(n[0]=x=>e(t).name=x),class:"input",style:{height:"50px",width:"100%"},placeholder:"Khoa Răng-Hàm-Mặt"},null,8,["modelValue"])]),s("div",we,[n[3]||(n[3]=s("p",{class:"text-label"},"Mô tả",-1)),a(o,{modelValue:e(t).description,"onUpdate:modelValue":n[1]||(n[1]=x=>e(t).description=x),class:"input",style:{height:"50px",width:"100%"},autosize:{minRows:2},type:"textarea",placeholder:"Vui lòng nhập mô tả"},null,8,["modelValue"])])])]),_:1})}}}),$e=F(Ee,[["__scopeId","data-v-31167eb6"]]),Ae={class:"text-xl"},Ve={class:"flex items-center justify-end space-x-3"},ze=j({__name:"PopupAddDoctortoPackage",props:{isLoadingAdd:{type:Boolean,default:!1}},emits:["cancel","add"],setup(A,{emit:_}){const b=_,h=m([]),d=m(!1),g=m(""),I=A,t=m({...G,name:""});M(()=>{p()});const p=async()=>{try{d.value=!0;const n=await ce.getAllDoctor(t.value);h.value=n.value.contentResponse,t.value.totalElements=n.value.totalElements,d.value=!1}catch(n){d.value=!1,console.log(n)}},C=n=>{g.value=n.id},v=n=>{t.value.pageSize=n,t.value.pageIndex=1,p()},i=n=>{t.value.pageIndex=n,p()};return(n,u)=>{const V=te,o=ve,l=ye,w=de,x=_e,z=q,P=Z;return B(),U(P,{name:"popup-add-doctor-to-package",width:"600"},{title:c(()=>u[6]||(u[6]=[$(" Thêm bác sĩ ")])),footer:c(()=>[s("div",Ve,[a(z,{type:"plain",size:"small",class:"w-20",onClick:u[4]||(u[4]=r=>b("cancel"))},{default:c(()=>u[7]||(u[7]=[$("Hủy")])),_:1}),a(z,{loading:I.isLoadingAdd,size:"small",class:"w-20",onClick:u[5]||(u[5]=r=>b("add",e(g)))},{default:c(()=>u[8]||(u[8]=[$("Thêm")])),_:1},8,["loading"])])]),default:c(()=>[s("div",null,[a(V,{modelValue:e(t).name,"onUpdate:modelValue":u[0]||(u[0]=r=>e(t).name=r),class:"input-search mb-3","show-icon":!0,onChange:p},null,8,["modelValue"]),e(d)?(B(),U(o,{key:0})):e(h).length===0?(B(),U(l,{key:1})):(B(!0),T(S,{key:2},re(e(h),(r,y)=>(B(),T("div",{key:y},[a(w,{modelValue:e(g),"onUpdate:modelValue":u[1]||(u[1]=f=>Q(g)?g.value=f:null),class:"check-box","true-value":r.id,size:"large",onChange:f=>C(r)},{default:c(()=>[s("p",Ae,E(r.info.name)+" - "+E(r.info.email),1)]),_:2},1032,["modelValue","true-value","onChange"])]))),128)),a(x,{"page-index":e(t).pageIndex,"onUpdate:pageIndex":u[2]||(u[2]=r=>e(t).pageIndex=r),"page-size":e(t).pageSize,"onUpdate:pageSize":u[3]||(u[3]=r=>e(t).pageSize=r),query:e(t),class:"fix-pagination mt-4",onLimitChange:v,onPageChange:i},null,8,["page-index","page-size","query"])])]),_:1})}}}),Le=F(ze,[["__scopeId","data-v-d6e05cf6"]]),Pe={class:"mt-3 flex justify-end"},Te={class:"flex items-center justify-end space-x-3"},Ue=j({__name:"TabDoctors",props:{departmentId:{default:""}},setup(A){const{setOpenPopup:_}=N(),b=A;M(()=>{v()});const h=m({}),d=m(!1),g=m(!1),I=m([]),t=m({...G}),p=()=>{_("popup-add-doctor-to-package",!1)},C=async o=>{try{g.value=!0;const l={departmentId:b.departmentId,doctorId:o},w=await L.addDoctorDepartment(l);R.success(w.message),_("popup-add-doctor-to-package",!1),v(),g.value=!1}catch(l){g.value=!1,console.log(l)}},v=async()=>{try{t.value.loading=!0;const o=b.departmentId,l=await L.getListDoctorOfDepartment(o,t.value);I.value=l.value.contentResponse,t.value.totalElements=l.value.totalElements,t.value.loading=!1}catch(o){t.value.loading=!1,console.log(o)}},i=o=>{t.value.pageSize=o,t.value.pageIndex=1,v()},n=o=>{t.value.pageIndex=o,v()},u=o=>{h.value=o,_("popup-confirm-delete")},V=async()=>{try{d.value=!0;const o={departmentId:b.departmentId,doctorId:h.value.id},l=await L.deleteDoctorDepartment({values:[o]});R.success(l.message),_("popup-confirm-delete",!1),d.value=!1,v()}catch(o){d.value=!1,console.log(o)}};return(o,l)=>{var r;const w=q,x=X,z=O,P=Y;return B(),T(S,null,[s("div",Pe,[a(w,{size:"small",class:"w-40",onClick:l[0]||(l[0]=y=>e(_)("popup-add-doctor-to-package"))},{default:c(()=>l[3]||(l[3]=[$("Thêm bác sĩ")])),_:1})]),a(P,{page:e(t).pageIndex,"onUpdate:page":l[1]||(l[1]=y=>e(t).pageIndex=y),limit:e(t).pageSize,"onUpdate:limit":l[2]||(l[2]=y=>e(t).pageSize=y),data:e(I),query:e(t),class:"mt-6",label:"bác sĩ",onPageChange:n,onLimitChange:i},{default:c(()=>[a(x,{type:"index",index:y=>("printIndex"in o?o.printIndex:e(W))(y,e(t)),label:"#",align:"center"},null,8,["index"]),a(x,{label:"tên"},{default:c(({row:y})=>[s("p",null,E(y.info.name),1)]),_:1}),a(x,{label:"EMAIL"},{default:c(({row:y})=>[s("p",null,E(y.info.email),1)]),_:1}),a(x,{label:"số điện thoại",width:"200"},{default:c(({row:y})=>[s("p",null,E(y.info.phoneNumber),1)]),_:1}),a(x,{label:"giới tính",width:"90"},{default:c(({row:y})=>[s("p",null,E(y.info.gender),1)]),_:1}),a(x,{label:"hành động",width:"120",align:"right"},{default:c(({row:y})=>[s("div",Te,[a(z,{name:"delete",onClick:f=>u(y)},null,8,["onClick"])])]),_:1})]),_:1},8,["page","limit","data","query"]),a(Le,{"is-loading-add":e(g),onAdd:C,onCancel:p},null,8,["is-loading-add"]),a(ee,{name:(r=e(h).info)==null?void 0:r.email,type:"bác sĩ","is-loading-button":e(d),onDelete:V},null,8,["name","is-loading-button"])],64)}}}),Se={class:"space-y-3"},Re={class:"space-y-2"},je={class:"space-y-2"},qe={class:"space-y-2"},Oe={class:"flex items-center justify-end space-x-3"},Ne=j({__name:"PopupAddExminationPackage",props:{isLoading:{type:Boolean,default:!1}},emits:["cancel","add"],setup(A,{emit:_}){const b=A,h=_,d=m({name:"",description:"",price:""}),g=()=>{h("add",{...d.value}),d.value={name:"",description:"",price:""}},I=()=>{d.value={name:"",description:"",price:""},h("cancel")};return(t,p)=>{const C=ae,v=q,i=Z;return B(),U(i,{name:"popup-add-exmination-package",width:"480"},{title:c(()=>p[3]||(p[3]=[$(" Thêm gói khám ")])),footer:c(()=>[s("div",Oe,[a(v,{type:"plain",size:"small",class:"w-20",onClick:I},{default:c(()=>p[7]||(p[7]=[$("Hủy")])),_:1}),a(v,{loading:b.isLoading,size:"small",class:"w-20",onClick:g},{default:c(()=>p[8]||(p[8]=[$("Thêm")])),_:1},8,["loading"])])]),default:c(()=>[s("div",Se,[s("div",Re,[p[4]||(p[4]=s("p",{class:"text-label"},"Tên gói khám",-1)),a(C,{modelValue:e(d).name,"onUpdate:modelValue":p[0]||(p[0]=n=>e(d).name=n),class:"input",style:{height:"50px",width:"100%"},placeholder:"Gói tầm soát ung thư tai - mũi - họng"},null,8,["modelValue"])]),s("div",je,[p[5]||(p[5]=s("p",{class:"text-label"},"Mô tả",-1)),a(C,{modelValue:e(d).description,"onUpdate:modelValue":p[1]||(p[1]=n=>e(d).description=n),class:"input",style:{height:"50px",width:"100%"},autosize:{minRows:2},type:"textarea",placeholder:"Vui lòng nhập mô tả"},null,8,["modelValue"])]),s("div",qe,[p[6]||(p[6]=s("p",{class:"text-label"},"Giá khám",-1)),a(C,{modelValue:e(d).price,"onUpdate:modelValue":p[2]||(p[2]=n=>e(d).price=n),style:{height:"50px",width:"100%"},class:"input",formatter:n=>`${n}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:n=>n.replace(/\$\s?|(,*)/g,"")},null,8,["modelValue","formatter","parser"])])])]),_:1})}}}),Fe=F(Ne,[["__scopeId","data-v-fa99b888"]]),Me={class:"mt-3 flex justify-end"},Ge={class:"flex items-center space-x-3"},He=j({__name:"TabSpecializes",props:{departmentId:{default:""}},setup(A){const{setOpenPopup:_}=N();M(()=>{v()});const b=m({}),h=m([]),d=m(!1),g=m(!1),I=A,t=m({...G}),p=()=>{_("popup-add-exmination-package",!1)},C=async o=>{try{d.value=!0;const l=I.departmentId,w=await J.createPackage({...o,departmentId:l});R.success(w.message),_("popup-add-exmination-package",!1),d.value=!1}catch(l){d.value=!1,console.log(l)}},v=async()=>{try{t.value.loading=!0;const o=I.departmentId,l=await J.getListByDeparmentId(t.value,o);h.value=l.value.contentResponse,t.value.totalElements=l.value.totalElements,t.value.loading=!1}catch(o){t.value.loading=!1,console.log(o)}},i=o=>{t.value.pageSize=o,t.value.pageIndex=1,v()},n=o=>{t.value.pageIndex=o,v()},u=o=>{b.value=o,_("popup-confirm-delete")},V=async()=>{try{g.value=!0;const o=await J.detetePackage(b.value.id);R.success(o.message),_("popup-confirm-delete",!1),g.value=!1,v()}catch(o){g.value=!1,console.log(o)}};return(o,l)=>{const w=q,x=X,z=O,P=Y;return B(),T(S,null,[s("div",Me,[a(w,{size:"small",class:"w-40",onClick:l[0]||(l[0]=r=>e(_)("popup-add-exmination-package"))},{default:c(()=>l[3]||(l[3]=[$("Thêm gói khám")])),_:1})]),a(P,{page:e(t).pageIndex,"onUpdate:page":l[1]||(l[1]=r=>e(t).pageIndex=r),limit:e(t).pageSize,"onUpdate:limit":l[2]||(l[2]=r=>e(t).pageSize=r),data:e(h),query:e(t),class:"mt-6",label:"gói khám",onPageChange:n,onLimitChange:i},{default:c(()=>[a(x,{type:"index",index:r=>("printIndex"in o?o.printIndex:e(W))(r,e(t)),label:"#",align:"center"},null,8,["index"]),a(x,{label:"tên"},{default:c(({row:r})=>[s("p",null,E(r.name),1)]),_:1}),a(x,{label:"giá"},{default:c(({row:r})=>[s("p",null,E(e(he)(r.price)),1)]),_:1}),a(x,{label:"hành động"},{default:c(({row:r})=>[s("div",Ge,[a(z,{name:"delete",onClick:y=>u(r)},null,8,["onClick"])])]),_:1})]),_:1},8,["page","limit","data","query"]),a(Fe,{"is-loading":e(d),onAdd:C,onCancel:p},null,8,["is-loading"]),a(ee,{name:e(b).name,type:"gói khám","is-loading-button":e(g),onDelete:V},null,8,["name","is-loading-button"])],64)}}}),Ke={class:"flex items-start justify-between"},Je={class:"flex items-center justify-end space-x-3"},Qe={class:"flex items-center justify-start"},Ye={class:"text-lg"},We={class:"pb-6 pt-4"},Xe=j({__name:"DepartmentView",setup(A){const{setOpenPopup:_}=N(),b=m([{id:1,title:"Bác sĩ",tabValue:"doctors"},{id:2,title:"Gói khám",tabValue:"specialize"}]),h=m(""),d=m(""),g=m("doctors"),I=m([]),t=m({}),p=m(""),C=m(!1),v=m(!1),i=m({...G}),n=me(()=>g.value==="doctors"?Ue:He);M(()=>{u()});const u=async(f="")=>{try{i.value.loading=!0;const k=f==="search"?await L.getAllDepartmentByName(h.value,i.value):await L.getListDepartment(i.value);I.value=k.value.contentResponse,i.value.totalElements=k.value.totalElements,i.value.loading=!1}catch(k){i.value.loading=!1,console.log(k)}},V=()=>{d.value="ADD",_("popup-add-or-edit-department")},o=f=>{d.value="EDIT",v.value=!0,t.value=f,_("popup-add-or-edit-department")},l=f=>{v.value=!0,t.value=f,_("popup-confirm-delete")},w=async()=>{try{C.value=!0;const f=await L.deteteDepartment(t.value.id);R.success(f.message),_("popup-confirm-delete",!1),C.value=!1,u()}catch(f){C.value=!1,console.log(f)}},x=f=>{if(v.value){v.value=!1;return}t.value=f,p.value=f.id},z=f=>{i.value.pageSize=f,i.value.pageIndex=1,u()},P=f=>{i.value.pageIndex=f,u()},r=()=>{i.value={...i.value,pageIndex:1,pageSize:10,totalElements:0},u("search")},y=()=>{u()};return(f,k)=>{const ne=te,oe=q,H=X,K=O,le=Y,se=pe;return B(),T(S,null,[e(p)?(B(),T(S,{key:1},[s("div",Qe,[a(K,{name:"back",class:"mr-3 cursor-pointer",onClick:k[3]||(k[3]=D=>p.value="")}),s("p",Ye,E(e(t).name),1)]),s("div",We,[a(se,{modelValue:e(g),"onUpdate:modelValue":k[4]||(k[4]=D=>Q(g)?g.value=D:null),tabs:e(b)},null,8,["modelValue","tabs"]),(B(),U(ge(e(n)),{"department-id":e(p)},null,8,["department-id"]))])],64)):(B(),T(S,{key:0},[s("div",Ke,[a(ne,{modelValue:e(h),"onUpdate:modelValue":k[0]||(k[0]=D=>Q(h)?h.value=D:null),class:"input-search","show-icon":!0,onChange:r},null,8,["modelValue"]),a(oe,{size:"small",class:"w-20",onClick:V},{default:c(()=>k[5]||(k[5]=[$("Add")])),_:1})]),a(le,{page:e(i).pageIndex,"onUpdate:page":k[1]||(k[1]=D=>e(i).pageIndex=D),limit:e(i).pageSize,"onUpdate:limit":k[2]||(k[2]=D=>e(i).pageSize=D),data:e(I),query:e(i),class:"mt-6",label:"chuyên khoa",onPageChange:P,onLimitChange:z,onRowClick:x},{default:c(()=>[a(H,{type:"index",index:D=>("printIndex"in f?f.printIndex:e(W))(D,e(i)),label:"#",align:"center"},null,8,["index"]),a(H,{label:"tên"},{default:c(({row:D})=>[s("p",null,E(D.name),1)]),_:1}),a(H,{label:"hành động",align:"right"},{default:c(({row:D})=>[s("div",Je,[a(K,{name:"edit",onClick:ie=>o(D)},null,8,["onClick"]),a(K,{name:"delete",onClick:ie=>l(D)},null,8,["onClick"])])]),_:1})]),_:1},8,["page","limit","data","query"])],64)),a($e,{data:e(t),"type-action":e(d),onAddOrEdit:y},null,8,["data","type-action"]),a(ee,{name:e(t).name,type:"chuyên khoa","is-loading-button":e(C),onDelete:w},null,8,["name","is-loading-button"])],64)}}}),kt=F(Xe,[["__scopeId","data-v-eb668765"]]);export{kt as default};

import{_ as R,p as Y,E as N}from"./el-table-column-CIkDOByk.js";import{d as E,o as h,m as w,p as l,J as y,a as n,s as o,D as U,k as $,A as q,y as d,Q as x,c as C,f as s,G as A,F as I,P as M,H as O,q as j,t as u,_ as Q}from"./index-Btw4ZPuZ.js";import{E as G}from"./el-select-BBSQdL7e.js";import{_ as J}from"./BaseSelect-CnDWmlYb.js";import{_ as K}from"./BaseIcon.vue_vue_type_script_setup_true_lang-D9ePeB-z.js";import{D as W}from"./index-BIOmELBf.js";import{u as X}from"./useDateFormat-bjXjPl_J.js";import{u as Z}from"./useFormatCurrency-DyMudwlN.js";import{_ as ee}from"./BasePopup-DZNeLy05.js";import{_ as te}from"./BaseButton-B7q66_TX.js";import"./BasePagination-CFJtJGX_.js";import"./el-scrollbar-BPL2oo3y.js";import"./el-popper-B6ZbGNft.js";import"./use-form-item-BCflGjGc.js";import"./index-Dsc_ZqMb.js";import"./index-qdvhN_sN.js";import"./index-1LAnpCIA.js";import"./index-CR0wim7i.js";import"./BaseLoading-iBDvmEmj.js";import"./castArray-C3sH0s2q.js";import"./index-osP4kDDg.js";import"./el-overlay-vJ0jTfn4.js";const ne={class:"flex items-center justify-end space-x-3"},ae=E({__name:"PopupConfirmDeleteBooking",props:{isLoadingButton:{type:Boolean,default:!1}},emits:["cancel","yes"],setup(b,{emit:_}){const v=b,g=_;return(m,t)=>{const r=te,f=ee;return h(),w(f,{name:"popup-confirm-delete-booking",width:"480"},{title:l(()=>t[1]||(t[1]=[y(" Hủy lịch đặt khám ")])),footer:l(()=>[n("div",ne,[o(r,{type:"plain",size:"small",class:"w-20"},{default:l(()=>t[2]||(t[2]=[y("Hủy")])),_:1}),o(r,{loading:v.isLoadingButton,size:"small",class:"w-20",onClick:t[0]||(t[0]=c=>g("yes"))},{default:l(()=>t[3]||(t[3]=[y("Có")])),_:1},8,["loading"])])]),default:l(()=>[t[4]||(t[4]=n("div",null,[n("p",{class:"text-base"},"Bạn có chắc chắn muốn hủy lịch khám không?")],-1))]),_:1})}}}),oe=[{label:"Tất cả",value:0},{label:"Đã xác nhận",value:1},{label:"Đã hủy",value:2},{label:"Đã tới khám",value:3},{label:"Quá hạn chưa tới khám",value:4}],le={class:"container"},se={class:"flex items-center justify-start space-x-2 py-6"},ie={class:"bg-[#e8f2f7]"},pe={class:"container py-6"},re={class:"mr-3 flex items-center justify-end"},ue=E({__name:"BookingHistoryView",setup(b){const{setOpenPopup:_}=U(),v=$();q(()=>{c()});const g=d([]),m=d(0),t=d({...W}),r=d(!1),f=d({}),c=async()=>{try{t.value.loading=!0;const a=v.params.id,i=await x.getDataBookingHistory(a,m.value,t.value);g.value=i.value.contentResponse,t.value.totalElements=i.value.totalElements,t.value.loading=!1}catch(a){t.value.loading=!1,console.log(a)}},H=a=>{t.value.pageSize=a,t.value.pageIndex=1,c()},D=a=>{t.value.pageIndex=a,c()},L=a=>{m.value=a,c()},T=()=>{M.push({name:"Home"})},z=a=>{f.value=a,_("popup-confirm-delete-booking")},V=async()=>{try{r.value=!0,await x.deleteBooking(f.value.id),O.success("Hủy đặt khám thành công"),_("popup-confirm-delete-booking",!1),r.value=!1,c()}catch(a){console.log(a),r.value=!1}};return(a,i)=>{const k=K,F=G,P=J,p=N,S=R;return h(),C(I,null,[n("div",le,[n("p",se,[n("span",{class:"cursor-pointer text-base font-semibold",onClick:T},"Trang chủ"),o(k,{name:"arrow-right"}),i[3]||(i[3]=n("span",{class:"cursor-pointer font-semibold text-primary"},"Lịch sử khám bệnh",-1))])]),n("div",ie,[n("div",pe,[o(P,{modelValue:s(m),"onUpdate:modelValue":i[0]||(i[0]=e=>A(m)?m.value=e:null),placeholder:"Chọn",class:"select",onChange:L},{default:l(()=>[(h(!0),C(I,null,j(s(oe),(e,B)=>(h(),w(F,{key:B,value:e.value,label:e.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"]),o(S,{page:s(t).pageIndex,"onUpdate:page":i[1]||(i[1]=e=>s(t).pageIndex=e),limit:s(t).pageSize,"onUpdate:limit":i[2]||(i[2]=e=>s(t).pageSize=e),data:s(g),query:s(t),class:"mt-6",onPageChange:D,onLimitChange:H},{default:l(()=>[o(p,{type:"index",index:e=>("printIndex"in a?a.printIndex:s(Y))(e,s(t)),width:"75",label:"#",align:"center"},null,8,["index"]),o(p,{label:"thời gian",width:"180"},{default:l(({row:e})=>[n("p",null,u(s(X)(e.checkIn,"DD/MM/YYYY HH:mm:ss")),1)]),_:1}),o(p,{label:"bác sĩ"},{default:l(({row:e})=>[n("p",null,u(e.doctor.info.name),1)]),_:1}),o(p,{label:"chuyên khoa"},{default:l(({row:e})=>[n("p",null,u(e.specialize.department.name),1)]),_:1}),o(p,{label:"gói khám"},{default:l(({row:e})=>[n("p",null,u(e.specialize.name),1)]),_:1}),o(p,{label:"giá"},{default:l(({row:e})=>[n("p",null,u(s(Z)(e.specialize.price)),1)]),_:1}),o(p,{label:"trạng thái"},{default:l(({row:e})=>[n("p",null,u(e.status),1)]),_:1}),o(p,{label:"thanh toán"},{default:l(({row:e})=>[n("p",null,u(e.paymentStatus),1)]),_:1}),o(p,{label:"hành động",align:"right"},{default:l(({row:e})=>[n("div",re,[o(k,{name:"delete",onClick:B=>z(e)},null,8,["onClick"])])]),_:1})]),_:1},8,["page","limit","data","query"])])]),o(ae,{"is-loading-button":s(r),onYes:V},null,8,["is-loading-button"])],64)}}}),Ve=Q(ue,[["__scopeId","data-v-1dd8cf41"]]);export{Ve as default};

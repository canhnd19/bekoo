import{a as pe,_ as ce,p as me,E as fe}from"./BasePopup-0z7mCBbB.js";import{_ as ve}from"./BaseIcon.vue_vue_type_script_setup_true_lang-2KUpWumk.js";import{d as W,v as j,y as Q,x as u,B as z,e as G,o as i,l as U,m as n,A as Y,a as e,q as o,f as t,n as I,c as f,C as A,p as L,F as R,t as y,D as O,G as S,E as X,_ as J}from"./index-CEt8ap1D.js";import{E as ge}from"./el-select-EhrHRoGi.js";import{_ as K}from"./BaseButton-BiZZtvq_.js";import{_ as he}from"./BaseInput-D6JdsdLB.js";import{G as xe,D as be}from"./index-Dh1zF_J0.js";import{_ as _e}from"./BaseSelect-CXZDxgvX.js";import{u as ye,E as Ve}from"./useConvertUTCTime-Bsdd5MQE.js";import{E as we}from"./el-input-BFDgVOhq.js";import"./el-scrollbar-D3HEHJcV.js";import"./el-popper-iFOlLOCr.js";import"./el-button-BdBlWsXJ.js";import{E as Ce,a as ke}from"./el-form-item-C3tmCKvE.js";import{_ as De}from"./PopupConfirmDeleteUser.vue_vue_type_script_setup_true_lang-BNwxLYJh.js";import"./use-form-item-CmQ7KHzz.js";import"./refs-3EpWAYDS.js";import"./castArray-C8upieRi.js";const Ee={class:"space-y-4 px-20 pb-6"},Pe={class:"flex"},Be={class:"mr-7 space-y-2"},Ne={key:0,class:"-!mt-1 text-xs text-[#f56c6c]"},Ue={class:"style-flex"},Ie={class:"space-y-2"},Ae={key:0,class:"-!mt-1 text-xs text-[#f56c6c]"},Re={class:"style-flex"},Fe={class:"space-y-2"},Te={class:"space-y-2"},Me={class:"style-flex h-[102px]"},qe=["onClick"],Le={key:0,class:"-!mt-1 text-xs text-[#f56c6c]"},Ye=["onClick"],ze={key:0,class:"-!mt-1 text-xs text-[#f56c6c]"},Ge={class:"style-flex h-[102px]"},Oe=["onClick"],Se={key:0,class:"-!mt-1 text-xs text-[#f56c6c]"},$e={class:"space-y-2"},He={class:"style-flex"},We={class:"space-y-2"},je={class:"space-y-2"},Qe={class:"style-flex"},Xe={class:"space-y-2"},Je={class:"space-y-2"},Ke={class:"flex items-center justify-end space-x-3"},Ze=W({__name:"PopupAddDoctor",emits:["created"],setup(Z,{emit:N}){const{setOpenPopup:V}=j(),F=N;Q(()=>{T()});const w=u(!1),v=u(!1),p=u([]),h=u([]),x=u(""),b=u(""),s=u({trainingBy:"",description:"",user:{name:"",phoneNumber:"",email:"",cccd:"",province:"",district:"",commune:"",aboutAddress:"",password:"",confirmPassword:"",dob:"",gender:""}}),c=u([]),C=u(!1),k=u(!1),m=u(!1),D=u(!1),E=u(!1),T=async()=>{try{w.value=!0;const d=await z.getListProvince();c.value=d,w.value=!1}catch(d){console.log(d)}},r=async()=>{try{const d=await z.getListDistrict(x.value);p.value=d.districts}catch(d){console.log(d)}},$=async()=>{try{const d=await z.getListWards(b.value);h.value=d.wards}catch(d){console.log(d)}},ee=()=>{s.value.user.dob?C.value=!1:C.value=!0},le=()=>{s.value.user.gender?k.value=!1:k.value=!0},se=()=>{s.value.user.province?m.value=!1:m.value=!0},te=G(()=>!x.value),ae=()=>{if(s.value.user.province)s.value.user.district?D.value=!1:D.value=!0;else return},oe=G(()=>!b.value),ne=()=>{if(s.value.user.district)s.value.user.commune?E.value=!1:E.value=!0;else return},re=async()=>{try{v.value=!0;const d=await S.createDoctor({...s.value,user:{...s.value.user,dob:ye(s.value.user.dob,"FROM")}});X.success(d.message),V("popup-add-doctor",!1),F("created"),v.value=!1}catch(d){v.value=!1,console.log(d)}},ue=G(()=>!(s.value.user.cccd&&s.value.user.commune&&s.value.user.confirmPassword&&s.value.user.district&&s.value.user.dob&&s.value.user.email&&s.value.user.gender&&s.value.user.name&&s.value.user.password&&s.value.user.phoneNumber&&s.value.user.province));return(d,l)=>{const g=we,P=Ce,B=ke,de=Ve,M=ge,q=_e,H=K,ie=pe;return i(),U(ie,{name:"popup-add-doctor",width:"1280"},{title:n(()=>l[14]||(l[14]=[Y(" Add doctor ")])),footer:n(()=>[e("div",Ke,[o(H,{type:"plain",size:"small",class:"w-20",onClick:l[13]||(l[13]=a=>t(V)("popup-add-doctor",!1))},{default:n(()=>l[32]||(l[32]=[Y("Hủy")])),_:1}),o(H,{disabled:t(ue),loading:t(v),size:"small",class:"w-32",onClick:re},{default:n(()=>l[33]||(l[33]=[Y("Tạo bác sĩ")])),_:1},8,["disabled","loading"])])]),default:n(()=>[e("div",Ee,[l[29]||(l[29]=e("div",{class:"pt-7"},[e("div",{class:"rounded-lg border border-solid border-[#c1d5e9] bg-[#d4e9ff] p-4"},[e("p",{class:"text-[#11a2f3]"}," Vui lòng cung cấp thông tin chính xác để được phục vụ tốt nhất. Vì một số lí do nên có thể một số thông tin của bạn sẽ không chỉnh sửa được. ")])],-1)),l[30]||(l[30]=e("div",{class:"pt-6 text-2xl font-bold"},"Thông tin cá nhân",-1)),e("div",Pe,[e("div",Be,[l[15]||(l[15]=e("div",null,[e("span",{class:"text-label"},"Họ và tên (có dấu) "),e("span",{class:"text-[#ff3b30]"},"*")],-1)),o(B,{ref:"formRef",style:{"max-width":"500px"},model:t(s),"label-width":"auto",class:"demo-ruleForm"},{default:n(()=>[o(P,{prop:"user.name",rules:[{required:!0,message:"Vui lòng nhập họ và tên",trigger:"blur"}]},{default:n(()=>[o(g,{modelValue:t(s).user.name,"onUpdate:modelValue":l[0]||(l[0]=a=>t(s).user.name=a),class:"input",style:{height:"50px",width:"500px"},placeholder:"VÍ DỤ: NGỌ ĐỨC CẢNH"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),e("div",null,[l[16]||(l[16]=e("div",{class:"mb-2"},[e("span",{class:"text-label"}," Ngày sinh "),e("span",{class:"text-[#ff3b30]"},"*")],-1)),o(de,{modelValue:t(s).user.dob,"onUpdate:modelValue":l[1]||(l[1]=a=>t(s).user.dob=a),class:I([{validate:t(C)},"date-picker"]),type:"date",placeholder:"DD/MM/YYYY",format:"DD/MM/YYYY",onBlur:ee},null,8,["modelValue","class"]),t(C)?(i(),f("p",Ne,"Vui lòng nhập ngày sinh")):A("",!0)])]),e("div",Ue,[e("div",Ie,[l[17]||(l[17]=e("div",null,[e("span",{class:"text-label"},"Số điện thoại "),e("span",{class:"text-[#ff3b30]"},"*")],-1)),o(B,{ref:"formRef",style:{"max-width":"500px"},model:t(s),"label-width":"auto",class:"demo-ruleForm"},{default:n(()=>[o(P,{prop:"user.phoneNumber",rules:[{required:!0,message:"Vui lòng nhập số điện thoại",trigger:"blur"}]},{default:n(()=>[o(g,{modelValue:t(s).user.phoneNumber,"onUpdate:modelValue":l[2]||(l[2]=a=>t(s).user.phoneNumber=a),class:"input",style:{height:"50px",width:"500px"},placeholder:"Vui lòng nhập số điện thoại "},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),e("div",null,[l[18]||(l[18]=e("div",{class:"mb-2"},[e("span",{class:"text-label"},"Giới tính "),e("span",{class:"text-[#ff3b30]"},"*")],-1)),o(q,{modelValue:t(s).user.gender,"onUpdate:modelValue":l[3]||(l[3]=a=>t(s).user.gender=a),class:I([{"validate-select":t(k)},"select"]),clearable:"",placeholder:"Chọn giới tính",onBlur:le},{default:n(()=>[(i(!0),f(R,null,L(t(xe),(a,_)=>(i(),U(M,{key:_,value:a.value,label:a.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue","class"]),t(k)?(i(),f("p",Ae,"Vui lòng chọn giới tính")):A("",!0)])]),e("div",Re,[e("div",Fe,[l[19]||(l[19]=e("div",null,[e("span",{class:"text-label"},"Số CCCD/Passport "),e("span",{class:"text-[#ff3b30]"},"*")],-1)),o(B,{ref:"formRef",style:{"max-width":"500px"},model:t(s),"label-width":"auto",class:"demo-ruleForm"},{default:n(()=>[o(P,{prop:"user.cccd",rules:[{required:!0,message:"Vui lòng nhập số CCCD/Passport",trigger:"blur"}]},{default:n(()=>[o(g,{modelValue:t(s).user.cccd,"onUpdate:modelValue":l[4]||(l[4]=a=>t(s).user.cccd=a),class:"input",style:{height:"50px",width:"500px"},placeholder:"Nhập số CCCD/Passport"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),e("div",Te,[l[20]||(l[20]=e("div",null,[e("span",{class:"text-label"},"Địa chỉ Email "),e("span",{class:"text-[#ff3b30]"},"*")],-1)),o(B,{ref:"formRef",style:{"max-width":"500px"},model:t(s),"label-width":"auto",class:"demo-ruleForm"},{default:n(()=>[o(P,{prop:"user.email",rules:[{required:!0,message:"Vui lòng nhập địa chỉ email",trigger:"blur"},{type:"email",message:"Vui lòng nhập địa chỉ email chính xác",trigger:["blur","change"]}]},{default:n(()=>[o(g,{modelValue:t(s).user.email,"onUpdate:modelValue":l[5]||(l[5]=a=>t(s).user.email=a),class:"input",style:{height:"50px",width:"500px"},placeholder:"Vui lòng nhập email"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),e("div",Me,[e("div",null,[l[21]||(l[21]=e("div",{class:"mb-2"},[e("span",{class:"text-label"},"Tỉnh / Thành "),e("span",{class:"text-[#ff3b30]"},"*")],-1)),o(q,{modelValue:t(x),"onUpdate:modelValue":l[6]||(l[6]=a=>O(x)?x.value=a:null),class:I([{"validate-select":t(m)},"select"]),clearable:"",placeholder:"Chọn tỉnh thành",onChange:r,onBlur:se},{default:n(()=>[(i(!0),f(R,null,L(t(c),(a,_)=>(i(),U(M,{key:_,value:a.code,label:a.name},{default:n(()=>[e("p",{onClick:()=>{t(s).user.province=a.name}},y(a.name),9,qe)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","class"]),t(m)?(i(),f("p",Le,"Vui lòng chọn tỉnh/thành")):A("",!0)]),e("div",null,[l[22]||(l[22]=e("div",{class:"mb-2"},[e("span",{class:"text-label"},"Quận / Huyện "),e("span",{class:"text-[#ff3b30]"},"*")],-1)),o(q,{modelValue:t(b),"onUpdate:modelValue":l[7]||(l[7]=a=>O(b)?b.value=a:null),class:I([{"validate-select":t(D)},"select"]),clearable:"",placeholder:"Chọn quận huyện",disabled:t(te),onChange:$,onBlur:ae},{default:n(()=>[(i(!0),f(R,null,L(t(p),(a,_)=>(i(),U(M,{key:_,value:a.code,label:a.name},{default:n(()=>[e("p",{onClick:()=>{t(s).user.district=a.name}},y(a.name),9,Ye)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","class","disabled"]),t(D)?(i(),f("p",ze,"Vui lòng chọn quận/huyện")):A("",!0)])]),e("div",Ge,[e("div",null,[l[23]||(l[23]=e("div",{class:"mb-2"},[e("span",{class:"text-label"},"Phường / Xã "),e("span",{class:"text-[#ff3b30]"},"*")],-1)),o(q,{class:I([{"validate-select":t(E)},"select"]),clearable:"",placeholder:"Chọn phường xã",disabled:t(oe),onBlur:ne},{default:n(()=>[(i(!0),f(R,null,L(t(h),(a,_)=>(i(),U(M,{key:_,value:a.code,label:a.name},{default:n(()=>[e("p",{onClick:()=>{t(s).user.commune=a.name}},y(a.name),9,Oe)]),_:2},1032,["value","label"]))),128))]),_:1},8,["class","disabled"]),t(E)?(i(),f("p",Se,"Vui lòng chọn phường/xã")):A("",!0)]),e("div",$e,[l[24]||(l[24]=e("p",{class:"text-label"},"Địa chỉ hiện tại",-1)),o(g,{modelValue:t(s).user.aboutAddress,"onUpdate:modelValue":l[8]||(l[8]=a=>t(s).user.aboutAddress=a),class:"input",style:{height:"50px",width:"500px"},placeholder:"Vui lòng nhập địa chỉ hiện tại"},null,8,["modelValue"])])]),e("div",He,[e("div",We,[l[25]||(l[25]=e("p",{class:"text-label"},"Mô tả học vấn",-1)),o(g,{modelValue:t(s).trainingBy,"onUpdate:modelValue":l[9]||(l[9]=a=>t(s).trainingBy=a),class:"input",style:{height:"50px",width:"500px"},autosize:{minRows:2},type:"textarea",placeholder:"Vui lòng nhập mô tả"},null,8,["modelValue"])]),e("div",je,[l[26]||(l[26]=e("p",{class:"text-label"},"Mô tả",-1)),o(g,{modelValue:t(s).description,"onUpdate:modelValue":l[10]||(l[10]=a=>t(s).description=a),class:"input",style:{height:"50px",width:"500px"},autosize:{minRows:2},type:"textarea",placeholder:"Vui lòng nhập mô tả"},null,8,["modelValue"])])]),l[31]||(l[31]=e("div",{class:"text-2xl font-bold"},"Thông tin tài khoản",-1)),e("div",Qe,[e("div",Xe,[l[27]||(l[27]=e("div",null,[e("span",{class:"text-label"},"Mật khẩu "),e("span",{class:"text-[#ff3b30]"},"*")],-1)),o(B,{ref:"formRef",style:{"max-width":"500px"},model:t(s),"label-width":"auto",class:"demo-ruleForm"},{default:n(()=>[o(P,{prop:"user.password",rules:[{required:!0,message:"Vui lòng nhập mật khẩu",trigger:"blur"}]},{default:n(()=>[o(g,{modelValue:t(s).user.password,"onUpdate:modelValue":l[11]||(l[11]=a=>t(s).user.password=a),class:"input",style:{height:"50px",width:"500px"},placeholder:"Vui lòng nhập mật khẩu",type:"password","show-password":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),e("div",Je,[l[28]||(l[28]=e("div",null,[e("span",{class:"text-label"},"Xác nhận mật khẩu "),e("span",{class:"text-[#ff3b30]"},"*")],-1)),o(B,{ref:"formRef",style:{"max-width":"500px"},model:t(s),"label-width":"auto",class:"demo-ruleForm"},{default:n(()=>[o(P,{prop:"user.confirmPassword",rules:[{required:!0,message:"Vui lòng nhập lại mật khẩu",trigger:"blur"}]},{default:n(()=>[o(g,{modelValue:t(s).user.confirmPassword,"onUpdate:modelValue":l[12]||(l[12]=a=>t(s).user.confirmPassword=a),class:"input",style:{height:"50px",width:"500px"},placeholder:"Vui lòng nhập lại mật khẩu",type:"password","show-password":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])])])]),_:1})}}}),el=J(Ze,[["__scopeId","data-v-253cff29"]]),ll={class:"flex items-start justify-between"},sl={class:"flex items-center justify-end space-x-3"},tl=W({__name:"DoctorView",setup(Z){const{setOpenPopup:N}=j(),V=u(""),F=u([]),w=u({}),v=u(!1),p=u({...be,search:""});Q(()=>{h()});const h=async()=>{try{p.value.loading=!0;const s=await S.getAllDoctor(p.value);F.value=s.value.contentResponse,p.value.totalElements=s.value.totalElements,p.value.loading=!1}catch(s){p.value.loading=!1,console.log(s)}},x=s=>{w.value=s,N("popup-confirm-delete-user")},b=async()=>{try{v.value=!0;const s=await S.deteteDoctor([w.value.id]);X.success(s.message),N("popup-confirm-delete-user",!1),v.value=!1,h()}catch(s){v.value=!1,console.log(s)}};return(s,c)=>{var T;const C=he,k=K,m=fe,D=ve,E=ce;return i(),f(R,null,[e("div",ll,[o(C,{modelValue:t(V),"onUpdate:modelValue":c[0]||(c[0]=r=>O(V)?V.value=r:null),class:"input-search","show-icon":!0},null,8,["modelValue"]),o(k,{size:"small",class:"w-20",onClick:c[1]||(c[1]=r=>t(N)("popup-add-doctor"))},{default:n(()=>c[4]||(c[4]=[Y("Add")])),_:1})]),o(E,{page:t(p).pageIndex,"onUpdate:page":c[2]||(c[2]=r=>t(p).pageIndex=r),limit:t(p).pageSize,"onUpdate:limit":c[3]||(c[3]=r=>t(p).pageSize=r),data:t(F),query:t(p),class:"mt-6",label:"user",onPageChange:h,onLimitChange:h},{default:n(()=>[o(m,{type:"index",index:r=>("printIndex"in s?s.printIndex:t(me))(r,t(p)),label:"#",align:"center"},null,8,["index"]),o(m,{label:"NAME"},{default:n(({row:r})=>[e("p",null,y(r.info.name),1)]),_:1}),o(m,{label:"EMAIL"},{default:n(({row:r})=>[e("p",null,y(r.info.email),1)]),_:1}),o(m,{label:"PHONE NUMBER",width:"200"},{default:n(({row:r})=>[e("p",null,y(r.info.phoneNumber),1)]),_:1}),o(m,{label:"GENDER",width:"90"},{default:n(({row:r})=>[e("p",null,y(r.info.gender),1)]),_:1}),o(m,{label:"ACTION",width:"120",align:"right"},{default:n(({row:r})=>[e("div",sl,[o(D,{name:"delete",onClick:$=>x(r)},null,8,["onClick"])])]),_:1})]),_:1},8,["page","limit","data","query"]),o(el,{onCreated:h}),o(De,{email:(T=t(w).info)==null?void 0:T.email,"is-loading-delete":t(v),onDelete:b},null,8,["email","is-loading-delete"])],64)}}}),Vl=J(tl,[["__scopeId","data-v-6662dc9a"]]);export{Vl as default};

var K=Object.defineProperty;var O=(r,e,s)=>e in r?K(r,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[e]=s;var f=(r,e,s)=>O(r,typeof e!="symbol"?e+"":e,s);import{_ as I}from"./BaseIcon.vue_vue_type_script_setup_true_lang-Dk_E2eQT.js";import{_ as q}from"./BaseInput-C_q9Unmp.js";import{d as $,ah as F,l as W,y as v,A as P,M as D,z as j,o,c,$ as E,f as a,s as k,p as A,a as t,F as b,q as C,n as U,v as R,t as y,bc as z,R as J,_ as H,D as L,ai as Y,J as Q,m as X,N as Z,U as ee}from"./index-DXwo3dST.js";import{S as te,P as se,N as ne,a as ie}from"./swiper-vue-CFuOuMGY.js";import"./el-popper-BpZrbxzR.js";import{h as oe}from"./el-popover-C2WK9II3.js";import{_ as N}from"./favicon-BHUZcTbH.js";import{C as ae}from"./index-B22TPO_9.js";/* empty css                 */import"./use-form-item-NlqCf7-L.js";import"./index-CNFpyTCL.js";import"./index-DAPEPXKC.js";const ce="/images/homepage_banner.png";function le(r){return typeof r!="string"?r:r.replace(/[\u0000-\u001F\u007F-\u009F]/g,e=>e===`
`?"\\n":e==="\r"?"\\r":e==="	"?"\\t":e==="\b"?"\\b":e==="\f"?"\\f":"")}function re(r){try{return JSON.parse(r)}catch(e){try{const s=le(r);return JSON.parse(s)}catch{throw e}}}class he{constructor(e){f(this,"url");f(this,"socket");f(this,"isConnected");f(this,"reconnectAttempts");f(this,"maxReconnectAttempts");f(this,"reconnectInterval");f(this,"listeners");f(this,"pendingMessages");this.url=e,this.socket=null,this.isConnected=!1,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectInterval=3e3,this.listeners={},this.pendingMessages=[],this.connect()}connect(){try{this.socket=new WebSocket(this.url),this.socket.onopen=e=>{console.log("WebSocket connection established"),this.isConnected=!0,this.reconnectAttempts=0,this.pendingMessages.length>0&&(this.pendingMessages.forEach(s=>this.send(s)),this.pendingMessages=[]),this.notifyListeners("connect",e)},this.socket.onmessage=e=>{try{const s=re(e.data);console.log("Message from server:",s),this.notifyListeners("message",s)}catch(s){console.error("Error processing message:",s),this.notifyListeners("error",{type:"parse_error",error:s,rawData:e.data})}},this.socket.onclose=e=>{this.isConnected=!1,console.log(`WebSocket connection closed: ${e.code} ${e.reason}`),this.notifyListeners("close",e),this.reconnectAttempts<this.maxReconnectAttempts?(this.reconnectAttempts++,console.log(`Trying to reconnect (${this.reconnectAttempts}/${this.maxReconnectAttempts})...`),setTimeout(()=>this.connect(),this.reconnectInterval)):console.error("Max reconnect attempts reached. Please refresh the page.")},this.socket.onerror=e=>{console.error("WebSocket Error:",e),this.notifyListeners("error",e)}}catch(e){console.error("Unable to create WebSocket connection:",e)}}send(e){if(!this.isConnected){this.pendingMessages.push(e),console.warn("WebSocket not connected yet. Message will be sent after connection.");return}try{this.socket&&this.socket.send(JSON.stringify(e))}catch(s){console.error("Error sending WebSocket message:",s)}}addListener(e,s){return this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(s),()=>{if(this.listeners[e]){const d=this.listeners[e].indexOf(s);d!==-1&&this.listeners[e].splice(d,1)}}}notifyListeners(e,s){this.listeners[e]&&this.listeners[e].forEach(d=>d(s))}disconnect(){this.socket&&this.isConnected&&this.socket.close(1e3,"Disconnect from client"),this.isConnected=!1,this.listeners={},this.pendingMessages=[],this.reconnectAttempts=0}getConnectionStatus(){return this.isConnected}}const B=new he("ws://localhost:8083/chat");B.addListener("connect",()=>{console.log("Connected to WebSocket server")});const de={class:"fixed bottom-8 right-8 h-[46px] cursor-pointer sm:bottom-16 sm:right-2"},ue={class:"chat-container"},me={key:0,class:"bot-avatar"},pe={class:"message"},ge={key:0,class:"action-button-container"},ve={class:"chat-input space-x-4"},fe=$({__name:"MedicalChatBot",setup(r){const{user:e}=F(W()),s=v(),d=v(),T=()=>{var h,l;(l=(h=a(d).popperRef)==null?void 0:h.delayHide)==null||l.call(h)},g=v([]),_=v(""),u=v(null),S=v(!1);P(()=>{setTimeout(()=>{x("Bạn cần đăng ký đặt lịch khám vào hôm nào ạ?","bot"),S.value=!0},1e3)});const x=(h,l)=>{g.value.push({text:h,sender:l,timestamp:new Date}),D(()=>{u.value&&(u.value.scrollTop=u.value.scrollHeight)})},M=()=>{_.value.trim()!==""&&(i(_.value),x(_.value,"user"),_.value="")},m=()=>{S.value=!1,x("Tôi muốn đặt lịch khám","user"),setTimeout(()=>{x("Bekoo đã tiếp nhận thông tin và đang kết nối với nhân viên hỗ trợ, bạn vui lòng chờ trong giây lát.","bot")},1e3),i("Tôi muốn đặt lịch khám")};j(g,()=>{D(()=>{u.value&&(u.value.scrollTop=u.value.scrollHeight)})});const i=h=>{var n;const l={type:1,senderId:(n=e.value.patient)!=null&&n.info?e.value.patient.info.id:e.value.doctor.info.id,adminStatus:"ON",content:h,timestamp:new Date().getTime()};B.send(l)};return B.addListener("message",h=>{console.log("Received data from BE:",h.botResponse),console.log(" typeof data",typeof h),x(h.botResponse,"bot")}),(h,l)=>{const n=I,p=oe;return o(),c("div",de,[E(k(n,{ref_key:"buttonRef",ref:s,name:"chat-bot",size:"40",class:"text-primary"},null,512),[[a(ae),T]]),k(p,{ref_key:"popoverRef",ref:d,"popper-style":{padding:0,borderRadius:"8px"},placement:"left","virtual-ref":s.value,trigger:"click","virtual-triggering":"",width:"400px"},{default:A(()=>[t("div",ue,[l[2]||(l[2]=t("div",{class:"chat-header"},[t("div",{class:"user-info"},[t("div",{class:"avatar rounded-full bg-white p-1"},[t("img",{src:N,alt:"User avatar"})]),t("div",{class:"user-details"},[t("div",{class:"user-name"},"Chăm sóc khách hàng Bekoo"),t("div",{class:"user-status"},"Tư Vấn Trực Tuyến")])])],-1)),t("div",{ref_key:"messagesContainer",ref:u,class:"chat-messages"},[(o(!0),c(b,null,C(g.value,(w,G)=>(o(),c("div",{key:G,class:U(["message-wrapper",w.sender==="user"?"user-message":"bot-message"])},[w.sender==="bot"?(o(),c("div",me,l[1]||(l[1]=[t("img",{src:N,alt:"User avatar",class:"rounded-full bg-white p-1"},null,-1)]))):R("",!0),t("div",pe,y(w.text),1)],2))),128)),S.value?(o(),c("div",ge,[t("button",{class:"action-button",onClick:m},"Đặt lịch khám mới")])):R("",!0)],512),t("div",ve,[E(t("input",{"onUpdate:modelValue":l[0]||(l[0]=w=>_.value=w),type:"text",placeholder:"Nhập nội dung...",onKeyup:J(M,["enter"])},null,544),[[z,_.value]]),t("button",{class:"btn-primary",onClick:M},[k(n,{name:"send",size:"20"})])])])]),_:1},8,["virtual-ref"])])}}}),ke=H(fe,[["__scopeId","data-v-5f88c40d"]]),V=[{icon:"/images/doctor.png",label:"Đặt khám theo bác sĩ"},{icon:"/images/tele.png",label:"Tư vấn khám bệnh qua video"},{icon:"/images/dat-lich-xet-nghiem.png",label:"Đặt lịch xét nghiệm"},{icon:"/images/goi_kham.png",label:"Gói khám sức khỏe"},{icon:"/images/tiem-chung.png",label:"Đặt lịch tiêm chủng"},{icon:"/images/y-te-tai-nha.png",label:"Y tế tại nhà"},{icon:"/images/thanhtoanvp.png",label:"Thanh toán viện phí"}],_e=[{icon:"/images/luotdatkham.png",value:"3.0M+",label:"Lượt khám"},{icon:"/images/bacsi.png",value:"100+",label:"Bác sĩ"},{icon:"/images/luottruycapthang.png",value:"850K+",label:"Lượt truy cập tháng"},{icon:"/images/luottruycapngay.png",value:"28.3K++",label:"Lượt truy cập trong ngày"}],be=[{detailFeelPeople:"Đặt lịch xét nghiệm bên này rất gọn, có ngày giờ cụ thể luôn lên là được xét nghiệm liền không rườm rà gì mấy. An tâm đặt cho gia đình, có cả xét nghiệm tận nhà, không mất thời gian.",name:"Yến Chi ",avatar:"/images/feedback2.jpg"},{detailFeelPeople:"Cảm ơn Bekoo giúp mình và gia đình tiết kiệm thời gian và công sức khi đi khám. Ba mình lớn tuổi nên mắt yếu, đi khám BV Mắt ở xa lên tới Hà nội khám cực với đông nhưng từ bây giờ chỉ cần đặt khám qua Bekoo, không cần xếp hàng chờ đợi.",name:"Mộc Trà",avatar:"/images/feedback1.jpg"},{detailFeelPeople:"Đặt lịch khám qua Bekoo rất dễ dàng và tiện lợi. Tôi đánh giá cao tính năng thanh toán trực tuyến và cập nhật lịch sử khám bệnh. Giao diện trực quan, giúp tôi dễ dàng tìm kiếm và lựa chọn dịch vụ.",name:"An Nhung",avatar:"/images/feedback6.jpg"},{detailFeelPeople:"Tôi rất hài lòng với dịch vụ đặt lịch của Bekoo. Ứng dụng dễ sử dụng, giúp tôi đặt lịch khám nhanh chóng mà không cần chờ đợi. Điều tuyệt vời là có thể chọn bác sĩ theo nhu cầu và lịch trình cá nhân. ",name:"Mai Vy",avatar:"/images/feedback3.jpg"},{detailFeelPeople:"Dịch vụ Bekoo giúp tôi tiết kiệm nhiều thời gian nhờ vào tính năng đặt lịch trực tuyến. Từ khi sử dụng Bekoo, tôi không còn phải xếp hàng dài ở bệnh viện nữa. Giao diện đơn giản, dễ hiểu, thông tin rõ ràng về các bác sĩ và dịch vụ.",name:"Mạnh Hùng",avatar:"/images/feedback4.jpg"},{detailFeelPeople:"Bekoo thực sự là một ứng dụng hữu ích trong việc chăm sóc sức khỏe! Tôi ấn tượng với tính năng nhắc nhở tự động, giúp tôi không bao giờ quên lịch hẹn. Hệ thống đặt lịch rất mượt, giao diện thân thiện. ",name:"Roãn Quyền",avatar:"/images/feedback5.jpg"}],ye={class:"relative"},xe={class:"absolute top-20 w-full"},we={class:"carousel"},Ce=["src"],Te={class:"mt-2 text-center"},Se={key:1,class:"grid grid-cols-2 gap-8"},Me=["src"],Be={class:"mt-2 text-center"},Ae={class:"container mt-28"},Re={class:"my-8 grid grid-cols-8 gap-x-12 gap-y-8 sm:grid-cols-2"},De=["onClick"],Ee=["src"],Le={class:"mt-2 text-center text-[20px]"},Ne={class:"show-more"},Ve={key:0,class:"is-loading"},Ie={key:1},$e={key:2},Fe={class:"container mt-28"},Pe={class:"feedback-card"},He={class:"mx-auto"},Ge={class:"border-border-table flex items-center justify-center space-x-2 border-t border-solid pt-4"},Ke=["src"],Oe={class:"text-base font-semibold"},qe={class:"statistics"},We={class:"container"},je={class:"statistics-item"},Ue=["src"],ze={class:"text-center text-2xl font-bold text-[#24313d]"},Je={class:"mt-2 text-center text-[20px] text-[#757575]"},Ye=$({__name:"HomeView",setup(r){const{isDesktop:e}=F(L()),s=[se,ne],d=v([]),T=v(""),g=v(!1);P(()=>{try{B.connect()}catch(m){console.error("Failed to connect to Socket.IO server",m)}});const{department:_}=L(),u=v({pageIndex:1,pageSize:40,totalElements:0,loading:!1}),S=async()=>{if(!(d.value.length>0))try{u.value.loading=!0;const m=await Z.getAllDepartment();d.value=m.value.contentResponse,u.value.loading=!1}catch(m){u.value.loading=!1,console.log(m)}},x=()=>{g.value=!g.value,g.value&&S()},M=m=>{sessionStorage.setItem("department-name",m.name),ee.push({name:"DepartmentDetail",params:{id:m.id}})};return(m,i)=>{const h=q,l=I;return o(),c(b,null,[t("div",ye,[i[4]||(i[4]=Y('<div class="marquee bg-[#ffb340] py-4" data-v-41cefc42><div class="marquee-content font-semibold text-white" data-v-41cefc42><p data-v-41cefc42>🎇 Tết đã về! Giảm Giá Đến 200.000đ - Vui lòng đặt lịch khám để được ưu đãi này!</p><p data-v-41cefc42>🎉 Khám sức khỏe định kỳ với giá ưu đãi!</p><p data-v-41cefc42>🎁 Ưu đãi đặc biệt cho khách hàng mới!</p><p data-v-41cefc42>🏥 Đặt lịch khám trực tuyến nhanh chóng và tiện lợi!</p><p data-v-41cefc42>🎇 Tết đã về! Giảm Giá Đến 200.000đ - Vui lòng đặt lịch khám để được ưu đãi này!</p><p data-v-41cefc42>🎉 Khám sức khỏe định kỳ với giá ưu đãi!</p><p data-v-41cefc42>🎁 Ưu đãi đặc biệt cho khách hàng mới!</p><p data-v-41cefc42>🏥 Đặt lịch khám trực tuyến nhanh chóng và tiện lợi!</p><p data-v-41cefc42>🎇 Tết đã về! Giảm Giá Đến 200.000đ - Vui lòng đặt lịch khám để được ưu đãi này!</p><p data-v-41cefc42>🎉 Khám sức khỏe định kỳ với giá ưu đãi!</p><p data-v-41cefc42>🎁 Ưu đãi đặc biệt cho khách hàng mới!</p><p data-v-41cefc42>🏥 Đặt lịch khám trực tuyến nhanh chóng và tiện lợi!</p></div></div><img src="'+ce+'" alt="" data-v-41cefc42>',2)),a(e)?(o(),c(b,{key:0},[t("div",xe,[i[1]||(i[1]=t("p",{class:"mb-2 text-center text-2xl text-[#11a2f3]"},"Nền tảng công nghệ",-1)),i[2]||(i[2]=t("p",{class:"text-center text-4xl font-bold"},"Kết nối người dân với Cơ sở - Dịch vụ Y tế",-1)),k(h,{modelValue:a(T),"onUpdate:modelValue":i[0]||(i[0]=n=>Q(T)?T.value=n:null),placeholder:"Tìm kiếm gói khám",class:"input-search","show-icon":!0},null,8,["modelValue"]),i[3]||(i[3]=t("p",{class:"mt-5 text-center text-xl"},"Đặt khám nhanh - Lấy số thứ tự trực tuyến - Tư vấn sức khỏe từ xa",-1))]),t("div",we,[(o(!0),c(b,null,C(a(V),(n,p)=>(o(),c("div",{key:p,class:"carousel-item"},[t("img",{src:n.icon,alt:"",class:"mx-auto w-14"},null,8,Ce),t("p",Te,y(n.label),1)]))),128))])],64)):(o(),c("div",Se,[(o(!0),c(b,null,C(a(V),(n,p)=>(o(),c("div",{key:p,class:"carousel-item"},[t("img",{src:n.icon,alt:"",class:"mx-auto w-14"},null,8,Me),t("p",Be,y(n.label),1)]))),128))]))]),t("div",Ae,[i[5]||(i[5]=t("p",{class:"label"},"CHUYÊN KHOA",-1)),t("div",Re,[(o(!0),c(b,null,C(a(g)&&a(d).length>0?a(d):a(_),(n,p)=>(o(),c("div",{key:p,class:"cursor-pointer",onClick:w=>M(n)},[t("img",{src:n.urlImage,alt:"",class:"mx-auto h-20 w-20"},null,8,Ee),t("p",Le,y(n.name),1)],8,De))),128))]),t("div",{class:"flex items-center justify-center",onClick:x},[t("div",Ne,[a(u).loading?(o(),c("div",Ve,[k(l,{name:"loading",class:"text-black"})])):R("",!0),a(g)&&a(d).length>0?(o(),c("p",Ie,"Thu gọn")):(o(),c("p",$e,"Xem tất cả")),k(l,{name:a(g)&&a(d).length>0?"direction-up":"direction-down",class:"ml-2"},null,8,["name"])])])]),t("div",Fe,[i[6]||(i[6]=t("p",{class:"label"},"Cảm nhận từ khách hàng",-1)),k(a(te),{ref:"{swiperRef}","slides-per-view":a(e)?3:1,"space-between":40,pagination:{type:"fraction"},navigation:!0,modules:s,class:"my-swiper my-8"},{default:A(()=>[(o(!0),c(b,null,C(a(be),(n,p)=>(o(),X(a(ie),{key:p},{default:A(()=>[t("div",Pe,[t("div",He,[k(l,{name:"icon-feedback",class:"ml-2 flex justify-center text-[#ced3d9]"})]),t("p",null,y(n.detailFeelPeople),1),t("div",Ge,[t("img",{src:n.avatar,alt:"",class:"h-10 w-10 rounded-full object-cover"},null,8,Ke),t("p",Oe,y(n.name),1)])])]),_:2},1024))),128))]),_:1},8,["slides-per-view"])]),i[8]||(i[8]=t("div",{class:"bg"},null,-1)),t("div",qe,[t("div",We,[i[7]||(i[7]=t("p",{class:"label"},"THỐNG KÊ",-1)),t("div",je,[(o(!0),c(b,null,C(a(_e),(n,p)=>(o(),c("div",{key:p,class:"cursor-pointer"},[t("img",{src:n.icon,alt:"",class:"mx-auto w-24"},null,8,Ue),t("p",ze,y(n.value),1),t("p",Je,y(n.label),1)]))),128))])])]),k(ke)],64)}}}),ht=H(Ye,[["__scopeId","data-v-41cefc42"]]);export{ht as default};

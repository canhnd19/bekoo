import{_ as Q}from"./BaseSelect-r8zehZN2.js";import{d as E,y as t,z as X,A as q,o as i,c as h,a as c,m as f,p as R,f as _,q as T,t as N,s as v,h as Z,F as S,e as ee,B as C,C as P,_ as ae}from"./index-BNZlxmQ0.js";import{E as te}from"./el-select-vHSKAgd4.js";import{u as M}from"./useConvertUTCTime-I4Z56cTM.js";import{u as le}from"./useFormatNumber-C6QqUNKY.js";import{C as U,r as oe,_ as $}from"./BaseChart.vue_vue_type_script_setup_true_lang-kmF4VDKq.js";import{_ as se}from"./BaseIcon.vue_vue_type_script_setup_true_lang-C2di59ZF.js";import{_ as ne}from"./BaseLoading-591jiTyX.js";import{S as re,P as ue,N as ie,a as ce}from"./swiper-vue-CKlcv15Q.js";import{u as z}from"./index-H_i3kV72.js";import"./el-scrollbar-D5ltqoJX.js";import"./el-popper-xrLYVjRb.js";import"./use-form-item-BReAePHK.js";import"./castArray-DmjPmPnq.js";import"./index-DBJhGBzw.js";import"./scroll-CgPn9xs0.js";import"./isEqual-CntcYAL8.js";import"./index-CnFKH6a2.js";U.register(...oe);const de={class:"mx-auto w-full max-w-2xl p-4"},pe=E({__name:"BaseChartPie",props:{datasets:{default:()=>[]},isLoading:{type:Boolean,default:!1}},setup(b){const d=t(null),o=b;X(()=>o.datasets,()=>{o.datasets.length&&m()}),q(()=>{});const m=()=>{const p=d.value.getContext("2d");p&&new U(p,{type:"pie",data:{labels:o.datasets.map(l=>l.range),datasets:[{data:o.datasets.map(l=>l.value),backgroundColor:["rgba(255, 99, 132, 0.8)","rgba(54, 162, 235, 0.8)","rgba(255, 206, 86, 0.8)","rgba(75, 192, 192, 0.8)","rgba(153, 102, 255, 0.8)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)"],borderWidth:1}]},options:{responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Phân bố độ tuổi"},tooltip:{callbacks:{label:function(l){let s=l.label+" tuổi"||"";return s&&(s+=": "),l.parsed!==null&&(s+=l.parsed+" người"),s}}}}}})};return(p,l)=>(i(),h("div",de,[c("canvas",{ref_key:"chartRef",ref:d},null,512)]))}}),me={class:"rounded-lg border border-solid border-[#DBDBDB] px-4 py-6"},ve={class:"mb-2 flex items-center justify-between"},ge={class:"text-[#5B616E]"},he={class:"text-2xl font-semibold text-[var(--dr-text-input-label-mobile)]"},fe=E({__name:"BaseSummary",props:{dataSummary:{default:()=>[]},isLoading:{type:Boolean,default:!1}},setup(b){const d=[ue,ie],o=b;return(m,p)=>{const l=ne,s=se;return i(),f(_(re),{ref:"{swiperRef}","slides-per-view":4,"space-between":30,pagination:{type:"fraction"},navigation:!0,modules:d,class:"my-swiper"},{default:R(()=>[o.isLoading?(i(),f(l,{key:0})):(i(!0),h(S,{key:1},T(o.dataSummary,(n,D)=>(i(),f(_(ce),{key:D},{default:R(()=>[c("div",me,[c("div",ve,[c("span",ge,N(n.title),1),v(s,{name:n.icon,size:"24",style:Z({color:n.color})},null,8,["name","style"])]),c("span",he,[c("span",null,N(n.value),1)])])]),_:2},1024))),128))]),_:1},512)}}}),O=[{label:"7 ngày",value:"7_DAYS"},{label:"1 tháng",value:"30_DAYS"},{label:"1 năm",value:"360_DAYS"}],_e={class:"mb-10"},be=E({__name:"ReportView",setup(b){q(()=>{Promise.all([L(),G(),H(),V()])});const d=t("7_DAYS"),o=t("7_DAYS"),m=t(!1),p=t(!1),l=t(!1),s=t(!1),n=t({totalDepartment:0,totalDoctor:0,totalPatient:0,totalSchedule:0,totalSpecialize:0}),D=t([]),w=t([]),x=t([]),A=t([]),B=t([]),I=t([{name:"Số lượng bệnh nhân",color:"#0A94FF"}]),j=t([{name:"Doanh thu",color:"#00A811"}]),k=t({groupType:1,fromDate:"",toDate:""}),F=t({groupType:1,fromDate:"",toDate:""}),W=ee(()=>[{title:"Tổng số bác sĩ",icon:"total-doctor",color:"#0151FC",value:n.value.totalDoctor},{title:"Tổng số bệnh nhân",icon:"menu-user",color:"#FD2E58",value:n.value.totalPatient},{title:"Tổng số chuyên khoa",icon:"total-department",color:"#00A811",value:n.value.totalDepartment},{title:"Tổng số gói khám",icon:"total-package",color:"#FF9E0C",value:n.value.totalSpecialize},{title:"Tổng số lượt đặt khám",icon:"total-booking",color:"#FF4A4A",value:n.value.totalSchedule}]),G=async()=>{try{m.value=!0;const e=await C.getDataReport();n.value={...e.value},m.value=!1}catch(e){m.value=!1,console.log(e)}},Y=()=>{const e=new Date,a=M(new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0),"TO"),u=d.value.split("_")[0],y=o.value.split("_")[0],r=M(new Date(e.getFullYear(),e.getMonth(),e.getDate()-Number(u),0,0,0,0),"FROM"),g=M(new Date(e.getFullYear(),e.getMonth(),e.getDate()-Number(y),0,0,0,0),"FROM");k.value.fromDate=r,k.value.toDate=a,F.value.fromDate=g,F.value.toDate=a},L=async()=>{try{p.value=!0,Y();const e={...k.value,groupType:d.value==="360_DAYS"?3:1},a=await C.getDataChartReport(e);J(a),p.value=!1}catch(e){p.value=!1,console.log(e)}},V=async()=>{try{l.value=!0,Y();const e={...F.value,groupType:o.value==="360_DAYS"?3:1},a=await C.getDataChartRevenueStatistics(e);K(a),l.value=!1}catch(e){l.value=!1,console.log(e)}},H=async()=>{try{s.value=!0;const e=await C.getDataChartAge();D.value=e.value,s.value=!1}catch(e){console.log(e),s.value=!1}},J=e=>{w.value=[],A.value=[];const a=[];P(e.value,u=>{w.value.push(z(u.time,"MMMM DD").value),a.push(u.value)}),A.value.push({label:"Số lượng bệnh nhân",data:a,tension:.2,borderColor:"#027BFE"})},K=e=>{x.value=[],B.value=[];const a=[];P(e.value,u=>{x.value.push(z(u.time,"MMMM DD").value),a.push(+le(u.value))}),B.value.push({label:"Doanh thu",data:a,tension:.2,borderColor:"#00A811"})};return(e,a)=>{const u=te,y=Q;return i(),h(S,null,[v(fe,{"data-summary":_(W),"is-loading":m.value},null,8,["data-summary","is-loading"]),c("div",_e,[a[2]||(a[2]=c("p",{class:"mt-4 text-2xl font-semibold"},"Biểu đồ thống kê bệnh nhân đặt lịch khám",-1)),v(y,{modelValue:d.value,"onUpdate:modelValue":a[0]||(a[0]=r=>d.value=r),placeholder:"",class:"select",clearable:!1,onChange:L},{default:R(()=>[(i(!0),h(S,null,T(_(O),(r,g)=>(i(),f(u,{key:g,label:r.label,value:r.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),v($,{label:w.value,"legend-chart":I.value,datasets:A.value,"is-loading":p.value},null,8,["label","legend-chart","datasets","is-loading"])]),a[3]||(a[3]=c("p",{class:"mt-4 text-2xl font-semibold"},"Biểu đồ thống kê doanh thu",-1)),v(y,{modelValue:o.value,"onUpdate:modelValue":a[1]||(a[1]=r=>o.value=r),placeholder:"",class:"select",clearable:!1,onChange:V},{default:R(()=>[(i(!0),h(S,null,T(_(O),(r,g)=>(i(),f(u,{key:g,label:r.label,value:r.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),v($,{label:x.value,"legend-chart":j.value,datasets:B.value,"is-loading":l.value},null,8,["label","legend-chart","datasets","is-loading"]),a[4]||(a[4]=c("p",{class:"my-10 text-2xl font-semibold"},"Biểu đồ thống kê độ tuổi bệnh nhân",-1)),v(pe,{datasets:D.value,"is-loading":s.value},null,8,["datasets","is-loading"])],64)}}}),Pe=ae(be,[["__scopeId","data-v-c9056492"]]);export{Pe as default};

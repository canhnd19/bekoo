import{b as pe,_ as ce,a as me,p as fe,E as ve}from"./PopupConfirmDelete.vue_vue_type_script_setup_true_lang-D0ZlZDiV.js";import{_ as ge}from"./BaseIcon.vue_vue_type_script_setup_true_lang-CAiP8aEG.js";import{d as Q,v as X,y as J,x as p,B as O,e as $,o as m,l as N,m as n,A as S,a as e,q as o,f as s,n as U,c as v,C as I,p as L,F as A,t as V,D as j,G as z,E as K,_ as Z}from"./index-BOWFC6BE.js";import{E as he}from"./el-select-CsMXB__N.js";import{_ as ee}from"./BaseButton-BT60jiqN.js";import{_ as xe}from"./BaseInput-DtOy4AQi.js";import{G as be,D as _e}from"./index-D12LjGri.js";import{_ as ye}from"./BaseSelect-C34DuBl2.js";import{u as Ve,E as we}from"./useConvertUTCTime-x5JuqEDQ.js";import{E as Ce}from"./el-input-DcGKsDVZ.js";import"./el-scrollbar-D3NCpjcB.js";import"./el-popper-qUzvNd1R.js";import"./el-button-BCRY8aSQ.js";import{E as ke,a as De}from"./el-form-item-BVpeZ4eF.js";import"./use-form-item-Cv6wCcN-.js";import"./refs-ChBJ43UD.js";import"./castArray-BajDoRb2.js";const Ee={class:"space-y-4 px-20 pb-6"},Pe={class:"flex"},Be={class:"mr-7 space-y-2"},Ne={key:0,class:"-!mt-1 text-xs text-[#f56c6c]"},Ue={class:"style-flex"},Ie={class:"space-y-2"},Ae={key:0,class:"-!mt-1 text-xs text-[#f56c6c]"},Re={class:"style-flex"},Fe={class:"space-y-2"},Te={class:"space-y-2"},Me={class:"style-flex h-[102px]"},qe=["onClick"],Le={key:0,class:"-!mt-1 text-xs text-[#f56c6c]"},Se=["onClick"],ze={key:0,class:"-!mt-1 text-xs text-[#f56c6c]"},Ye={class:"style-flex h-[102px]"},Ge=["onClick"],Oe={key:0,class:"-!mt-1 text-xs text-[#f56c6c]"},$e={class:"space-y-2"},He={class:"style-flex"},We={class:"space-y-2"},je={class:"space-y-2"},Qe={class:"style-flex"},Xe={class:"space-y-2"},Je={class:"space-y-2"},Ke={class:"flex items-center justify-end space-x-3"},Ze=Q({__name:"PopupAddDoctor",emits:["created"],setup(le,{emit:E}){const{setOpenPopup:P}=X(),B=E;J(()=>{Y()});const x=p(!1),r=p(!1),g=p([]),R=p([]),b=p(""),_=p(""),t=p({trainingBy:"",description:"",user:{name:"",phoneNumber:"",email:"",cccd:"",province:"",district:"",commune:"",aboutAddress:"",password:"",confirmPassword:"",dob:"",gender:""}}),F=p([]),i=p(!1),u=p(!1),w=p(!1),C=p(!1),f=p(!1),Y=async()=>{try{x.value=!0;const c=await O.getListProvince();F.value=c,x.value=!1}catch(c){console.log(c)}},G=async()=>{try{const c=await O.getListDistrict(b.value);g.value=c.districts}catch(c){console.log(c)}},T=async()=>{try{const c=await O.getListWards(_.value);R.value=c.wards}catch(c){console.log(c)}},d=()=>{t.value.user.dob?i.value=!1:i.value=!0},H=()=>{t.value.user.gender?u.value=!1:u.value=!0},se=()=>{t.value.user.province?w.value=!1:w.value=!0},te=$(()=>!b.value),ae=()=>{if(t.value.user.province)t.value.user.district?C.value=!1:C.value=!0;else return},oe=$(()=>!_.value),ne=()=>{if(t.value.user.district)t.value.user.commune?f.value=!1:f.value=!0;else return},re=async()=>{try{r.value=!0;const c=await z.createDoctor({...t.value,user:{...t.value.user,dob:Ve(t.value.user.dob,"FROM")}});K.success(c.message),P("popup-add-doctor",!1),B("created"),r.value=!1}catch(c){r.value=!1,console.log(c)}},ue=$(()=>!(t.value.user.cccd&&t.value.user.commune&&t.value.user.confirmPassword&&t.value.user.district&&t.value.user.dob&&t.value.user.email&&t.value.user.gender&&t.value.user.name&&t.value.user.password&&t.value.user.phoneNumber&&t.value.user.province));return(c,l)=>{const h=Ce,k=ke,D=De,de=we,M=he,q=ye,W=ee,ie=pe;return m(),N(ie,{name:"popup-add-doctor",width:"1280"},{title:n(()=>l[14]||(l[14]=[S(" Add doctor ")])),footer:n(()=>[e("div",Ke,[o(W,{type:"plain",size:"small",class:"w-20",onClick:l[13]||(l[13]=a=>s(P)("popup-add-doctor",!1))},{default:n(()=>l[32]||(l[32]=[S("Hủy")])),_:1}),o(W,{disabled:s(ue),loading:s(r),size:"small",class:"w-32",onClick:re},{default:n(()=>l[33]||(l[33]=[S("Tạo bác sĩ")])),_:1},8,["disabled","loading"])])]),default:n(()=>[e("div",Ee,[l[29]||(l[29]=e("div",{class:"pt-7"},[e("div",{class:"rounded-lg border border-solid border-[#c1d5e9] bg-[#d4e9ff] p-4"},[e("p",{class:"text-[#11a2f3]"}," Vui lòng cung cấp thông tin chính xác để được phục vụ tốt nhất. Vì một số lí do nên có thể một số thông tin của bạn sẽ không chỉnh sửa được. ")])],-1)),l[30]||(l[30]=e("div",{class:"pt-6 text-2xl font-bold"},"Thông tin cá nhân",-1)),e("div",Pe,[e("div",Be,[l[15]||(l[15]=e("div",null,[e("span",{class:"text-label"},"Họ và tên (có dấu) "),e("span",{class:"text-[#ff3b30]"},"*")],-1)),o(D,{ref:"formRef",style:{"max-width":"500px"},model:s(t),"label-width":"auto",class:"demo-ruleForm"},{default:n(()=>[o(k,{prop:"user.name",rules:[{required:!0,message:"Vui lòng nhập họ và tên",trigger:"blur"}]},{default:n(()=>[o(h,{modelValue:s(t).user.name,"onUpdate:modelValue":l[0]||(l[0]=a=>s(t).user.name=a),class:"input",style:{height:"50px",width:"500px"},placeholder:"VÍ DỤ: NGỌ ĐỨC CẢNH"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),e("div",null,[l[16]||(l[16]=e("div",{class:"mb-2"},[e("span",{class:"text-label"}," Ngày sinh "),e("span",{class:"text-[#ff3b30]"},"*")],-1)),o(de,{modelValue:s(t).user.dob,"onUpdate:modelValue":l[1]||(l[1]=a=>s(t).user.dob=a),class:U([{validate:s(i)},"date-picker"]),type:"date",placeholder:"DD/MM/YYYY",format:"DD/MM/YYYY",onBlur:d},null,8,["modelValue","class"]),s(i)?(m(),v("p",Ne,"Vui lòng nhập ngày sinh")):I("",!0)])]),e("div",Ue,[e("div",Ie,[l[17]||(l[17]=e("div",null,[e("span",{class:"text-label"},"Số điện thoại "),e("span",{class:"text-[#ff3b30]"},"*")],-1)),o(D,{ref:"formRef",style:{"max-width":"500px"},model:s(t),"label-width":"auto",class:"demo-ruleForm"},{default:n(()=>[o(k,{prop:"user.phoneNumber",rules:[{required:!0,message:"Vui lòng nhập số điện thoại",trigger:"blur"}]},{default:n(()=>[o(h,{modelValue:s(t).user.phoneNumber,"onUpdate:modelValue":l[2]||(l[2]=a=>s(t).user.phoneNumber=a),class:"input",style:{height:"50px",width:"500px"},placeholder:"Vui lòng nhập số điện thoại "},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),e("div",null,[l[18]||(l[18]=e("div",{class:"mb-2"},[e("span",{class:"text-label"},"Giới tính "),e("span",{class:"text-[#ff3b30]"},"*")],-1)),o(q,{modelValue:s(t).user.gender,"onUpdate:modelValue":l[3]||(l[3]=a=>s(t).user.gender=a),class:U([{"validate-select":s(u)},"select"]),clearable:"",placeholder:"Chọn giới tính",onBlur:H},{default:n(()=>[(m(!0),v(A,null,L(s(be),(a,y)=>(m(),N(M,{key:y,value:a.value,label:a.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue","class"]),s(u)?(m(),v("p",Ae,"Vui lòng chọn giới tính")):I("",!0)])]),e("div",Re,[e("div",Fe,[l[19]||(l[19]=e("div",null,[e("span",{class:"text-label"},"Số CCCD/Passport "),e("span",{class:"text-[#ff3b30]"},"*")],-1)),o(D,{ref:"formRef",style:{"max-width":"500px"},model:s(t),"label-width":"auto",class:"demo-ruleForm"},{default:n(()=>[o(k,{prop:"user.cccd",rules:[{required:!0,message:"Vui lòng nhập số CCCD/Passport",trigger:"blur"}]},{default:n(()=>[o(h,{modelValue:s(t).user.cccd,"onUpdate:modelValue":l[4]||(l[4]=a=>s(t).user.cccd=a),class:"input",style:{height:"50px",width:"500px"},placeholder:"Nhập số CCCD/Passport"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),e("div",Te,[l[20]||(l[20]=e("div",null,[e("span",{class:"text-label"},"Địa chỉ Email "),e("span",{class:"text-[#ff3b30]"},"*")],-1)),o(D,{ref:"formRef",style:{"max-width":"500px"},model:s(t),"label-width":"auto",class:"demo-ruleForm"},{default:n(()=>[o(k,{prop:"user.email",rules:[{required:!0,message:"Vui lòng nhập địa chỉ email",trigger:"blur"},{type:"email",message:"Vui lòng nhập địa chỉ email chính xác",trigger:["blur","change"]}]},{default:n(()=>[o(h,{modelValue:s(t).user.email,"onUpdate:modelValue":l[5]||(l[5]=a=>s(t).user.email=a),class:"input",style:{height:"50px",width:"500px"},placeholder:"Vui lòng nhập email"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),e("div",Me,[e("div",null,[l[21]||(l[21]=e("div",{class:"mb-2"},[e("span",{class:"text-label"},"Tỉnh / Thành "),e("span",{class:"text-[#ff3b30]"},"*")],-1)),o(q,{modelValue:s(b),"onUpdate:modelValue":l[6]||(l[6]=a=>j(b)?b.value=a:null),class:U([{"validate-select":s(w)},"select"]),clearable:"",placeholder:"Chọn tỉnh thành",onChange:G,onBlur:se},{default:n(()=>[(m(!0),v(A,null,L(s(F),(a,y)=>(m(),N(M,{key:y,value:a.code,label:a.name},{default:n(()=>[e("p",{onClick:()=>{s(t).user.province=a.name}},V(a.name),9,qe)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","class"]),s(w)?(m(),v("p",Le,"Vui lòng chọn tỉnh/thành")):I("",!0)]),e("div",null,[l[22]||(l[22]=e("div",{class:"mb-2"},[e("span",{class:"text-label"},"Quận / Huyện "),e("span",{class:"text-[#ff3b30]"},"*")],-1)),o(q,{modelValue:s(_),"onUpdate:modelValue":l[7]||(l[7]=a=>j(_)?_.value=a:null),class:U([{"validate-select":s(C)},"select"]),clearable:"",placeholder:"Chọn quận huyện",disabled:s(te),onChange:T,onBlur:ae},{default:n(()=>[(m(!0),v(A,null,L(s(g),(a,y)=>(m(),N(M,{key:y,value:a.code,label:a.name},{default:n(()=>[e("p",{onClick:()=>{s(t).user.district=a.name}},V(a.name),9,Se)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","class","disabled"]),s(C)?(m(),v("p",ze,"Vui lòng chọn quận/huyện")):I("",!0)])]),e("div",Ye,[e("div",null,[l[23]||(l[23]=e("div",{class:"mb-2"},[e("span",{class:"text-label"},"Phường / Xã "),e("span",{class:"text-[#ff3b30]"},"*")],-1)),o(q,{class:U([{"validate-select":s(f)},"select"]),clearable:"",placeholder:"Chọn phường xã",disabled:s(oe),onBlur:ne},{default:n(()=>[(m(!0),v(A,null,L(s(R),(a,y)=>(m(),N(M,{key:y,value:a.code,label:a.name},{default:n(()=>[e("p",{onClick:()=>{s(t).user.commune=a.name}},V(a.name),9,Ge)]),_:2},1032,["value","label"]))),128))]),_:1},8,["class","disabled"]),s(f)?(m(),v("p",Oe,"Vui lòng chọn phường/xã")):I("",!0)]),e("div",$e,[l[24]||(l[24]=e("p",{class:"text-label"},"Địa chỉ hiện tại",-1)),o(h,{modelValue:s(t).user.aboutAddress,"onUpdate:modelValue":l[8]||(l[8]=a=>s(t).user.aboutAddress=a),class:"input",style:{height:"50px",width:"500px"},placeholder:"Vui lòng nhập địa chỉ hiện tại"},null,8,["modelValue"])])]),e("div",He,[e("div",We,[l[25]||(l[25]=e("p",{class:"text-label"},"Mô tả học vấn",-1)),o(h,{modelValue:s(t).trainingBy,"onUpdate:modelValue":l[9]||(l[9]=a=>s(t).trainingBy=a),class:"input",style:{height:"50px",width:"500px"},autosize:{minRows:2},type:"textarea",placeholder:"Vui lòng nhập mô tả"},null,8,["modelValue"])]),e("div",je,[l[26]||(l[26]=e("p",{class:"text-label"},"Mô tả",-1)),o(h,{modelValue:s(t).description,"onUpdate:modelValue":l[10]||(l[10]=a=>s(t).description=a),class:"input",style:{height:"50px",width:"500px"},autosize:{minRows:2},type:"textarea",placeholder:"Vui lòng nhập mô tả"},null,8,["modelValue"])])]),l[31]||(l[31]=e("div",{class:"text-2xl font-bold"},"Thông tin tài khoản",-1)),e("div",Qe,[e("div",Xe,[l[27]||(l[27]=e("div",null,[e("span",{class:"text-label"},"Mật khẩu "),e("span",{class:"text-[#ff3b30]"},"*")],-1)),o(D,{ref:"formRef",style:{"max-width":"500px"},model:s(t),"label-width":"auto",class:"demo-ruleForm"},{default:n(()=>[o(k,{prop:"user.password",rules:[{required:!0,message:"Vui lòng nhập mật khẩu",trigger:"blur"}]},{default:n(()=>[o(h,{modelValue:s(t).user.password,"onUpdate:modelValue":l[11]||(l[11]=a=>s(t).user.password=a),class:"input",style:{height:"50px",width:"500px"},placeholder:"Vui lòng nhập mật khẩu",type:"password","show-password":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),e("div",Je,[l[28]||(l[28]=e("div",null,[e("span",{class:"text-label"},"Xác nhận mật khẩu "),e("span",{class:"text-[#ff3b30]"},"*")],-1)),o(D,{ref:"formRef",style:{"max-width":"500px"},model:s(t),"label-width":"auto",class:"demo-ruleForm"},{default:n(()=>[o(k,{prop:"user.confirmPassword",rules:[{required:!0,message:"Vui lòng nhập lại mật khẩu",trigger:"blur"}]},{default:n(()=>[o(h,{modelValue:s(t).user.confirmPassword,"onUpdate:modelValue":l[12]||(l[12]=a=>s(t).user.confirmPassword=a),class:"input",style:{height:"50px",width:"500px"},placeholder:"Vui lòng nhập lại mật khẩu",type:"password","show-password":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])])])]),_:1})}}}),el=Z(Ze,[["__scopeId","data-v-253cff29"]]),ll={class:"flex items-start justify-between"},sl={class:"flex items-center justify-end space-x-3"},tl=Q({__name:"DoctorView",setup(le){const{setOpenPopup:E}=X(),P=p([]),B=p({}),x=p(!1),r=p({..._e,name:""});J(()=>{g()});const g=async(i="")=>{try{r.value.loading=!0;const u=i==="search"?await z.getAllDoctorByName(r.value):await z.getAllDoctor(r.value);P.value=u.value.contentResponse,r.value.totalElements=u.value.totalElements,r.value.loading=!1}catch(u){r.value.loading=!1,console.log(u)}},R=i=>{B.value=i,E("popup-confirm-delete")},b=async()=>{try{x.value=!0;const i=await z.deteteDoctor([B.value.id]);K.success(i.message),E("popup-confirm-delete",!1),x.value=!1,g()}catch(i){x.value=!1,console.log(i)}},_=i=>{r.value.pageSize=i,r.value.pageIndex=1,g()},t=i=>{r.value.pageIndex=i,g()},F=()=>{r.value={...r.value,pageIndex:1,pageSize:10,totalElements:0},g("search")};return(i,u)=>{var T;const w=xe,C=ee,f=ve,Y=ge,G=me;return m(),v(A,null,[e("div",ll,[o(w,{modelValue:s(r).name,"onUpdate:modelValue":u[0]||(u[0]=d=>s(r).name=d),class:"input-search","show-icon":!0,onChange:F},null,8,["modelValue"]),o(C,{size:"small",class:"w-20",onClick:u[1]||(u[1]=d=>s(E)("popup-add-doctor"))},{default:n(()=>u[4]||(u[4]=[S("Add")])),_:1})]),o(G,{page:s(r).pageIndex,"onUpdate:page":u[2]||(u[2]=d=>s(r).pageIndex=d),limit:s(r).pageSize,"onUpdate:limit":u[3]||(u[3]=d=>s(r).pageSize=d),data:s(P),query:s(r),class:"mt-6",label:"doctor",onPageChange:t,onLimitChange:_},{default:n(()=>[o(f,{type:"index",index:d=>("printIndex"in i?i.printIndex:s(fe))(d,s(r)),label:"#",align:"center"},null,8,["index"]),o(f,{label:"NAME"},{default:n(({row:d})=>[e("p",null,V(d.info.name),1)]),_:1}),o(f,{label:"EMAIL"},{default:n(({row:d})=>[e("p",null,V(d.info.email),1)]),_:1}),o(f,{label:"PHONE NUMBER",width:"200"},{default:n(({row:d})=>[e("p",null,V(d.info.phoneNumber),1)]),_:1}),o(f,{label:"GENDER",width:"90"},{default:n(({row:d})=>[e("p",null,V(d.info.gender),1)]),_:1}),o(f,{label:"ACTION",width:"120",align:"right"},{default:n(({row:d})=>[e("div",sl,[o(Y,{name:"delete",onClick:H=>R(d)},null,8,["onClick"])])]),_:1})]),_:1},8,["page","limit","data","query"]),o(el,{onCreated:g}),o(ce,{name:(T=s(B).info)==null?void 0:T.email,type:"bác sĩ","is-loading-delete":s(x),onDelete:b},null,8,["name","is-loading-delete"])],64)}}}),yl=Z(tl,[["__scopeId","data-v-2a57885d"]]);export{yl as default};

import{_ as ae}from"./BaseButton-DITACc66.js";import{_ as le}from"./BaseSelect-COmHOR1t.js";import{d as oe,j as ne,aX as ce,y as re,x as n,B as V,e as k,f as s,o as r,l as m,c as u,a as e,q as i,m as d,n as w,C as E,aZ as ie,E as de,bf as ue,F as C,p as B,t as U,A as pe,_ as me}from"./index-B7eiBTV4.js";import{E as ve}from"./el-select-CjJ4xPVN.js";import{a as fe,E as _e}from"./el-form-item-BNHMlLPq.js";import{E as he}from"./el-input-BFNIFuDq.js";import{E as be}from"./el-progress-pp0oF_Ux.js";import{_ as ge}from"./BaseIcon.vue_vue_type_script_setup_true_lang-BM6B5sPu.js";import{_ as xe}from"./PageLoading-DjvelHJh.js";import"./el-scrollbar-CNGnv45V.js";import"./el-popper-DVIyM_vX.js";import"./use-form-item-B4Ai76jW.js";import"./castArray-CX7hjhLQ.js";const ye={key:1,class:"min-h-screen bg-[#e8f2f7]"},Ve={class:"container space-y-4 px-20 pb-6"},ke={class:"flex justify-between"},we={class:"flex w-[500px] justify-center"},Ee={class:"relative w-40"},Ce=["src"],Be={class:"border-border-table rounded-full border border-solid bg-white p-2"},Ue=["onClick"],Fe={key:0,class:"-!mt-1 text-xs text-[#f56c6c]"},Ae={class:"style-flex h-[102px]"},De=["onClick"],Le={key:0,class:"-!mt-1 text-xs text-[#f56c6c]"},Ne=["onClick"],je={key:0,class:"-!mt-1 text-xs text-[#f56c6c]"},Pe={class:"style-flex h-[102px]"},Ie={class:"space-y-2"},Se={class:"flex justify-end"},We=oe({__name:"EditUserView",setup(qe){const q=ne(),{user:c}=ce();re(()=>{H()});const b=n({}),g=n(!1),v=n(!1),F=n([]),A=n([]),D=n([]),L=n(""),N=n(c.province),j=n(c.district),P=n(c.commune),I=n(""),l=n({name:c.name,province:c.province,district:c.district,commune:c.commune,aboutAddress:c.aboutAddress}),f=n(!1),_=n(!1),h=n(!1),H=async()=>{try{g.value=!0;const o=await V.getListProvince();F.value=o,g.value=!1}catch(o){console.log(o)}},R=async()=>{try{const o=await V.getListDistrict(L.value);A.value=o.districts}catch(o){console.log(o)}},T=async()=>{try{const o=await V.getListWards(I.value);D.value=o.wards}catch(o){console.log(o)}},O=()=>{l.value.province?f.value=!1:f.value=!0},z=k(()=>!l.value.district),M=()=>{if(l.value.province)l.value.district?_.value=!1:_.value=!0;else return},X=k(()=>!l.value.commune),$=()=>{if(l.value.district)l.value.commune?h.value=!1:h.value=!0;else return},G=k(()=>!(l.value.commune&&l.value.district&&l.value.name&&l.value.province)),Q=async()=>{try{v.value=!0,await J();const o={...l.value,id:c.id,province:N.value,district:j.value,commune:P.value},t=await ie.editUser(o);de.success(t.message),q.push({name:"Home"}),v.value=!1}catch(o){v.value=!1,console.log(o)}},Z=async o=>{b.value=o,c.linkAvatar=URL.createObjectURL(b.value.raw)},J=async()=>{const o=new FormData;o.append("fileImage",b.value.raw),o.append("id",c.id);const t=await ue.uploadFile(o);console.log("🚀 ~ uploadFile ~ rs:",t)};return(o,t)=>{const K=xe,S=ge,Y=be,W=he,ee=_e,te=fe,x=ve,y=le,se=ae;return s(g)?(r(),m(K,{key:0})):(r(),u("div",ye,[e("div",Ve,[t[11]||(t[11]=e("div",{class:"pt-6 text-2xl font-bold"},"Thông tin cá nhân",-1)),e("div",ke,[e("div",we,[e("div",Ee,[s(c).linkAvatar?(r(),u("img",{key:1,src:s(c).linkAvatar,alt:"",class:"h-40 w-full rounded-full object-cover"},null,8,Ce)):(r(),m(S,{key:0,name:"avatar-default"})),i(Y,{"show-file-list":!1,"auto-upload":!1,accept:".png, .jpg, .webp, .jpeg","on-change":Z,class:"absolute bottom-4 right-1"},{default:d(()=>[e("div",Be,[i(S,{name:"edit-avatar"})])]),_:1})])]),e("div",null,[e("div",null,[t[5]||(t[5]=e("div",null,[e("span",{class:"text-label"},"Họ và tên (có dấu) "),e("span",{class:"text-[#ff3b30]"},"*")],-1)),i(te,{ref:"formRef",style:{"max-width":"500px"},model:s(l),"label-width":"auto",class:"demo-ruleForm"},{default:d(()=>[i(ee,{prop:"name",rules:[{required:!0,message:"Vui lòng nhập họ và tên",trigger:"blur"}]},{default:d(()=>[i(W,{modelValue:s(l).name,"onUpdate:modelValue":t[0]||(t[0]=a=>s(l).name=a),class:"input",style:{height:"50px",width:"500px"},placeholder:"VÍ DỤ: NGỌ ĐỨC CẢNH"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),e("div",null,[t[6]||(t[6]=e("div",{class:"mb-2"},[e("span",{class:"text-label"},"Tỉnh / Thành "),e("span",{class:"text-[#ff3b30]"},"*")],-1)),i(y,{modelValue:s(l).province,"onUpdate:modelValue":t[1]||(t[1]=a=>s(l).province=a),class:w([{"validate-select":s(f)},"select"]),clearable:"",placeholder:"Chọn tỉnh thành",onChange:R,onBlur:O},{default:d(()=>[(r(!0),u(C,null,B(s(F),(a,p)=>(r(),m(x,{key:p,value:a.code,label:a.name},{default:d(()=>[e("p",{onClick:()=>{N.value=a.name,L.value=a.code}},U(a.name),9,Ue)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","class"]),s(f)?(r(),u("p",Fe,"Vui lòng chọn tỉnh/thành")):E("",!0)])])]),e("div",Ae,[e("div",null,[t[7]||(t[7]=e("div",{class:"mb-2"},[e("span",{class:"text-label"},"Quận / Huyện "),e("span",{class:"text-[#ff3b30]"},"*")],-1)),i(y,{modelValue:s(l).district,"onUpdate:modelValue":t[2]||(t[2]=a=>s(l).district=a),class:w([{"validate-select":s(_)},"select"]),clearable:"",placeholder:"Chọn quận huyện",disabled:s(z),onChange:T,onBlur:M},{default:d(()=>[(r(!0),u(C,null,B(s(A),(a,p)=>(r(),m(x,{key:p,value:a.code,label:a.name},{default:d(()=>[e("p",{onClick:()=>{j.value=a.name,I.value=a.code}},U(a.name),9,De)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","class","disabled"]),s(_)?(r(),u("p",Le,"Vui lòng chọn quận/huyện")):E("",!0)]),e("div",null,[t[8]||(t[8]=e("div",{class:"mb-2"},[e("span",{class:"text-label"},"Phường / Xã "),e("span",{class:"text-[#ff3b30]"},"*")],-1)),i(y,{modelValue:s(l).commune,"onUpdate:modelValue":t[3]||(t[3]=a=>s(l).commune=a),class:w([{"validate-select":s(h)},"select"]),clearable:"",placeholder:"Chọn phường xã",disabled:s(X),onBlur:$},{default:d(()=>[(r(!0),u(C,null,B(s(D),(a,p)=>(r(),m(x,{key:p,value:a.code,label:a.name},{default:d(()=>[e("p",{onClick:()=>{P.value=a.name}},U(a.name),9,Ne)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","class","disabled"]),s(h)?(r(),u("p",je,"Vui lòng chọn phường/xã")):E("",!0)])]),e("div",Pe,[e("div",Ie,[t[9]||(t[9]=e("p",{class:"text-label"},"Địa chỉ hiện tại",-1)),i(W,{modelValue:s(l).aboutAddress,"onUpdate:modelValue":t[4]||(t[4]=a=>s(l).aboutAddress=a),class:"input",style:{height:"50px",width:"500px"},placeholder:"Vui lòng nhập địa chỉ hiện tại"},null,8,["modelValue"])])]),e("div",Se,[i(se,{disabled:s(G),loading:s(v),size:"large",class:"w-40",onClick:Q},{default:d(()=>t[10]||(t[10]=[pe("Sửa")])),_:1},8,["disabled","loading"])])])]))}}}),Ye=me(We,[["__scopeId","data-v-f1f7f6ea"]]);export{Ye as default};

import{ad as Ve,c9 as qe,N as le,ca as Ge,e as m,c1 as Je,al as $e,br as J,x as U,J as Z,aO as ne,b7 as Se,ak as $,ag as Ie,at as Ze,ae as Qe,au as ae,bD as Ee,bl as et,af as oe,d as Ae,b0 as tt,u as nt,b as Te,bW as at,cb as ot,cc as st,bk as it,aP as rt,y as lt,bb as ut,o as b,c as k,C as y,F as se,n as C,f as n,r as Y,a as R,l as F,m as _,M as q,aA as j,b5 as ie,q as ct,a_ as dt,ar as pt,bm as ft,t as G,h as vt,g as mt,ao as ke,w as ht}from"./index-B7eiBTV4.js";import{u as gt,d as Ne}from"./BaseIcon.vue_vue_type_script_setup_true_lang-BM6B5sPu.js";import{a as bt,c as yt,b as xt,u as wt}from"./use-form-item-B4Ai76jW.js";const Ct=()=>Ve&&/firefox/i.test(window.navigator.userAgent);var St=/\s/;function It(t){for(var o=t.length;o--&&St.test(t.charAt(o)););return o}var Et=/^\s+/;function Tt(t){return t&&t.slice(0,It(t)+1).replace(Et,"")}var Fe=NaN,kt=/^[-+]0x[0-9a-f]+$/i,Nt=/^0b[01]+$/i,Ft=/^0o[0-7]+$/i,zt=parseInt;function ze(t){if(typeof t=="number")return t;if(qe(t))return Fe;if(le(t)){var o=typeof t.valueOf=="function"?t.valueOf():t;t=le(o)?o+"":o}if(typeof t!="string")return t===0?t:+t;t=Tt(t);var i=Nt.test(t);return i||Ft.test(t)?zt(t.slice(2),i?2:8):kt.test(t)?Fe:+t}var re=function(){return Ge.Date.now()},Pt="Expected a function",Vt=Math.max,$t=Math.min;function Qt(t,o,i){var a,r,c,d,s,l,h=0,x=!1,p=!1,g=!0;if(typeof t!="function")throw new TypeError(Pt);o=ze(o)||0,le(i)&&(x=!!i.leading,p="maxWait"in i,c=p?Vt(ze(i.maxWait)||0,o):c,g="trailing"in i?!!i.trailing:g);function S(f){var w=a,P=r;return a=r=void 0,h=f,d=t.apply(P,w),d}function T(f){return h=f,s=setTimeout(N,o),x?S(f):d}function u(f){var w=f-l,P=f-h,V=o-w;return p?$t(V,c-P):V}function O(f){var w=f-l,P=f-h;return l===void 0||w>=o||w<0||p&&P>=c}function N(){var f=re();if(O(f))return I(f);s=setTimeout(N,u(f))}function I(f){return s=void 0,g&&a?S(f):(a=r=void 0,d)}function H(){s!==void 0&&clearTimeout(s),h=0,a=l=r=s=void 0}function A(){return s===void 0?d:I(re())}function B(){var f=re(),w=O(f);if(a=arguments,r=this,l=f,w){if(s===void 0)return T(l);if(p)return clearTimeout(s),s=setTimeout(N,o),S(l)}return s===void 0&&(s=setTimeout(N,o)),d}return B.cancel=H,B.flush=A,B}const ue="update:modelValue",en="change",tn="input",At=t=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(t),Bt=["class","style"],Lt=/^on[A-Z]/,Mt=(t={})=>{const{excludeListeners:o=!1,excludeKeys:i}=t,a=m(()=>((i==null?void 0:i.value)||[]).concat(Bt)),r=$e();return r?m(()=>{var c;return Je(Object.entries((c=r.proxy)==null?void 0:c.$attrs).filter(([d])=>!a.value.includes(d)&&!(o&&Lt.test(d))))}):m(()=>({}))};function Rt(t){let o;function i(){if(t.value==null)return;const{selectionStart:r,selectionEnd:c,value:d}=t.value;if(r==null||c==null)return;const s=d.slice(0,Math.max(0,r)),l=d.slice(Math.max(0,c));o={selectionStart:r,selectionEnd:c,value:d,beforeTxt:s,afterTxt:l}}function a(){if(t.value==null||o==null)return;const{value:r}=t.value,{beforeTxt:c,afterTxt:d,selectionStart:s}=o;if(c==null||d==null||s==null)return;let l=r.length;if(r.endsWith(d))l=r.length-d.length;else if(r.startsWith(c))l=c.length;else{const h=c[s-1],x=r.indexOf(h,s-1);x!==-1&&(l=x+1)}t.value.setSelectionRange(l,l)}return[i,a]}function Ot(t,{beforeFocus:o,afterFocus:i,beforeBlur:a,afterBlur:r}={}){const c=$e(),{emit:d}=c,s=J(),l=U(!1),h=g=>{Se(o)&&o(g)||l.value||(l.value=!0,d("focus",g),i==null||i())},x=g=>{var S;Se(a)&&a(g)||g.relatedTarget&&((S=s.value)!=null&&S.contains(g.relatedTarget))||(l.value=!1,d("blur",g),r==null||r())},p=()=>{var g,S;(g=s.value)!=null&&g.contains(document.activeElement)&&s.value!==document.activeElement||(S=t.value)==null||S.focus()};return Z(s,g=>{g&&g.setAttribute("tabindex","-1")}),ne(s,"focus",h,!0),ne(s,"blur",x,!0),ne(s,"click",p,!0),{isFocused:l,wrapperRef:s,handleFocus:h,handleBlur:x}}function Ht({afterComposition:t,emit:o}){const i=U(!1),a=s=>{o==null||o("compositionstart",s),i.value=!0},r=s=>{var l;o==null||o("compositionupdate",s);const h=(l=s.target)==null?void 0:l.value,x=h[h.length-1]||"";i.value=!At(x)},c=s=>{o==null||o("compositionend",s),i.value&&(i.value=!1,$(()=>t(s)))};return{isComposing:i,handleComposition:s=>{s.type==="compositionend"?c(s):r(s)},handleCompositionStart:a,handleCompositionUpdate:r,handleCompositionEnd:c}}let E;const Dt=`
  height:0 !important;
  visibility:hidden !important;
  ${Ct()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,Wt=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function Kt(t){const o=window.getComputedStyle(t),i=o.getPropertyValue("box-sizing"),a=Number.parseFloat(o.getPropertyValue("padding-bottom"))+Number.parseFloat(o.getPropertyValue("padding-top")),r=Number.parseFloat(o.getPropertyValue("border-bottom-width"))+Number.parseFloat(o.getPropertyValue("border-top-width"));return{contextStyle:Wt.map(d=>`${d}:${o.getPropertyValue(d)}`).join(";"),paddingSize:a,borderSize:r,boxSizing:i}}function Pe(t,o=1,i){var a;E||(E=document.createElement("textarea"),document.body.appendChild(E));const{paddingSize:r,borderSize:c,boxSizing:d,contextStyle:s}=Kt(t);E.setAttribute("style",`${s};${Dt}`),E.value=t.value||t.placeholder||"";let l=E.scrollHeight;const h={};d==="border-box"?l=l+c:d==="content-box"&&(l=l-r),E.value="";const x=E.scrollHeight-r;if(Ie(o)){let p=x*o;d==="border-box"&&(p=p+r+c),l=Math.max(p,l),h.minHeight=`${p}px`}if(Ie(i)){let p=x*i;d==="border-box"&&(p=p+r+c),l=Math.min(p,l)}return h.height=`${l}px`,(a=E.parentNode)==null||a.removeChild(E),E=void 0,h}const _t=Ze({id:{type:String,default:void 0},size:Qe,disabled:Boolean,modelValue:{type:ae([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:ae([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:Ee},prefixIcon:{type:Ee},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:ae([Object,Array,String]),default:()=>et({})},autofocus:Boolean,rows:{type:Number,default:2},...gt(["ariaLabel"])}),jt={[ue]:t=>oe(t),input:t=>oe(t),change:t=>oe(t),focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,clear:()=>!0,mouseleave:t=>t instanceof MouseEvent,mouseenter:t=>t instanceof MouseEvent,keydown:t=>t instanceof Event,compositionstart:t=>t instanceof CompositionEvent,compositionupdate:t=>t instanceof CompositionEvent,compositionend:t=>t instanceof CompositionEvent},Ut=Ae({name:"ElInput",inheritAttrs:!1}),Xt=Ae({...Ut,props:_t,emits:jt,setup(t,{expose:o,emit:i}){const a=t,r=tt(),c=nt(),d=m(()=>{const e={};return a.containerRole==="combobox"&&(e["aria-haspopup"]=r["aria-haspopup"],e["aria-owns"]=r["aria-owns"],e["aria-expanded"]=r["aria-expanded"]),e}),s=m(()=>[a.type==="textarea"?O.b():u.b(),u.m(S.value),u.is("disabled",T.value),u.is("exceed",Oe.value),{[u.b("group")]:c.prepend||c.append,[u.m("prefix")]:c.prefix||a.prefixIcon,[u.m("suffix")]:c.suffix||a.suffixIcon||a.clearable||a.showPassword,[u.bm("suffix","password-clear")]:X.value&&Q.value,[u.b("hidden")]:a.type==="hidden"},r.class]),l=m(()=>[u.e("wrapper"),u.is("focus",V.value)]),h=Mt({excludeKeys:m(()=>Object.keys(d.value))}),{form:x,formItem:p}=bt(),{inputId:g}=yt(a,{formItemContext:p}),S=xt(),T=wt(),u=Te("input"),O=Te("textarea"),N=J(),I=J(),H=U(!1),A=U(!1),B=U(),f=J(a.inputStyle),w=m(()=>N.value||I.value),{wrapperRef:P,isFocused:V,handleFocus:Be,handleBlur:Le}=Ot(w,{beforeFocus(){return T.value},afterBlur(){var e;a.validateEvent&&((e=p==null?void 0:p.validate)==null||e.call(p,"blur").catch(v=>Ne()))}}),ce=m(()=>{var e;return(e=x==null?void 0:x.statusIcon)!=null?e:!1}),D=m(()=>(p==null?void 0:p.validateState)||""),de=m(()=>D.value&&at[D.value]),Me=m(()=>A.value?ot:st),Re=m(()=>[r.style]),pe=m(()=>[a.inputStyle,f.value,{resize:a.resize}]),z=m(()=>it(a.modelValue)?"":String(a.modelValue)),X=m(()=>a.clearable&&!T.value&&!a.readonly&&!!z.value&&(V.value||H.value)),Q=m(()=>a.showPassword&&!T.value&&!a.readonly&&!!z.value&&(!!z.value||V.value)),L=m(()=>a.showWordLimit&&!!a.maxlength&&(a.type==="text"||a.type==="textarea")&&!T.value&&!a.readonly&&!a.showPassword),ee=m(()=>z.value.length),Oe=m(()=>!!L.value&&ee.value>Number(a.maxlength)),He=m(()=>!!c.suffix||!!a.suffixIcon||X.value||a.showPassword||L.value||!!D.value&&ce.value),[De,We]=Rt(N);rt(I,e=>{if(Ke(),!L.value||a.resize!=="both")return;const v=e[0],{width:M}=v.contentRect;B.value={right:`calc(100% - ${M+15+6}px)`}});const W=()=>{const{type:e,autosize:v}=a;if(!(!Ve||e!=="textarea"||!I.value))if(v){const M=ke(v)?v.minRows:void 0,we=ke(v)?v.maxRows:void 0,Ce=Pe(I.value,M,we);f.value={overflowY:"hidden",...Ce},$(()=>{I.value.offsetHeight,f.value=Ce})}else f.value={minHeight:Pe(I.value).minHeight}},Ke=(e=>{let v=!1;return()=>{var M;if(v||!a.autosize)return;((M=I.value)==null?void 0:M.offsetParent)===null||(e(),v=!0)}})(W),K=()=>{const e=w.value,v=a.formatter?a.formatter(z.value):z.value;!e||e.value===v||(e.value=v)},te=async e=>{De();let{value:v}=e.target;if(a.formatter&&(v=a.parser?a.parser(v):v),!ve.value){if(v===z.value){K();return}i(ue,v),i("input",v),await $(),K(),We()}},fe=e=>{i("change",e.target.value)},{isComposing:ve,handleCompositionStart:me,handleCompositionUpdate:he,handleCompositionEnd:ge}=Ht({emit:i,afterComposition:te}),_e=()=>{A.value=!A.value,be()},be=async()=>{var e;await $(),(e=w.value)==null||e.focus()},je=()=>{var e;return(e=w.value)==null?void 0:e.blur()},Ue=e=>{H.value=!1,i("mouseleave",e)},Xe=e=>{H.value=!0,i("mouseenter",e)},ye=e=>{i("keydown",e)},Ye=()=>{var e;(e=w.value)==null||e.select()},xe=()=>{i(ue,""),i("change",""),i("clear"),i("input","")};return Z(()=>a.modelValue,()=>{var e;$(()=>W()),a.validateEvent&&((e=p==null?void 0:p.validate)==null||e.call(p,"change").catch(v=>Ne()))}),Z(z,()=>K()),Z(()=>a.type,async()=>{await $(),K(),W()}),lt(()=>{!a.formatter&&a.parser,K(),$(W)}),o({input:N,textarea:I,ref:w,textareaStyle:pe,autosize:ut(a,"autosize"),isComposing:ve,focus:be,blur:je,select:Ye,clear:xe,resizeTextarea:W}),(e,v)=>(b(),k("div",ie(n(d),{class:[n(s),{[n(u).bm("group","append")]:e.$slots.append,[n(u).bm("group","prepend")]:e.$slots.prepend}],style:n(Re),role:e.containerRole,onMouseenter:Xe,onMouseleave:Ue}),[y(" input "),e.type!=="textarea"?(b(),k(se,{key:0},[y(" prepend slot "),e.$slots.prepend?(b(),k("div",{key:0,class:C(n(u).be("group","prepend"))},[Y(e.$slots,"prepend")],2)):y("v-if",!0),R("div",{ref_key:"wrapperRef",ref:P,class:C(n(l))},[y(" prefix slot "),e.$slots.prefix||e.prefixIcon?(b(),k("span",{key:0,class:C(n(u).e("prefix"))},[R("span",{class:C(n(u).e("prefix-inner"))},[Y(e.$slots,"prefix"),e.prefixIcon?(b(),F(n(j),{key:0,class:C(n(u).e("icon"))},{default:_(()=>[(b(),F(q(e.prefixIcon)))]),_:1},8,["class"])):y("v-if",!0)],2)],2)):y("v-if",!0),R("input",ie({id:n(g),ref_key:"input",ref:N,class:n(u).e("inner")},n(h),{minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?A.value?"text":"password":e.type,disabled:n(T),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.ariaLabel,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,onCompositionstart:n(me),onCompositionupdate:n(he),onCompositionend:n(ge),onInput:te,onChange:fe,onKeydown:ye}),null,16,["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","onCompositionstart","onCompositionupdate","onCompositionend"]),y(" suffix slot "),n(He)?(b(),k("span",{key:1,class:C(n(u).e("suffix"))},[R("span",{class:C(n(u).e("suffix-inner"))},[!n(X)||!n(Q)||!n(L)?(b(),k(se,{key:0},[Y(e.$slots,"suffix"),e.suffixIcon?(b(),F(n(j),{key:0,class:C(n(u).e("icon"))},{default:_(()=>[(b(),F(q(e.suffixIcon)))]),_:1},8,["class"])):y("v-if",!0)],64)):y("v-if",!0),n(X)?(b(),F(n(j),{key:1,class:C([n(u).e("icon"),n(u).e("clear")]),onMousedown:pt(n(ft),["prevent"]),onClick:xe},{default:_(()=>[ct(n(dt))]),_:1},8,["class","onMousedown"])):y("v-if",!0),n(Q)?(b(),F(n(j),{key:2,class:C([n(u).e("icon"),n(u).e("password")]),onClick:_e},{default:_(()=>[(b(),F(q(n(Me))))]),_:1},8,["class"])):y("v-if",!0),n(L)?(b(),k("span",{key:3,class:C(n(u).e("count"))},[R("span",{class:C(n(u).e("count-inner"))},G(n(ee))+" / "+G(e.maxlength),3)],2)):y("v-if",!0),n(D)&&n(de)&&n(ce)?(b(),F(n(j),{key:4,class:C([n(u).e("icon"),n(u).e("validateIcon"),n(u).is("loading",n(D)==="validating")])},{default:_(()=>[(b(),F(q(n(de))))]),_:1},8,["class"])):y("v-if",!0)],2)],2)):y("v-if",!0)],2),y(" append slot "),e.$slots.append?(b(),k("div",{key:1,class:C(n(u).be("group","append"))},[Y(e.$slots,"append")],2)):y("v-if",!0)],64)):(b(),k(se,{key:1},[y(" textarea "),R("textarea",ie({id:n(g),ref_key:"textarea",ref:I,class:[n(O).e("inner"),n(u).is("focus",n(V))]},n(h),{minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:n(T),readonly:e.readonly,autocomplete:e.autocomplete,style:n(pe),"aria-label":e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,rows:e.rows,onCompositionstart:n(me),onCompositionupdate:n(he),onCompositionend:n(ge),onInput:te,onFocus:n(Be),onBlur:n(Le),onChange:fe,onKeydown:ye}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),n(L)?(b(),k("span",{key:0,style:vt(B.value),class:C(n(u).e("count"))},G(n(ee))+" / "+G(e.maxlength),7)):y("v-if",!0)],64))],16,["role"]))}});var Yt=mt(Xt,[["__file","input.vue"]]);const nn=ht(Yt);export{en as C,nn as E,tn as I,ue as U,Ot as a,Qt as d,Ht as u};
